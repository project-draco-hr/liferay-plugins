{
  XMLStreamWriter xmlStreamWriter=null;
  try {
    UnsyncStringWriter unsyncStringWriter=new UnsyncStringWriter();
    XMLOutputFactory xmlOutputFactory=XMLOutputFactory.newInstance();
    xmlStreamWriter=xmlOutputFactory.createXMLStreamWriter(unsyncStringWriter);
    xmlStreamWriter.writeStartDocument();
    xmlStreamWriter.writeStartElement(_ROOT);
    xmlStreamWriter.writeAttribute(_AVAILABLE_LOCALES,StringUtil.merge(_availableLocales));
    xmlStreamWriter.writeAttribute(_DEFAULT_LOCALE,_defaultLocale.toString());
    for (    Locale locale : _availableLocales) {
      String value=get(locale);
      if (value != null) {
        xmlStreamWriter.writeStartElement(_key);
        xmlStreamWriter.writeAttribute(_LANGUAGE_ID,locale.toString());
        xmlStreamWriter.writeCharacters(value);
        xmlStreamWriter.writeEndElement();
      }
    }
    xmlStreamWriter.writeEndElement();
    xmlStreamWriter.writeEndDocument();
    return unsyncStringWriter.toString();
  }
 catch (  XMLStreamException xmlse) {
    throw new RuntimeException(xmlse);
  }
 finally {
    _close(xmlStreamWriter);
  }
}
