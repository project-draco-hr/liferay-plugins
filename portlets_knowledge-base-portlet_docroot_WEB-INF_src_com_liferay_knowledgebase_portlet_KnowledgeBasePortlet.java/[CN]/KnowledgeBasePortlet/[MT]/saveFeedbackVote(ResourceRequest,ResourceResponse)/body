{
  int vote=ParamUtil.getInteger(resourceRequest,"vote");
  long articleResourcePrimKey=ParamUtil.getLong(resourceRequest,"articleResourcePrimKey");
  long userId=ParamUtil.getLong(resourceRequest,"userId");
  KBFeedbackEntryLocalServiceUtil.updateVote(articleResourcePrimKey,userId,vote);
  KBFeedbackStats feedbackStats=KBFeedbackStatsLocalServiceUtil.getArticleFeedbackStats(articleResourcePrimKey);
  Map<String,String> parameterMap=new HashMap<String,String>();
  parameterMap.put("totalVotes",String.valueOf(feedbackStats.getTotalVotes()));
  parameterMap.put("yesVotes",String.valueOf(feedbackStats.getYesVotes()));
  sendJSON(resourceResponse,parameterMap);
}
