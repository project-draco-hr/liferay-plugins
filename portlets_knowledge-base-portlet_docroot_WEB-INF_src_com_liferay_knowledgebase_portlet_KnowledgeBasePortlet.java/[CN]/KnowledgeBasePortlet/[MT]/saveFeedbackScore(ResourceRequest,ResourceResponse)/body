{
  int score=ParamUtil.getInteger(resourceRequest,"score");
  long articleResourcePrimKey=ParamUtil.getLong(resourceRequest,"articleResourcePrimKey");
  long userId=ParamUtil.getLong(resourceRequest,"userId");
  KBFeedbackEntryLocalServiceUtil.updateScore(articleResourcePrimKey,userId,score);
  KBFeedbackStats feedbackStats=KBFeedbackStatsLocalServiceUtil.getArticleFeedbackStats(articleResourcePrimKey);
  Map<String,String> parameterMap=new HashMap<String,String>();
  parameterMap.put("averageScore",String.valueOf(feedbackStats.getAverageScore()));
  parameterMap.put("totalScoreEntries",String.valueOf(feedbackStats.getTotalScoreEntries()));
  sendJSON(resourceResponse,parameterMap);
}
