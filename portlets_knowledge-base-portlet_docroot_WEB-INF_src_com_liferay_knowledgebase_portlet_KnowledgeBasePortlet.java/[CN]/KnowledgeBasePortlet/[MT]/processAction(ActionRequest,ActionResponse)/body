{
  try {
    String actionName=ParamUtil.getString(actionRequest,"actionName");
    KBArticle article=null;
    if (actionName.equals(Constants.DELETE)) {
      deleteArticle(actionRequest);
    }
 else     if (actionName.equals(Constants.UPDATE)) {
      article=updateArticle(actionRequest);
    }
 else     if (actionName.equals(Constants.SUBSCRIBE)) {
      subscribe(actionRequest);
    }
 else     if (actionName.equals(Constants.UNSUBSCRIBE)) {
      unsubscribe(actionRequest);
    }
 else     if (actionName.equals("subscribeArticle")) {
      subscribeArticle(actionRequest);
    }
 else     if (actionName.equals("unsubscribeArticle")) {
      unsubscribeArticle(actionRequest);
    }
 else     if (actionName.equals("addAttachment")) {
      addAttachment(actionRequest);
    }
 else     if (actionName.equals("deleteAttachment")) {
      deleteAttachment(actionRequest);
    }
    boolean preview=ParamUtil.getBoolean(actionRequest,"preview");
    if (preview) {
      actionResponse.setRenderParameters(actionRequest.getParameterMap());
      actionResponse.setRenderParameter("view","edit_article");
    }
 else     if (Validator.isNotNull(actionName)) {
      String redirect=ParamUtil.getString(actionRequest,"redirect");
      if (article != null) {
        String saveAndContinueRedirect=ParamUtil.getString(actionRequest,"saveAndContinueRedirect");
        if (Validator.isNotNull(saveAndContinueRedirect)) {
          redirect=saveAndContinueRedirect;
        }
        if (Validator.isNotNull(redirect)) {
          redirect=HttpUtil.addParameter(redirect,"resourcePrimKey",article.getResourcePrimKey());
          redirect=HttpUtil.addParameter(redirect,"title",article.getTitle());
        }
      }
      if (SessionErrors.isEmpty(actionRequest)) {
        SessionMessages.add(actionRequest,"request_processed");
      }
      sendRedirect(actionRequest,actionResponse,redirect);
      return;
    }
  }
 catch (  Exception e) {
    if (e instanceof NoSuchArticleException || e instanceof PrincipalException) {
      SessionErrors.add(actionRequest,e.getClass().getName());
      actionResponse.setRenderParameters(actionRequest.getParameterMap());
      actionResponse.setRenderParameter("view","error");
    }
 else     if (e instanceof ArticleTitleException || e instanceof ArticleVersionException || e instanceof EntryNameException|| e instanceof PrincipalException) {
      SessionErrors.add(actionRequest,e.getClass().getName());
      actionResponse.setRenderParameters(actionRequest.getParameterMap());
      actionResponse.setRenderParameter("view","edit_article");
    }
 else {
      throw new PortletException(e);
    }
  }
}
