{
  try {
    String cmd=ParamUtil.getString(actionRequest,Constants.CMD);
    WikiPage page=null;
    if (cmd.equals(Constants.UPDATE)) {
      page=updatePage(actionRequest);
    }
 else     if (cmd.equals(Constants.DELETE)) {
      deletePage(actionRequest);
    }
    boolean preview=ParamUtil.getBoolean(actionRequest,"preview");
    if (preview) {
      actionResponse.setRenderParameters(actionRequest.getParameterMap());
    }
 else     if (Validator.isNotNull(cmd)) {
      String redirect=ParamUtil.getString(actionRequest,"redirect");
      if (page != null) {
        String saveAndContinueRedirect=ParamUtil.getString(actionRequest,"saveAndContinueRedirect");
        if (Validator.isNotNull(saveAndContinueRedirect)) {
          redirect=saveAndContinueRedirect;
        }
 else         if (redirect.endsWith("title=")) {
          redirect+=page.getTitle();
        }
      }
      if (SessionErrors.isEmpty(actionRequest)) {
        SessionMessages.add(actionRequest,"request_processed");
      }
      sendRedirect(actionRequest,actionResponse,redirect);
      return;
    }
  }
 catch (  Exception e) {
    throw new PortletException(e);
  }
}
