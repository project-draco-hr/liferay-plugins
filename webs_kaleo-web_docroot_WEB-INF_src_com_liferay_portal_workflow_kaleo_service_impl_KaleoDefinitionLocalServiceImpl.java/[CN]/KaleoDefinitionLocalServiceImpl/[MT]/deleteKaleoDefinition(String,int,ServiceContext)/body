{
  KaleoDefinition kaleoDefinition=getKaleoDefinition(name,version,serviceContext);
  if (kaleoDefinition.isActive()) {
    throw new WorkflowException("Cannot delete active workflow definition " + kaleoDefinition.getKaleoDefinitionId());
  }
  if (kaleoDefinition.hasIncompleteKaleoInstances()) {
    throw new WorkflowException("Cannot delete incomplete workflow definition " + kaleoDefinition.getKaleoDefinitionId());
  }
  kaleoDefinitionPersistence.remove(kaleoDefinition);
  kaleoInstanceLocalService.deleteKaleoInstances(kaleoDefinition.getKaleoDefinitionId());
  kaleoNodeLocalService.deleteKaleoNodes(kaleoDefinition.getKaleoDefinitionId());
  kaleoTaskLocalService.deleteKaleoTasks(kaleoDefinition.getKaleoDefinitionId());
  kaleoTransitionLocalService.deleteKaleoTransitions(kaleoDefinition.getKaleoDefinitionId());
}
