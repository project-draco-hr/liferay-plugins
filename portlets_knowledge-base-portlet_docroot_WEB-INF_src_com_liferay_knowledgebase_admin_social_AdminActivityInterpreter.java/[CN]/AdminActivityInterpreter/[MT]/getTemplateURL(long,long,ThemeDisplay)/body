{
  Portlet portlet=PortletLocalServiceUtil.getPortletById(themeDisplay.getCompanyId(),PortletKeys.KNOWLEDGE_BASE_ADMIN);
  ControlPanelEntry controlPanelEntry=portlet.getControlPanelEntryInstance();
  if (controlPanelEntry == null) {
    controlPanelEntry=(ControlPanelEntry)PortalClassInvoker.invoke(false,"com.liferay.portlet.DefaultControlPanelEntryFactory","getInstance",new String[0]);
  }
  String controlPanelEntryCategory=portlet.getControlPanelEntryCategory();
  if (!controlPanelEntry.isVisible(portlet,controlPanelEntryCategory,themeDisplay)) {
    return StringPool.BLANK;
  }
  Map<String,String[]> params=new HashMap<String,String[]>();
  String namespace=PortalUtil.getPortletNamespace(PortletKeys.KNOWLEDGE_BASE_ADMIN);
  params.put(namespace + "jspPage",new String[]{"/admin/view_template.jsp"});
  params.put(namespace + "templateId",new String[]{String.valueOf(templateId)});
  return PortalUtil.getControlPanelFullURL(groupId,PortletKeys.KNOWLEDGE_BASE_ADMIN,params);
}
