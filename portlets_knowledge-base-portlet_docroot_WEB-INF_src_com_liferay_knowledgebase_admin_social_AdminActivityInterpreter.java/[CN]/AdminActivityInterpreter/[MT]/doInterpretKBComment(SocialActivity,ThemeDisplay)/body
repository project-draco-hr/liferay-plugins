{
  KBComment kbComment=KBCommentLocalServiceUtil.getKBComment(activity.getClassPK());
  String groupName=StringPool.BLANK;
  if (activity.getGroupId() != themeDisplay.getScopeGroupId()) {
    groupName=getGroupName(activity.getGroupId(),themeDisplay);
  }
  String creatorUserName=getUserName(activity.getUserId(),themeDisplay);
  KBArticle kbArticle=null;
  KBTemplate kbTemplate=null;
  String className=kbComment.getClassName();
  if (className.equals(KBArticle.class.getName())) {
    kbArticle=KBArticleLocalServiceUtil.getLatestKBArticle(kbComment.getClassPK(),WorkflowConstants.STATUS_APPROVED);
  }
 else   if (className.equals(KBTemplate.class.getName())) {
    kbTemplate=KBTemplateLocalServiceUtil.getKBTemplate(kbComment.getClassPK());
  }
  String link=StringPool.BLANK;
  if (kbArticle != null) {
    link=KnowledgeBaseUtil.getKBArticleURL(themeDisplay.getPlid(),kbArticle.getResourcePrimKey(),kbArticle.getStatus(),themeDisplay.getPortalURL(),false);
  }
  String titlePattern=null;
  if (activity.getType() == AdminActivityKeys.ADD_KB_COMMENT) {
    if (Validator.isNull(groupName)) {
      titlePattern="activity-knowledge-base-admin-add-kb-comment";
    }
 else {
      titlePattern="activity-knowledge-base-admin-add-kb-comment-in";
    }
  }
 else   if (activity.getType() == AdminActivityKeys.UPDATE_KB_COMMENT) {
    if (Validator.isNull(groupName)) {
      titlePattern="activity-knowledge-base-admin-update-kb-comment";
    }
 else {
      titlePattern="activity-knowledge-base-admin-update-kb-comment-in";
    }
  }
  String entityTitle=null;
  if (kbArticle != null) {
    entityTitle=getValue(activity.getExtraData(),"title",kbArticle.getTitle());
  }
 else   if (kbTemplate != null) {
    entityTitle=getValue(activity.getExtraData(),"title",kbTemplate.getTitle());
  }
  Object[] titleArguments={creatorUserName,wrapLink(link,entityTitle),groupName};
  String title=themeDisplay.translate(titlePattern,titleArguments);
  String body=StringPool.BLANK;
  return new SocialActivityFeedEntry(link,title,body);
}
