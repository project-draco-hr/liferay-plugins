{
  KaleoTaskInstanceToken kaleoTaskInstanceToken=KaleoTaskInstanceTokenLocalServiceUtil.getKaleoTaskInstanceToken(workflowTaskInstanceId);
  KaleoTaskInstanceAssignment kaleoTaskInstanceAssignment=KaleoTaskInstanceAssignmentLocalServiceUtil.getKaleoTaskInstanceAssignment(workflowTaskInstanceId,User.class.getName(),serviceContext.getUserId());
  if (kaleoTaskInstanceAssignment.isCompleted()) {
    throw new WorkflowException("Cannot complete an already completed task " + workflowTaskInstanceId + " for user "+ serviceContext.getUserId());
  }
  KaleoInstanceToken currentKaleoInstanceToken=kaleoTaskInstanceToken.getKaleoInstanceToken();
  ExecutionContext executionContext=new ExecutionContext(currentKaleoInstanceToken,kaleoTaskInstanceToken,kaleoTaskInstanceAssignment,context,serviceContext);
  executionContext=_graphWalker.completeTask(comment,executionContext);
  _graphWalker.signalExit(transitionName,executionContext);
  return new WorkflowTaskAdapter(kaleoTaskInstanceToken,kaleoTaskInstanceAssignment,context);
}
