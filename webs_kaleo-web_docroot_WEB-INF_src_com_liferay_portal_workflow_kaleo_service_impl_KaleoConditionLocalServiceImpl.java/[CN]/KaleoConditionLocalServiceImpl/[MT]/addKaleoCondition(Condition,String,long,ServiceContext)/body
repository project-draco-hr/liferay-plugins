{
  User user=userPersistence.findByPrimaryKey(serviceContext.getUserId());
  Date now=new Date();
  long kaleoConditionId=counterLocalService.increment();
  KaleoCondition kaleoCondition=kaleoConditionPersistence.create(kaleoConditionId);
  kaleoCondition.setCompanyId(user.getCompanyId());
  kaleoCondition.setUserId(user.getUserId());
  kaleoCondition.setUserName(user.getFullName());
  kaleoCondition.setCreateDate(now);
  kaleoCondition.setModifiedDate(now);
  kaleoCondition.setClassName(className);
  kaleoCondition.setClassPK(classPK);
  kaleoCondition.setDescription(condition.getDescription());
  kaleoCondition.setScript(condition.getScript());
  kaleoCondition.setScriptLanguage(condition.getScriptLanguage().getValue());
  kaleoConditionPersistence.update(kaleoCondition,false);
  return kaleoCondition;
}
