{
  User user=UserUtil.getServiceContextUser(serviceContext,userPersistence,userLocalService);
  Date now=new Date();
  long kaleoConditionId=counterLocalService.increment();
  KaleoCondition kaleoCondition=kaleoConditionPersistence.create(kaleoConditionId);
  kaleoCondition.setCompanyId(user.getCompanyId());
  kaleoCondition.setUserId(user.getUserId());
  kaleoCondition.setUserName(user.getFullName());
  kaleoCondition.setCreateDate(now);
  kaleoCondition.setModifiedDate(now);
  kaleoCondition.setKaleoDefinitionId(kaleoDefinitionId);
  kaleoCondition.setKaleoNodeId(kaleoNodeId);
  kaleoCondition.setScript(condition.getScript());
  kaleoCondition.setScriptLanguage(condition.getScriptLanguage().getValue());
  kaleoConditionPersistence.update(kaleoCondition,false);
  return kaleoCondition;
}
