{
  String articleDirName=article.getAttachmentsDirName();
  try {
    dlService.addDirectory(article.getCompanyId(),CompanyConstants.SYSTEM,articleDirName);
  }
 catch (  DuplicateDirectoryException dde) {
    _log.error("Directory already exists for " + dde.getMessage());
  }
  if (Validator.isNull(dirName)) {
    return;
  }
  String[] fileNames=dlService.getFileNames(article.getCompanyId(),CompanyConstants.SYSTEM,dirName);
  for (  String fileName : fileNames) {
    InputStream inputStream=dlLocalService.getFileAsStream(article.getCompanyId(),CompanyConstants.SYSTEM,fileName);
    try {
      addAttachment(article.getCompanyId(),articleDirName,FileUtil.getShortFileName(fileName),inputStream);
    }
 catch (    DuplicateFileException dfe) {
      _log.error("File already exists for " + dfe.getMessage());
    }
  }
}
