{
  try {
    dlLocalService.addDirectory(article.getCompanyId(),CompanyConstants.SYSTEM,article.getAttachmentsDirName());
  }
 catch (  DuplicateDirectoryException dde) {
    _log.error("Directory already exists for " + dde.getMessage());
  }
  if (Validator.isNull(dirName)) {
    return;
  }
  String[] fileNames=dlLocalService.getFileNames(article.getCompanyId(),CompanyConstants.SYSTEM,dirName);
  for (  String fileName : fileNames) {
    byte[] bytes=dlLocalService.getFile(article.getCompanyId(),CompanyConstants.SYSTEM,fileName);
    try {
      addAttachment(article.getCompanyId(),article.getAttachmentsDirName(),FileUtil.getShortFileName(fileName),bytes);
    }
 catch (    DuplicateFileException dfe) {
      _log.error("File already exists for " + dfe.getMessage());
    }
  }
}
