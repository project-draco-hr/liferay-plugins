{
  String dirName="knowledgebase/temp/attachments/" + counterLocalService.increment();
  DLServiceUtil.addDirectory(companyId,CompanyConstants.SYSTEM,dirName);
  String[] fileNames=DLServiceUtil.getFileNames(companyId,CompanyConstants.SYSTEM,"knowledgebase/temp/attachments");
  Arrays.sort(fileNames);
  for (int i=0; i < fileNames.length - 50; i++) {
    DLServiceUtil.deleteDirectory(companyId,CompanyConstants.SYSTEM_STRING,CompanyConstants.SYSTEM,fileNames[i]);
  }
  DLServiceUtil.deleteDirectory(companyId,CompanyConstants.SYSTEM_STRING,CompanyConstants.SYSTEM,dirName);
}
