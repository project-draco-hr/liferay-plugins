{
  Junction junction=null;
  if (andOperator) {
    junction=RestrictionsFactoryUtil.conjunction();
  }
 else {
    junction=RestrictionsFactoryUtil.disjunction();
  }
  Map<String,String> terms=new HashMap<String,String>();
  if (Validator.isNotNull(title)) {
    terms.put("title",title);
  }
  if (Validator.isNotNull(content)) {
    terms.put("content",content);
  }
  for (  Map.Entry<String,String> entry : terms.entrySet()) {
    String key=entry.getKey();
    String value=entry.getValue();
    Disjunction disjunction=RestrictionsFactoryUtil.disjunction();
    for (    String s1 : KnowledgeBaseUtil.splitKeywords(value)) {
      String s2=StringPool.PERCENT + s1 + StringPool.PERCENT;
      disjunction.add(RestrictionsFactoryUtil.ilike(key,s2));
    }
    junction.add(disjunction);
  }
  if (status != WorkflowConstants.STATUS_ANY) {
    Property property=PropertyFactoryUtil.forName("status");
    junction.add(property.eq(status));
  }
  if ((endDate != null) && (startDate != null)) {
    Disjunction disjunction=RestrictionsFactoryUtil.disjunction();
    String[] propertyNames={"createDate","modifiedDate"};
    for (    String propertyName : propertyNames) {
      Property property=PropertyFactoryUtil.forName(propertyName);
      Conjunction conjunction=RestrictionsFactoryUtil.conjunction();
      conjunction.add(property.gt(startDate));
      conjunction.add(property.lt(endDate));
      disjunction.add(conjunction);
    }
    junction.add(disjunction);
  }
  DynamicQuery dynamicQuery=DynamicQueryFactoryUtil.forClass(Article.class,getClass().getClassLoader());
  Property latestProperty=PropertyFactoryUtil.forName("latest");
  dynamicQuery.add(latestProperty.eq(ArticleConstants.LATEST_VERSION));
  if (groupId > 0) {
    Property property=PropertyFactoryUtil.forName("groupId");
    dynamicQuery.add(property.eq(groupId));
  }
  return dynamicQuery.add(junction);
}
