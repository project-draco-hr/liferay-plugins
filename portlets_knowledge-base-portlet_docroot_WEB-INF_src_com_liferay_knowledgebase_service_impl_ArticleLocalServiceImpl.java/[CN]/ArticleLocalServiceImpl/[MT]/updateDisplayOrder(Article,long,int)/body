{
  List<Article> articles=ListUtil.copy(getGroupArticles(article.getGroupId(),article.getParentResourcePrimKey(),QueryUtil.ALL_POS,QueryUtil.ALL_POS,new ArticlePriorityComparator(true)));
  articles.remove(article);
  articles.add(priority,article);
  for (int i=0; i < articles.size(); i++) {
    Article curArticle=articles.get(i);
    long curParentResourcePrimKey=curArticle.getParentResourcePrimKey();
    if (priority == i) {
      curParentResourcePrimKey=parentResourcePrimKey;
    }
    List<Article> childrenArticles=articlePersistence.findByResourcePrimKey(curArticle.getResourcePrimKey());
    for (    Article childrenArticle : childrenArticles) {
      childrenArticle.setParentResourcePrimKey(curParentResourcePrimKey);
      childrenArticle.setPriority(i);
      articlePersistence.update(childrenArticle,false);
      if (article.getArticleId() == childrenArticle.getArticleId()) {
        article=childrenArticle;
      }
    }
  }
  return article;
}
