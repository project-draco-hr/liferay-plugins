{
  Article oldArticle=articlePersistence.findByResourcePrimKey_First(article.getResourcePrimKey(),new ArticleVersionComparator(true));
  if ((article.getVersion() != ArticleConstants.DEFAULT_VERSION) && (article.getPriority() == oldArticle.getPriority()) && (article.getParentResourcePrimKey() == oldArticle.getParentResourcePrimKey())) {
    return article;
  }
  List<Article> siblingArticles=getSiblingArticles(article.getGroupId(),article.getParentResourcePrimKey(),WorkflowConstants.STATUS_APPROVED,QueryUtil.ALL_POS,QueryUtil.ALL_POS,new ArticlePriorityComparator(true));
  siblingArticles=ListUtil.copy(siblingArticles);
  siblingArticles.remove(article);
  siblingArticles.add(priority,article);
  for (int i=0; i < siblingArticles.size(); i++) {
    Article siblingArticle=siblingArticles.get(i);
    long siblingParentResourcePrimKey=siblingArticle.getParentResourcePrimKey();
    if (priority == i) {
      siblingParentResourcePrimKey=parentResourcePrimKey;
    }
    List<Article> articles=articlePersistence.findByResourcePrimKey(siblingArticle.getResourcePrimKey());
    for (    Article curArticle : articles) {
      curArticle.setParentResourcePrimKey(siblingParentResourcePrimKey);
      curArticle.setPriority(i);
      articlePersistence.update(curArticle,false);
      if (article.getArticleId() == curArticle.getArticleId()) {
        article=curArticle;
      }
    }
  }
  return article;
}
