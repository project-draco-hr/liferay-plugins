{
  validate(priority);
  updatePermissionFields(resourcePrimKey,parentResourcePrimKey);
  List<Article> articles=getArticles(resourcePrimKey,WorkflowConstants.STATUS_ANY,QueryUtil.ALL_POS,QueryUtil.ALL_POS,new ArticleVersionComparator());
  for (  Article article : articles) {
    article.setParentResourcePrimKey(parentResourcePrimKey);
    article.setPriority(priority);
    articlePersistence.update(article,false);
  }
  Article article=getLatestArticle(resourcePrimKey,WorkflowConstants.STATUS_ANY);
  if (article.isApproved() || !article.isFirstVersion()) {
    socialActivityLocalService.addActivity(userId,article.getGroupId(),Article.class.getName(),resourcePrimKey,AdminActivityKeys.MOVE_ARTICLE,StringPool.BLANK,0);
  }
}
