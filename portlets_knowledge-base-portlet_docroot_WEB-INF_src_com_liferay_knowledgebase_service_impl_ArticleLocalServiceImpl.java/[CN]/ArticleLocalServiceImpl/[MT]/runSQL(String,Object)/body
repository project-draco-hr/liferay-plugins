{
  Connection connection=null;
  PreparedStatement preparedStatement=null;
  ResultSet resultSet=null;
  try {
    Object[] array=new Object[0];
    if (key.equals("groupId")) {
      DataSource dataSource=groupPersistence.getDataSource();
      connection=dataSource.getConnection();
      preparedStatement=connection.prepareStatement("select distinct(groupId) from Group_ where " + "((groupId = ?) and (classNameId != ?)) or " + "((parentGroupId = ?) and (classNameId = ?))");
      Long classNameId=PortalUtil.getClassNameId(Layout.class);
      Long groupId=(Long)value;
      preparedStatement.setLong(1,groupId);
      preparedStatement.setLong(2,classNameId);
      preparedStatement.setLong(3,groupId);
      preparedStatement.setLong(4,classNameId);
      resultSet=preparedStatement.executeQuery();
      List<Long> list=new ArrayList<Long>();
      while (resultSet.next()) {
        list.add((Long)resultSet.getObject(1));
      }
      array=list.toArray(new Long[list.size()]);
    }
    return array;
  }
 catch (  SQLException sqle) {
    throw new SystemException(sqle);
  }
 finally {
    DataAccess.cleanUp(connection,preparedStatement,resultSet);
  }
}
