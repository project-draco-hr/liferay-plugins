{
  List<KBArticle> kbArticles=KBArticleLocalServiceUtil.getKBArticleAndAllDescendantKBArticles(kbArticle.getResourcePrimKey(),WorkflowConstants.STATUS_APPROVED,null);
  Collection<Document> documents=new ArrayList<>();
  for (  KBArticle curKBArticle : kbArticles) {
    documents.add(getDocument(curKBArticle));
  }
  SearchEngineUtil.updateDocuments(getSearchEngineId(),kbArticle.getCompanyId(),documents,isCommitImmediately());
}
