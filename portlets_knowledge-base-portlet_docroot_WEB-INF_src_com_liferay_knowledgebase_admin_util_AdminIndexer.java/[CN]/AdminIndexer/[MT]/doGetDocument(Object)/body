{
  KBArticle kbArticle=(KBArticle)obj;
  long companyId=kbArticle.getCompanyId();
  long groupId=getParentGroupId(kbArticle.getGroupId());
  long scopeGroupId=kbArticle.getGroupId();
  long userId=kbArticle.getUserId();
  String userName=PortalUtil.getUserName(userId,kbArticle.getUserName());
  long resourcePrimKey=kbArticle.getResourcePrimKey();
  long rootResourcePrimKey=kbArticle.getRootResourcePrimKey();
  String title=kbArticle.getTitle();
  String content=HtmlUtil.extractText(kbArticle.getContent());
  String description=kbArticle.getDescription();
  Date createDate=kbArticle.getCreateDate();
  Date modifiedDate=kbArticle.getModifiedDate();
  long kbTemplateId=kbArticle.getKbTemplateId();
  long[] assetCategoryIds=AssetCategoryLocalServiceUtil.getCategoryIds(KBArticle.class.getName(),resourcePrimKey);
  String[] assetCategoryNames=AssetCategoryLocalServiceUtil.getCategoryNames(KBArticle.class.getName(),resourcePrimKey);
  String[] assetTagNames=AssetTagLocalServiceUtil.getTagNames(KBArticle.class.getName(),resourcePrimKey);
  Document document=new DocumentImpl();
  document.addUID(PORTLET_ID,resourcePrimKey);
  document.addDate("createDate",createDate);
  document.addDate(Field.MODIFIED,modifiedDate);
  document.addKeyword(Field.COMPANY_ID,companyId);
  document.addKeyword(Field.PORTLET_ID,PORTLET_ID);
  document.addKeyword(Field.GROUP_ID,groupId);
  document.addKeyword(Field.SCOPE_GROUP_ID,scopeGroupId);
  document.addKeyword(Field.USER_ID,userId);
  document.addText(Field.USER_NAME,userName);
  document.addText(Field.TITLE,title);
  document.addText(Field.CONTENT,content);
  document.addText(Field.DESCRIPTION,description);
  document.addKeyword(Field.ASSET_CATEGORY_IDS,assetCategoryIds);
  document.addKeyword(Field.ASSET_CATEGORY_NAMES,assetCategoryNames);
  document.addKeyword(Field.ASSET_TAG_NAMES,assetTagNames);
  document.addKeyword(Field.ENTRY_CLASS_NAME,KBArticle.class.getName());
  document.addKeyword(Field.ENTRY_CLASS_PK,resourcePrimKey);
  document.addKeyword(Field.ROOT_ENTRY_CLASS_PK,rootResourcePrimKey);
  document.addKeyword(Field.USER_NAME + "Keyword",userName,true);
  document.addKeyword(Field.TITLE + "Keyword",title,true);
  document.addKeyword("kbTemplateId",kbTemplateId);
  return document;
}
