{
  String selectionMethod=(String)params.get("selectionMethod");
  Long[] resourcePrimKeys=(Long[])params.get("resourcePrimKeys");
  Boolean assetEntryQueryAndOperator=(Boolean)params.get("assetEntryQueryAndOperator");
  String assetEntryQueryName=(String)params.get("assetEntryQueryName");
  Long[] assetCategoryIds=(Long[])params.get("assetCategoryIds");
  String[] assetTagNames=(String[])params.get("assetTagNames");
  if (selectionMethod.equals("articles")) {
    BooleanQuery booleanQuery=BooleanQueryFactoryUtil.create();
    for (    long resourcePrimKey : resourcePrimKeys) {
      String value=String.valueOf(resourcePrimKey);
      booleanQuery.addExactTerm(Field.ENTRY_CLASS_PK,value);
    }
    contextQuery.add(booleanQuery,BooleanClauseOccur.MUST);
  }
 else   if (selectionMethod.equals("filter")) {
    List<Tuple> tuples=new ArrayList<Tuple>();
    if (assetEntryQueryName.equals("asset-categories")) {
      for (      long assetCategoryId : assetCategoryIds) {
        String value=String.valueOf(assetCategoryId);
        tuples.add(new Tuple(Field.ASSET_CATEGORY_IDS,value));
      }
    }
 else     if (assetEntryQueryName.equals("asset-tags")) {
      for (      String assetTagName : assetTagNames) {
        tuples.add(new Tuple(Field.ASSET_TAG_NAMES,assetTagName));
      }
    }
    BooleanQuery booleanQuery=BooleanQueryFactoryUtil.create();
    for (    Tuple tuple : tuples) {
      String field=(String)tuple.getObject(0);
      String value=(String)tuple.getObject(1);
      if (assetEntryQueryAndOperator) {
        TermQuery termQuery=TermQueryFactoryUtil.create(field,value);
        booleanQuery.add(termQuery,BooleanClauseOccur.MUST);
      }
 else {
        booleanQuery.addExactTerm(field,value);
      }
    }
    contextQuery.add(booleanQuery,BooleanClauseOccur.MUST);
  }
}
