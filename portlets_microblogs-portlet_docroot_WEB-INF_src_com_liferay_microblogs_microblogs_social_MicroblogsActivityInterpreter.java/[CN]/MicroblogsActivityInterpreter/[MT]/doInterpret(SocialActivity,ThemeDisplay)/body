{
  PermissionChecker permissionChecker=themeDisplay.getPermissionChecker();
  MicroblogsEntry microblogsEntry=MicroblogsEntryLocalServiceUtil.getMicroblogsEntry(activity.getClassPK());
  if (!MicroblogsEntryPermission.contains(permissionChecker,microblogsEntry,ActionKeys.VIEW)) {
    return null;
  }
  String creatorUserName=getUserName(activity.getUserId(),themeDisplay);
  String receiverUserName=getUserName(activity.getReceiverUserId(),themeDisplay);
  String link=StringPool.BLANK;
  StringBundler sb=new StringBundler(5);
  if (activity.getReceiverUserId() > 0) {
    if (microblogsEntry.getType() == MicroblogsEntryConstants.TYPE_REPLY) {
      sb.append("@");
      sb.append(receiverUserName);
      sb.append(": ");
    }
 else     if (microblogsEntry.getType() == MicroblogsEntryConstants.TYPE_REPOST) {
      sb.append(themeDisplay.translate("reposted-from"));
      sb.append(" ");
      sb.append(receiverUserName);
      sb.append(": ");
    }
  }
  String entryContent=getValue(activity.getExtraData(),"content",microblogsEntry.getContent());
  sb.append(entryContent);
  String title=sb.toString();
  String body=creatorUserName;
  return new SocialActivityFeedEntry(link,title,body);
}
