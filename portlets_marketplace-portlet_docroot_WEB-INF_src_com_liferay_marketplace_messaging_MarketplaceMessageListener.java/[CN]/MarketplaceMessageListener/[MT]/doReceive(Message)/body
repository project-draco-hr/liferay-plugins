{
  String command=message.getString("command");
  if (!command.equals("deploy")) {
    return;
  }
  Properties properties=PropertiesUtil.load(message.getString("properties"));
  long remoteAppId=GetterUtil.getLong(properties.getProperty("remote-app-id"));
  String version=properties.getProperty("version");
  if ((remoteAppId <= 0) || Validator.isNull(version)) {
    return;
  }
  String title=properties.getProperty("title");
  String description=properties.getProperty("description");
  String category=properties.getProperty("category");
  String iconURL=properties.getProperty("icon-url");
  App app=AppLocalServiceUtil.updateApp(0,remoteAppId,title,description,category,iconURL,version,null);
  String[] bundleSymoblicNames=StringUtil.split(properties.getProperty("bundle-symbolic-names"));
  for (  String bundleSymoblicName : bundleSymoblicNames) {
    String contextName=StringPool.BLANK;
    if (bundleSymoblicName.contains(StringPool.POUND)) {
      String[] bundleSymoblicNameParts=StringUtil.split(bundleSymoblicName,StringPool.POUND);
      bundleSymoblicName=bundleSymoblicNameParts[0];
      contextName=bundleSymoblicNameParts[1];
    }
    ModuleLocalServiceUtil.addModule(0,app.getAppId(),bundleSymoblicName,contextName);
  }
  String[] contextNames=StringUtil.split(properties.getProperty("context-names"));
  for (  String contextName : contextNames) {
    ModuleLocalServiceUtil.addModule(0,app.getAppId(),StringPool.BLANK,contextName);
  }
  AppLocalServiceUtil.processMarketplaceProperties(properties);
}
