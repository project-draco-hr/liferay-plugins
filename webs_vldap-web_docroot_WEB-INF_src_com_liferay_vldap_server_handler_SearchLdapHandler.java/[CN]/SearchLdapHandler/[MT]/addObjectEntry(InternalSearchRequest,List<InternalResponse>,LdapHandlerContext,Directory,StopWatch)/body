{
  InternalSearchResponseEntry internalSearchResponseEntry=new SearchResponseEntryImpl(internalSearchRequest.getMessageId());
  if (directory.getAttribute("objectClass","groupOfNames") != null) {
    directory.getDirectories();
  }
  Entry entry=directory.toEntry(ldapHandlerContext.getSchemaManager(),internalSearchRequest.getAttributes());
  internalSearchResponseEntry.setEntry(entry);
  if (internalResponses.size() > getSizeLimit(internalSearchRequest)) {
    throw new SearchSizeLimitException();
  }
  if ((stopWatch.getTime() / Time.SECOND) > getTimeLimit(internalSearchRequest)) {
    throw new SearchTimeLimitException();
  }
  ExprNode exprNode=internalSearchRequest.getFilter();
  if (isMatch(exprNode,directory)) {
    internalResponses.add(internalSearchResponseEntry);
  }
}
