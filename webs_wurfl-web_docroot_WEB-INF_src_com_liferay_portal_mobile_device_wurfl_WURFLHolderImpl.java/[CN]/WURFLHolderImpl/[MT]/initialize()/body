{
  List<InputStream> inputStreams=new ArrayList<InputStream>();
  try {
    XMLResource xmlResource=getWURFLDatabase(inputStreams);
    WURFLResources wurflResources=getWURFLDatabasePatches(inputStreams);
    WURFLModel wurflModel=new DefaultWURFLModel(xmlResource,wurflResources);
    MatcherManager matcherManager=new MatcherManager(wurflModel);
    DeviceProvider deviceProvider=new DefaultDeviceProvider(wurflModel);
    WURFLService wurflService=new DefaultWURFLService(matcherManager,deviceProvider);
    WURFLManager wurflManager=new DefaultWURFLManager(wurflService);
    WURFLUtils wurflUtils=new WURFLUtils(wurflModel,deviceProvider);
    _wurflHolder=new DefaultWURFLHolder(wurflManager,wurflUtils);
  }
  finally {
    for (    InputStream inputStream : inputStreams) {
      try {
        inputStream.close();
      }
 catch (      IOException ioe) {
      }
    }
  }
  if (_log.isDebugEnabled()) {
    _log.debug("Initialised");
  }
}
