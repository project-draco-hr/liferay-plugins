{
  Class<?> clazz=getClass();
  InputStream inputStream=clazz.getResourceAsStream(PortletPropsValues.WURFL_DATABASE_PRIMARY);
  if (inputStream == null) {
    throw new IllegalStateException("Unable to find " + PortletPropsValues.WURFL_DATABASE_PRIMARY);
  }
  if (PortletPropsValues.WURFL_DATABASE_PRIMARY.endsWith(".gz")) {
    inputStream=new GZIPInputStream(inputStream);
  }
 else   if (PortletPropsValues.WURFL_DATABASE_PRIMARY.endsWith(".jar") || PortletPropsValues.WURFL_DATABASE_PRIMARY.endsWith(".zip")) {
    ZipInputStream zipInputStream=new ZipInputStream(inputStream);
    inputStream=zipInputStream;
    zipInputStream.getNextEntry();
  }
  XMLResource xmlResource=new XMLResource(inputStream);
  inputStreams.add(inputStream);
  return xmlResource;
}
