{
  if (processInstances == null) {
    processInstances=new ArrayList<ProcessInstance>();
  }
  processInstances.add(processInstance);
  List<ProcessInstance> childrenProcessInstances=processInstance.getChildren();
  for (  ProcessInstance childProcessInstance : childrenProcessInstances) {
    getFlatProcessInstances(childProcessInstance,processInstances);
  }
  return processInstances;
}
