{
  if (processInstances == null) {
    processInstances=new ArrayList<ProcessInstance>();
  }
  processInstances.add(processInstance);
  List<ProcessInstance> children=processInstance.getChildren();
  for (  ProcessInstance child : children) {
    getFlatProcessInstanceList(child,processInstances);
  }
  return processInstances;
}
