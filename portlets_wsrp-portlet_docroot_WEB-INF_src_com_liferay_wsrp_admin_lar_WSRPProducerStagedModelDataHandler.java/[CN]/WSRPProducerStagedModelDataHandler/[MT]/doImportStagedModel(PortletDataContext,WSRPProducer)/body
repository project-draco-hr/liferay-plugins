{
  ServiceContext serviceContext=portletDataContext.createServiceContext(producer);
  WSRPProducer importedProducer=null;
  if (portletDataContext.isDataStrategyMirror()) {
    WSRPProducer existingProducer=WSRPProducerLocalServiceUtil.fetchWSRPProducerByUuidAndCompanyId(producer.getUuid(),portletDataContext.getCompanyId());
    if (existingProducer == null) {
      serviceContext.setUuid(producer.getUuid());
      importedProducer=WSRPProducerLocalServiceUtil.addWSRPProducer(portletDataContext.getUserId(null),producer.getName(),producer.getVersion(),producer.getPortletIds(),serviceContext);
    }
 else {
      existingProducer.setName(producer.getName());
      existingProducer.setVersion(producer.getVersion());
      existingProducer.setPortletIds(producer.getPortletIds());
      WSRPProducerLocalServiceUtil.updateWSRPProducer(existingProducer);
      importedProducer=WSRPProducerLocalServiceUtil.updateWSRPProducer(existingProducer);
    }
  }
 else {
    importedProducer=WSRPProducerLocalServiceUtil.addWSRPProducer(portletDataContext.getUserId(null),producer.getName(),producer.getVersion(),producer.getPortletIds(),serviceContext);
  }
  portletDataContext.importClassedModel(producer,importedProducer);
}
