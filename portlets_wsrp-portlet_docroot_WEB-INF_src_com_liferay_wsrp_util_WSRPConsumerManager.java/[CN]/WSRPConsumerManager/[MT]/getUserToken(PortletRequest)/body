{
  ThemeDisplay themeDisplay=(ThemeDisplay)portletRequest.getAttribute(WebKeys.THEME_DISPLAY);
  User user=themeDisplay.getUser();
  if (user == null) {
    return null;
  }
  Company company=themeDisplay.getCompany();
  String authType=company.getAuthType();
  if (authType.equals(CompanyConstants.AUTH_TYPE_EA)) {
    return user.getEmailAddress();
  }
 else   if (authType.equals(CompanyConstants.AUTH_TYPE_SN)) {
    return user.getScreenName();
  }
 else   if (authType.equals(CompanyConstants.AUTH_TYPE_ID)) {
    return String.valueOf(user.getUserId());
  }
 else {
    return user.getScreenName();
  }
}
