{
  WorkflowInstance workflowInstance=WorkflowInstanceManagerUtil.startWorkflowInstance(companyId,defaultUserId,_workflowDefinition4.getName(),_workflowDefinition4.getVersion(),null,null);
  assertEquals("Switch",workflowInstance.getState());
  workflowInstance=WorkflowInstanceManagerUtil.signalWorkflowInstance(companyId,defaultUserId,workflowInstance.getWorkflowInstanceId(),"toState1",null);
  assertEquals("State1",workflowInstance.getState());
  WorkflowInstanceManagerUtil.deleteWorkflowInstance(companyId,workflowInstance.getWorkflowInstanceId());
  workflowInstance=WorkflowInstanceManagerUtil.startWorkflowInstance(companyId,defaultUserId,_workflowDefinition4.getName(),_workflowDefinition4.getVersion(),null,null);
  assertEquals("Switch",workflowInstance.getState());
  workflowInstance=WorkflowInstanceManagerUtil.signalWorkflowInstance(companyId,defaultUserId,workflowInstance.getWorkflowInstanceId(),"toState2",null);
  assertEquals("State2",workflowInstance.getState());
  WorkflowInstanceManagerUtil.deleteWorkflowInstance(companyId,workflowInstance.getWorkflowInstanceId());
  workflowInstance=WorkflowInstanceManagerUtil.startWorkflowInstance(companyId,defaultUserId,_workflowDefinition4.getName(),_workflowDefinition4.getVersion(),null,null);
  assertEquals("Switch",workflowInstance.getState());
  workflowInstance=WorkflowInstanceManagerUtil.signalWorkflowInstance(companyId,defaultUserId,workflowInstance.getWorkflowInstanceId(),"toState3",null);
  assertEquals("State3",workflowInstance.getState());
  WorkflowInstanceManagerUtil.deleteWorkflowInstance(companyId,workflowInstance.getWorkflowInstanceId());
}
