{
  WorkflowInstance workflowInstance=WorkflowInstanceManagerUtil.startWorkflowInstance(user.getUserId(),_workflowDefinition4.getName(),_workflowDefinition4.getVersion(),null,null);
  assertEquals("Switch",workflowInstance.getCurrentNodeName());
  workflowInstance=WorkflowInstanceManagerUtil.signalWorkflowInstance(user.getUserId(),workflowInstance.getWorkflowInstanceId(),"toState1",null);
  assertEquals("State1",workflowInstance.getCurrentNodeName());
  WorkflowInstanceManagerUtil.deleteWorkflowInstance(workflowInstance.getWorkflowInstanceId());
  workflowInstance=WorkflowInstanceManagerUtil.startWorkflowInstance(user.getUserId(),_workflowDefinition4.getName(),_workflowDefinition4.getVersion(),null,null);
  assertEquals("Switch",workflowInstance.getCurrentNodeName());
  workflowInstance=WorkflowInstanceManagerUtil.signalWorkflowInstance(user.getUserId(),workflowInstance.getWorkflowInstanceId(),"toState2",null);
  assertEquals("State2",workflowInstance.getCurrentNodeName());
  WorkflowInstanceManagerUtil.deleteWorkflowInstance(workflowInstance.getWorkflowInstanceId());
  workflowInstance=WorkflowInstanceManagerUtil.startWorkflowInstance(user.getUserId(),_workflowDefinition4.getName(),_workflowDefinition4.getVersion(),null,null);
  assertEquals("Switch",workflowInstance.getCurrentNodeName());
  workflowInstance=WorkflowInstanceManagerUtil.signalWorkflowInstance(user.getUserId(),workflowInstance.getWorkflowInstanceId(),"toState3",null);
  assertEquals("State3",workflowInstance.getCurrentNodeName());
  WorkflowInstanceManagerUtil.deleteWorkflowInstance(workflowInstance.getWorkflowInstanceId());
}
