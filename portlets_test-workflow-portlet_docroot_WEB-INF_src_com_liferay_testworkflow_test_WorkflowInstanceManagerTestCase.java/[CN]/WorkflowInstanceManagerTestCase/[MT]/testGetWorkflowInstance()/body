{
  WorkflowInstance workflowInstance1=WorkflowInstanceManagerUtil.startWorkflowInstance(companyId,defaultUserId,_workflowDefinition1.getName(),_workflowDefinition1.getVersion(),null,null);
  WorkflowInstance workflowInstance2=WorkflowInstanceManagerUtil.startWorkflowInstance(companyId,defaultUserId,_workflowDefinition2.getName(),_workflowDefinition2.getVersion(),null,null);
  WorkflowInstance workflowInstance3=WorkflowInstanceManagerUtil.startWorkflowInstance(companyId,defaultUserId,_workflowDefinition3.getName(),_workflowDefinition3.getVersion(),null,null);
  long workflowInstanceId1=workflowInstance1.getWorkflowInstanceId();
  workflowInstance1=WorkflowInstanceManagerUtil.getWorkflowInstance(companyId,workflowInstance1.getWorkflowInstanceId());
  assertEquals(0,workflowInstance1.getChildrenWorkflowInstanceCount());
  Map<String,Serializable> workflowContext1=workflowInstance1.getWorkflowContext();
  assertNotNull(workflowContext1);
  assertEquals(1,workflowContext1.size());
  assertEquals("success",workflowContext1.get("javaNode11"));
  assertEquals("State1-1",workflowInstance1.getState());
  assertNull(workflowInstance1.getEndDate());
  assertNull(workflowInstance1.getParentWorkflowInstance());
  assertNotNull(workflowInstance1.getStartDate());
  assertEquals(DEFINITION_NAME_1,workflowInstance1.getWorkflowDefinitionName());
  assertEquals(_workflowDefinition1.getVersion(),workflowInstance1.getWorkflowDefinitionVersion());
  assertEquals(workflowInstanceId1,workflowInstance1.getWorkflowInstanceId());
  long workflowInstanceId2=workflowInstance2.getWorkflowInstanceId();
  workflowInstance2=WorkflowInstanceManagerUtil.getWorkflowInstance(companyId,workflowInstance2.getWorkflowInstanceId());
  assertEquals(0,workflowInstance2.getChildrenWorkflowInstanceCount());
  Map<String,Serializable> workflowContext2=workflowInstance2.getWorkflowContext();
  assertNotNull(workflowContext2);
  assertEquals(1,workflowContext2.size());
  assertEquals("success",workflowContext2.get("javaNode21"));
  assertEquals("taskNode3",workflowInstance2.getState());
  assertNull(workflowInstance2.getEndDate());
  assertNull(workflowInstance2.getParentWorkflowInstance());
  assertNotNull(workflowInstance2.getStartDate());
  assertEquals(DEFINITION_NAME_2,workflowInstance2.getWorkflowDefinitionName());
  assertEquals(_workflowDefinition2.getVersion(),workflowInstance2.getWorkflowDefinitionVersion());
  assertEquals(workflowInstanceId2,workflowInstance2.getWorkflowInstanceId());
  long workflowInstanceId3=workflowInstance3.getWorkflowInstanceId();
  workflowInstance3=WorkflowInstanceManagerUtil.getWorkflowInstance(companyId,workflowInstance3.getWorkflowInstanceId());
  List<WorkflowInstance> childrenInstances=workflowInstance3.getChildrenWorkflowInstances();
  assertEquals(3,childrenInstances.size());
  WorkflowInstance childWorkflowInstance3_1=childrenInstances.get(0);
  assertEquals(0,childWorkflowInstance3_1.getChildrenWorkflowInstanceCount());
  Map<String,Serializable> workflowContext3_1=childWorkflowInstance3_1.getWorkflowContext();
  assertNotNull(workflowContext3_1);
  assertEquals(1,workflowContext3_1.size());
  assertEquals("success",workflowContext3_1.get("javaNode31"));
  assertEquals("taskNode1",childWorkflowInstance3_1.getState());
  assertNull(childWorkflowInstance3_1.getEndDate());
  assertEquals(workflowInstanceId3,childWorkflowInstance3_1.getParentWorkflowInstanceId());
  assertNotNull(childWorkflowInstance3_1.getStartDate());
  assertEquals(DEFINITION_NAME_3,childWorkflowInstance3_1.getWorkflowDefinitionName());
  assertEquals(_workflowDefinition3.getVersion(),childWorkflowInstance3_1.getWorkflowDefinitionVersion());
  WorkflowInstance childWorkflowInstance3_2=childrenInstances.get(1);
  assertEquals(0,childWorkflowInstance3_2.getChildrenWorkflowInstanceCount());
  Map<String,Serializable> workflowContext3_2=childWorkflowInstance3_2.getWorkflowContext();
  assertNotNull(workflowContext3_2);
  assertEquals(1,workflowContext3_2.size());
  assertEquals("success",workflowContext3_2.get("javaNode31"));
  assertEquals("taskNode2",childWorkflowInstance3_2.getState());
  assertNull(childWorkflowInstance3_2.getEndDate());
  assertEquals(workflowInstanceId3,childWorkflowInstance3_2.getParentWorkflowInstanceId());
  assertNotNull(childWorkflowInstance3_2.getStartDate());
  assertEquals(DEFINITION_NAME_3,childWorkflowInstance3_2.getWorkflowDefinitionName());
  assertEquals(_workflowDefinition3.getVersion(),childWorkflowInstance3_2.getWorkflowDefinitionVersion());
  WorkflowInstance childWorkflowInstance3_3=childrenInstances.get(2);
  assertEquals(0,childWorkflowInstance3_3.getChildrenWorkflowInstanceCount());
  Map<String,Serializable> workflowContext3_3=childWorkflowInstance3_3.getWorkflowContext();
  assertNotNull(workflowContext3_3);
  assertEquals(1,workflowContext3_3.size());
  assertEquals("success",workflowContext3_3.get("javaNode31"));
  assertEquals("taskNode3",childWorkflowInstance3_3.getState());
  assertNull(childWorkflowInstance3_3.getEndDate());
  assertEquals(workflowInstanceId3,childWorkflowInstance3_3.getParentWorkflowInstanceId());
  assertNotNull(childWorkflowInstance3_3.getStartDate());
  assertEquals(DEFINITION_NAME_3,childWorkflowInstance3_3.getWorkflowDefinitionName());
  assertEquals(_workflowDefinition3.getVersion(),childWorkflowInstance3_3.getWorkflowDefinitionVersion());
  Map<String,Serializable> workflowContext3=workflowInstance3.getWorkflowContext();
  assertNotNull(workflowContext3);
  assertEquals(1,workflowContext3.size());
  assertEquals("success",workflowContext3.get("javaNode31"));
  assertEquals("forkNode",workflowInstance3.getState());
  assertNull(workflowInstance3.getEndDate());
  assertNull(workflowInstance3.getParentWorkflowInstance());
  assertNotNull(workflowInstance3.getStartDate());
  assertEquals(DEFINITION_NAME_3,workflowInstance3.getWorkflowDefinitionName());
  assertEquals(_workflowDefinition3.getVersion(),workflowInstance3.getWorkflowDefinitionVersion());
  assertEquals(workflowInstanceId3,workflowInstance3.getWorkflowInstanceId());
  WorkflowInstanceManagerUtil.deleteWorkflowInstance(companyId,workflowInstance1.getWorkflowInstanceId());
  WorkflowInstanceManagerUtil.deleteWorkflowInstance(companyId,workflowInstance2.getWorkflowInstanceId());
  WorkflowInstanceManagerUtil.deleteWorkflowInstance(companyId,workflowInstance3.getWorkflowInstanceId());
}
