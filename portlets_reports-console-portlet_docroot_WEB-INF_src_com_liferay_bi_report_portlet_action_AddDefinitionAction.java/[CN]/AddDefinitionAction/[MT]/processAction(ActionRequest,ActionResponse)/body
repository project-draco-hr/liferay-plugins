{
  String name=ParamUtil.getString(actionRequest,"name");
  String description=ParamUtil.getString(actionRequest,"description");
  String datasourceName=ParamUtil.getString(actionRequest,"dataSourceName");
  String format=ParamUtil.getString(actionRequest,"format");
  ReportDefinition definition=new ReportDefinitionImpl();
  definition.setName(name);
  definition.setDescription(description);
  definition.setDataSourceName(datasourceName);
  definition.setReportFormat(format);
  ThemeDisplay themeDisplay=(ThemeDisplay)actionRequest.getAttribute(WebKeys.THEME_DISPLAY);
  definition.setCompanyId(themeDisplay.getCompanyId());
  definition.setGroupId(themeDisplay.getScopeGroupId());
  definition.setUserId(themeDisplay.getUserId());
  try {
    definition=ReportDefinitionLocalServiceUtil.addReportDefinition(definition);
    actionRequest.setAttribute("currentDefinition",definition);
    return true;
  }
 catch (  SystemException e) {
    throw new PortletException("Unable to create new definition: " + name,e);
  }
}
