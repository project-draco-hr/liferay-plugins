{
  try {
    validateImageFileExtension(name);
  }
 catch (  KBArticleImportException kbaie) {
    if (_log.isWarnEnabled()) {
      _log.warn("Unsupported image file suffix used in ZIP file: " + name);
    }
  }
  try {
    return addImageAttachment(userId,kbArticle,name,zipReader.getEntryAsInputStream(PortletPropsValues.MARKDOWN_IMPORTER_IMAGE_FOLDER + name),fileEntriesMap);
  }
 catch (  Exception e) {
    StringBuilder sb=new StringBuilder(4);
    sb.append("Unable to import image file: ");
    sb.append(name);
    sb.append(". ");
    sb.append(e.getLocalizedMessage());
    throw new KBArticleImportException(sb.toString());
  }
}
