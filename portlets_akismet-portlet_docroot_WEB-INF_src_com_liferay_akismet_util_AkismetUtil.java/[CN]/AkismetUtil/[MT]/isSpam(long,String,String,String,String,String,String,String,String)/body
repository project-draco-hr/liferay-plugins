{
  StringBundler sb=new StringBundler(5);
  sb.append(Http.HTTP_WITH_SLASH);
  sb.append(PrefsPortletPropsUtil.getString(companyId,PortletPropsKeys.AKISMET_API_KEY));
  sb.append(StringPool.PERIOD);
  sb.append(AkismetConstants.REST_URL);
  sb.append(AkismetConstants.CHECK_SPAM_PATH);
  String location=sb.toString();
  Map<String,String> parts=new HashMap<String,String>();
  parts.put("blog",_getPortalURL(companyId));
  parts.put("comment_author",userName);
  parts.put("comment_author_email",emailAddress);
  parts.put("comment_content",content);
  parts.put("comment_type",commentType);
  parts.put("permalink",permalink);
  parts.put("referrer",referrer);
  parts.put("user_agent",userAgent);
  parts.put("user_ip",ipAddress);
  String response=_sendRequest(location,parts);
  if (Validator.isNull(response) || response.equals("invalid")) {
    _log.error("There was an issue with Akismet comment validation");
    return true;
  }
 else   if (response.equals("true")) {
    return true;
  }
  return false;
}
