{
  ThemeDisplay themeDisplay=(ThemeDisplay)resourceRequest.getAttribute(WebKeys.THEME_DISPLAY);
  long[] calendarIds=ParamUtil.getLongValues(resourceRequest,"calendarIds");
  long endTime=ParamUtil.getLong(resourceRequest,"endTime");
  long startTime=ParamUtil.getLong(resourceRequest,"startTime");
  int[] statuses=ParamUtil.getIntegerValues(resourceRequest,"statuses");
  List<CalendarBooking> calendarBookings=CalendarBookingServiceUtil.search(themeDisplay.getCompanyId(),new long[0],calendarIds,new long[0],-1,null,startTime,endTime,true,statuses,QueryUtil.ALL_POS,QueryUtil.ALL_POS,null);
  JSONArray jsonArray=CalendarUtil.toCalendarBookingsJSONArray(themeDisplay,calendarBookings,getTimeZone(resourceRequest));
  writeJSON(resourceRequest,resourceResponse,jsonArray);
}
