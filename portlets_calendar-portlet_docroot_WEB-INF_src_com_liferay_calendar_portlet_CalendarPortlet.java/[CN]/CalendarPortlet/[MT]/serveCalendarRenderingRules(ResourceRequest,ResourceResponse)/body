{
  ThemeDisplay themeDisplay=(ThemeDisplay)resourceRequest.getAttribute(WebKeys.THEME_DISPLAY);
  long[] calendarIds=ParamUtil.getLongValues(resourceRequest,"calendarIds");
  int[] statuses={CalendarBookingWorkflowConstants.STATUS_APPROVED,CalendarBookingWorkflowConstants.STATUS_MAYBE,CalendarBookingWorkflowConstants.STATUS_PENDING};
  long startDate=ParamUtil.getLong(resourceRequest,"startDate");
  long endDate=ParamUtil.getLong(resourceRequest,"endDate");
  String ruleName=ParamUtil.getString(resourceRequest,"ruleName");
  if (calendarIds.length > 0) {
    JSONObject jsonObject=CalendarUtil.getCalendarRenderingRules(themeDisplay,calendarIds,statuses,startDate,endDate,ruleName);
    writeJSON(resourceRequest,resourceResponse,jsonObject);
  }
}
