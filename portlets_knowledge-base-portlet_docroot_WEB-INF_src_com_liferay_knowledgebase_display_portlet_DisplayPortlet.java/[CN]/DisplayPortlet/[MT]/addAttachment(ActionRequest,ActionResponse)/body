{
  UploadPortletRequest uploadRequest=PortalUtil.getUploadPortletRequest(actionRequest);
  ThemeDisplay themeDisplay=(ThemeDisplay)actionRequest.getAttribute(WebKeys.THEME_DISPLAY);
  long resourcePrimKey=ParamUtil.getLong(uploadRequest,"resourcePrimKey");
  String dirName=ParamUtil.getString(uploadRequest,"dirName");
  File file=uploadRequest.getFile("file");
  String fileName=uploadRequest.getFileName("file");
  ServiceContext serviceContext=ServiceContextFactory.getInstance(Article.class.getName(),actionRequest);
  ArticleServiceUtil.addAttachment(resourcePrimKey,dirName,fileName,FileUtil.getBytes(file),serviceContext);
}
