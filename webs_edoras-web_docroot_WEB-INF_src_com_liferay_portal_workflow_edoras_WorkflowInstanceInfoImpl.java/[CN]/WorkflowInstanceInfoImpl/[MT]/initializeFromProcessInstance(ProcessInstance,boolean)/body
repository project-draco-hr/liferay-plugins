{
  if (includeChildren) {
    List<ProcessInstance> childProcessInstances=processInstance.getChildren();
    _children=new ArrayList<WorkflowInstanceInfo>(childProcessInstances.size());
    for (    ProcessInstance childProcessInstance : childProcessInstances) {
      _children.add(new WorkflowInstanceInfoImpl(childProcessInstance,true));
    }
  }
  _context=new HashMap<String,Object>();
  processInstance.getAttributeMap().copyTo(_context);
  _currentNodeName=processInstance.getCurrentElement();
  _endDate=processInstance.getFinishedAt();
  ProcessInstance parentProcessInstance=processInstance.getParent();
  if (parentProcessInstance != null) {
    _parent=new WorkflowInstanceInfoImpl(parentProcessInstance,false);
  }
  _relationId=processInstance.getRelationId();
  _relationType=processInstance.getRelationType();
  _startDate=processInstance.getCreatedAt();
  _workflowDefinitionName=processInstance.getProcessModelId();
  _workflowDefinitionVersion=processInstance.getProcessModelVersion();
  _workflowInstanceId=processInstance.getPrimaryKey();
}
