{
  Object response=MessageBusUtil.sendSynchronousMessage(DestinationNames.IP_GEOCODER,ipAddress);
  if (!(response instanceof JSONObject)) {
    return null;
  }
  JSONObject ipInfoJSON=(JSONObject)response;
  if (ipInfoJSON == null) {
    return null;
  }
  float latitude=GetterUtil.getFloat(ipInfoJSON.getString("latitude"));
  float longitude=GetterUtil.getFloat(ipInfoJSON.getString("longitude"));
  String countryName=GetterUtil.getString(ipInfoJSON.getString("countryName"));
  String countryCode=GetterUtil.getString(ipInfoJSON.getString("countryCode"));
  String region=GetterUtil.getString(ipInfoJSON.getString("region"));
  String city=GetterUtil.getString(ipInfoJSON.getString("city"));
  String postalCode=GetterUtil.getString(ipInfoJSON.getString("postalCode"));
  return new IPInfo(ipAddress,latitude,longitude,countryName,countryCode,region,city,postalCode);
}
