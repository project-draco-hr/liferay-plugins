{
  Layout layout=LayoutLocalServiceUtil.getLayout(plid);
  long selPlid=PortalUtil.getPlidFromPortletId(layout.getGroupId(),PortletKeys.KNOWLEDGE_BASE_DISPLAY);
  String portletId=PortletKeys.KNOWLEDGE_BASE_ARTICLE_DEFAULT_INSTANCE;
  if (selPlid != LayoutConstants.DEFAULT_PARENT_LAYOUT_ID) {
    portletId=PortletKeys.KNOWLEDGE_BASE_DISPLAY;
  }
  PortletURL portletURL=getKBArticleURL(plid,portletId,request);
  if (status != WorkflowConstants.STATUS_APPROVED) {
    portletURL.setParameter("status",String.valueOf(status));
  }
  if (_PORTLET_ADD_DEFAULT_RESOURCE_CHECK_ENABLED) {
    String token=AuthTokenUtil.getToken(request,plid,portletId);
    portletURL.setParameter("p_p_auth",token);
  }
  portletURL.setPortletMode(PortletMode.VIEW);
  if (selPlid == LayoutConstants.DEFAULT_PARENT_LAYOUT_ID) {
    portletURL.setWindowState(LiferayWindowState.MAXIMIZED);
  }
  return portletURL;
}
