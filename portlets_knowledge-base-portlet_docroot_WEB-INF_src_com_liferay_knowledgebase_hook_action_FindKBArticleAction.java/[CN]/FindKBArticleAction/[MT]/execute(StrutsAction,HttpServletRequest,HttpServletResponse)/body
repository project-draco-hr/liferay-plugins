{
  ThemeDisplay themeDisplay=(ThemeDisplay)request.getAttribute(WebKeys.THEME_DISPLAY);
  long plid=ParamUtil.getLong(request,"plid");
  long resourcePrimKey=ParamUtil.getLong(request,"resourcePrimKey");
  boolean maximized=ParamUtil.getBoolean(request,"maximized");
  if (!isValidPlid(plid)) {
    plid=themeDisplay.getPlid();
  }
  PortletURL portletURL=null;
  KBArticle kbArticle=getKBArticle(resourcePrimKey);
  if (kbArticle == null) {
    portletURL=getDynamicPortletURL(plid,request);
  }
  if (portletURL == null) {
    portletURL=getKBArticleURL(plid,false,kbArticle,request);
  }
  if (portletURL == null) {
    portletURL=getKBArticleURL(plid,true,kbArticle,request);
  }
  if (portletURL == null) {
    portletURL=getDynamicPortletURL(plid,request);
  }
  if (maximized) {
    portletURL.setWindowState(LiferayWindowState.MAXIMIZED);
  }
  response.sendRedirect(portletURL.toString());
  return null;
}
