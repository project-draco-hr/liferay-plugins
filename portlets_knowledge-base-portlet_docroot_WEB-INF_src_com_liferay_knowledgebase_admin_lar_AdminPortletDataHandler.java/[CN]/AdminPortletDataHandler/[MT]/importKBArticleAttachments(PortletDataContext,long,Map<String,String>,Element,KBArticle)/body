{
  Element kbArticleAttachmentsElement=kbArticleElement.element("kb-article-attachments");
  String resourcePrimKey=kbArticleAttachmentsElement.attributeValue("resource-prim-key");
  String dirName="knowledgebase/temp/import/" + importId + StringPool.SLASH+ resourcePrimKey;
  List<Element> fileElements=kbArticleAttachmentsElement.elements("file");
  ServiceContext serviceContext=new ServiceContext();
  serviceContext.setCompanyId(portletDataContext.getCompanyId());
  serviceContext.setScopeGroupId(portletDataContext.getScopeGroupId());
  for (  Element fileElement : fileElements) {
    InputStream inputStream=portletDataContext.getZipEntryAsInputStream(fileElement.attributeValue("path"));
    String fileName=fileElement.attributeValue("file-name");
    String mimeType=MimeTypesUtil.getContentType(inputStream,fileName);
    PortletFileRepositoryUtil.addPortletFileEntry(portletDataContext.getScopeGroupId(),portletDataContext.getUserId(kbArticle.getUserUuid()),KBArticle.class.getName(),kbArticle.getClassPK(),PortletKeys.KNOWLEDGE_BASE_ADMIN,kbArticle.getAttachmentsFolderId(),inputStream,fileName,mimeType,true);
  }
  dirNames.put(resourcePrimKey,dirName);
}
