{
  _stopped=true;
  while (true) {
    int connectionsInPool=_multiThreadedHttpConnectionManager.getConnectionsInPool();
    if (connectionsInPool <= 0) {
      break;
    }
    if (_log.isDebugEnabled()) {
      _log.debug(toString() + " waiting on " + connectionsInPool+ " connections");
    }
    _multiThreadedHttpConnectionManager.closeIdleConnections(200);
    try {
      Thread.sleep(200);
    }
 catch (    InterruptedException ie) {
    }
  }
  _multiThreadedHttpConnectionManager.shutdown();
  if (_log.isDebugEnabled()) {
    _log.debug(toString() + " is shutdown");
  }
}
