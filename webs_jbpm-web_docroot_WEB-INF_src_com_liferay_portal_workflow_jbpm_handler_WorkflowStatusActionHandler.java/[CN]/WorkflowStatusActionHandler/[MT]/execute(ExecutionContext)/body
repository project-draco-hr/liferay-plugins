{
  ContextInstance contextInstance=executionContext.getContextInstance();
  Map<String,Serializable> workflowContext=WorkflowContextUtil.convert(contextInstance.getVariables());
  long companyId=GetterUtil.getLong((String)workflowContext.get(WorkflowConstants.CONTEXT_COMPANY_ID));
  if (userId == 0) {
    TaskInstance taskInstance=executionContext.getTaskInstance();
    if (taskInstance != null) {
      userId=getUserId(companyId,taskInstance.getActorId());
    }
  }
  workflowContext.put(WorkflowConstants.CONTEXT_USER_ID,String.valueOf(userId));
  WorkflowStatusManagerUtil.updateStatus(WorkflowConstants.toStatus(status),workflowContext);
}
