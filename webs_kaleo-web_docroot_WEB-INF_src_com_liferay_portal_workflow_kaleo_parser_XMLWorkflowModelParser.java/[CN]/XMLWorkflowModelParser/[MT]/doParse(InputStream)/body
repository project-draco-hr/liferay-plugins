{
  Document document=SAXReaderUtil.read(inputStream,_validate);
  Element rootElement=document.getRootElement();
  String name=rootElement.elementText("name");
  String description=rootElement.elementText("description");
  int version=GetterUtil.getInteger(rootElement.elementText("version"));
  Definition definition=new Definition(name,description,version);
  List<Element> forkElements=rootElement.elements("fork");
  for (  Element forkElement : forkElements) {
    Fork fork=parseFork(forkElement);
    definition.addNode(fork);
  }
  List<Element> joinElements=rootElement.elements("join");
  for (  Element joinElement : joinElements) {
    Join join=parseJoin(joinElement);
    definition.addNode(join);
  }
  List<Element> stateElements=rootElement.elements("state");
  for (  Element stateElement : stateElements) {
    State state=parseState(stateElement);
    definition.addNode(state);
  }
  List<Element> taskElements=rootElement.elements("task");
  for (  Element taskElement : taskElements) {
    Task task=parseTask(taskElement);
    definition.addNode(task);
  }
  processTransitions(definition,forkElements,joinElements,stateElements,taskElements);
  return definition;
}
