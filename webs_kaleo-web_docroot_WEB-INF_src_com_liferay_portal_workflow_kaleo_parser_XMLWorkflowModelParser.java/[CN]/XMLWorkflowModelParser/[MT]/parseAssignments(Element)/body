{
  if (assignmentsElement == null) {
    return Collections.EMPTY_SET;
  }
  Set<Assignment> assignments=new HashSet<Assignment>();
  Element rolesElement=assignmentsElement.element("roles");
  if (rolesElement != null) {
    List<Element> roleAssignmentElements=rolesElement.elements("role");
    for (    Element roleAssignmentElement : roleAssignmentElements) {
      long roleId=GetterUtil.getLong(roleAssignmentElement.elementText("role-id"));
      String roleType=roleAssignmentElement.elementText("role-type");
      String name=roleAssignmentElement.elementText("name");
      RoleAssignment roleAssignment=null;
      if (Validator.isNotNull(name)) {
        roleAssignment=new RoleAssignment(name,roleType);
        boolean autoCreate=GetterUtil.getBoolean(roleAssignmentElement.elementText("auto-create"),true);
        roleAssignment.setAutoCreate(autoCreate);
      }
 else {
        roleAssignment=new RoleAssignment(roleId,roleType);
      }
      assignments.add(roleAssignment);
    }
  }
  List<Element> userAssignmentElements=assignmentsElement.elements("user");
  for (  Element userAssignmentElement : userAssignmentElements) {
    long userId=GetterUtil.getLong(userAssignmentElement.elementText("user-id"));
    String screenName=userAssignmentElement.elementText("screen-name");
    String emailAddress=userAssignmentElement.elementText("email-address");
    UserAssignment userAssignment=new UserAssignment(userId,screenName,emailAddress);
    assignments.add(userAssignment);
  }
  return assignments;
}
