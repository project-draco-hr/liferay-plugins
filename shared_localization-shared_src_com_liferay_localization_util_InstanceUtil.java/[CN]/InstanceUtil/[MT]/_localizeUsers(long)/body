{
  Company company=CompanyLocalServiceUtil.getCompany(companyId);
  ExpandoBridge expandoBridge=company.getExpandoBridge();
  String attributeName="localizationUpdated_" + PortletPropsValues.COMPANY_DEFAULT_LOCALE;
  boolean localizationUpdated=GetterUtil.getBoolean(expandoBridge.getAttribute(attributeName,false));
  if (localizationUpdated) {
    return;
  }
  try {
    expandoBridge.addAttribute(attributeName,ExpandoColumnConstants.BOOLEAN,Boolean.FALSE,false);
  }
 catch (  DuplicateColumnNameException dcne) {
  }
  expandoBridge.setAttribute(attributeName,Boolean.TRUE,false);
  CompanyLocalServiceUtil.updateCompany(company);
  ActionableDynamicQuery actionableDynamicQuery=new UserActionableDynamicQuery(){
    @Override protected void addCriteria(    DynamicQuery dynamicQuery){
      Property property=PropertyFactoryUtil.forName("createDate");
      dynamicQuery.add(property.eqProperty("modifiedDate"));
    }
    @Override protected void performAction(    Object object) throws PortalException, SystemException {
      User user=(User)object;
      user.setModifiedDate(new Date());
      user.setLanguageId(PortletPropsValues.COMPANY_DEFAULT_LOCALE);
      user.setTimeZoneId(PortletPropsValues.COMPANY_DEFAULT_TIME_ZONE);
      UserLocalServiceUtil.updateUser(user);
    }
  }
;
  actionableDynamicQuery.setCompanyId(companyId);
  actionableDynamicQuery.performActions();
}
