{
  String jspPage=ParamUtil.getString(actionRequest,"jspPage");
  long definitionId=ParamUtil.getLong(actionRequest,"definitionId");
  String definitionName=ParamUtil.getString(actionRequest,"definitionName");
  String format=ParamUtil.getString(actionRequest,"format");
  String description=ParamUtil.getString(actionRequest,"description");
  String datasourceName=ParamUtil.getString(actionRequest,"dataSourceName");
  String reportParameters=ParamUtil.getString(actionRequest,"reportParameters");
  ReportDefinition definition=null;
  try {
    definition=ReportDefinitionLocalServiceUtil.updateReportDefinition(definitionId,definitionName,description,datasourceName,format,reportParameters);
    SessionMessages.add(actionRequest,"request_processed");
  }
 catch (  PortalException e) {
    definition=new ReportDefinitionImpl();
    definition.setDefinitionId(definitionId);
    definition.setDefinitionName(definitionName);
    definition.setDescription(description);
    definition.setDataSourceName(datasourceName);
    definition.setReportFormat(format.toString());
    definition.setReportParameters(reportParameters);
    SessionErrors.add(actionRequest,e.getClass().getName());
  }
  actionRequest.setAttribute("fileName",ParamUtil.getString(actionRequest,"fileName"));
  actionRequest.setAttribute("definition",definition);
  return jspPage;
}
