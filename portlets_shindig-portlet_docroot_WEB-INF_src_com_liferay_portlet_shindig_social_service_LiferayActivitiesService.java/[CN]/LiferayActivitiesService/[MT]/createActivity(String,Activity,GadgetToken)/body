{
  activity.setUserId(userId);
  activity.setPostedTime(new Date().getTime());
  try {
    JSONObject extraData=new JSONObject();
    extraData.put("appId",activity.getAppId());
    extraData.put("body",activity.getBody());
    extraData.put("bodyId",activity.getBodyId());
    extraData.put("externalId",activity.getExternalId());
    extraData.put("mediaItems",ShindigUtil.getMediaItems(activity.getMediaItems()));
    extraData.put("postedTime",activity.getPostedTime());
    extraData.put("priority",activity.getPriority());
    extraData.put("streamFaviconUrl",activity.getStreamFaviconUrl());
    extraData.put("streamSourceUrl",activity.getStreamSourceUrl());
    extraData.put("streamTitle",activity.getStreamTitle());
    extraData.put("streamUrl",activity.getStreamUrl());
    extraData.put("templateParams",ShindigUtil.getTemplateParams(activity.getTemplateParams()));
    extraData.put("title",activity.getTitle());
    extraData.put("titleId",activity.getTitleId());
    extraData.put("url",activity.getUrl());
    SocialActivityLocalServiceUtil.addActivity(Long.parseLong(userId),0L,Activity.class.getName(),activity.getPostedTime().longValue(),activity.getAppId().hashCode(),extraData.toString(),0L);
  }
 catch (  Exception e) {
    _log.error(e,e);
  }
  return new ResponseItem<JSONObject>(new JSONObject());
}
