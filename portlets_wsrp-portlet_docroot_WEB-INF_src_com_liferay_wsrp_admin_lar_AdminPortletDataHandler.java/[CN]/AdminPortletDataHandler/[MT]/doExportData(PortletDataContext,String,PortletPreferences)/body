{
  Element rootElement=addExportDataRootElement(portletDataContext);
  if (portletDataContext.getBooleanParameter(NAMESPACE,"wsrp-producers")) {
    Element wsrpProducersElement=rootElement.addElement("wsrp-producers");
    List<WSRPProducer> wsrpProducers=WSRPProducerLocalServiceUtil.getWSRPProducers(portletDataContext.getCompanyId(),QueryUtil.ALL_POS,QueryUtil.ALL_POS);
    for (    WSRPProducer wsrpProducer : wsrpProducers) {
      exportWSRPProducer(portletDataContext,wsrpProducersElement,wsrpProducer);
    }
  }
  if (portletDataContext.getBooleanParameter(NAMESPACE,"wsrp-consumers")) {
    Element wsrpConsumersElement=rootElement.addElement("wsrp-consumers");
    List<WSRPConsumer> wsrpConsumers=WSRPConsumerLocalServiceUtil.getWSRPConsumers(portletDataContext.getCompanyId(),QueryUtil.ALL_POS,QueryUtil.ALL_POS);
    for (    WSRPConsumer wsrpConsumer : wsrpConsumers) {
      exportWSRPConsumer(portletDataContext,wsrpConsumersElement,wsrpConsumer);
    }
  }
  return rootElement.formattedString();
}
