{
  PortalPreferences preferences=PortletPreferencesFactoryUtil.getPortalPreferences(actionRequest);
  String portletId=ParamUtil.getString(actionRequest,"portletResource");
  String defaultView=ParamUtil.getString(actionRequest,"defaultView");
  String timeZoneId=ParamUtil.getString(actionRequest,"timeZoneId");
  int defaultDuration=ParamUtil.getInteger(actionRequest,"defaultDuration");
  int weekStartsOn=ParamUtil.getInteger(actionRequest,"weekStartsOn");
  boolean isoTimeFormat=ParamUtil.getBoolean(actionRequest,"isoTimeFormat");
  boolean usePortalTimeZone=ParamUtil.getBoolean(actionRequest,"usePortalTimeZone");
  preferences.setValue(portletId,"defaultView",defaultView);
  preferences.setValue(portletId,"timeZoneId",timeZoneId);
  preferences.setValue(portletId,"defaultDuration",String.valueOf(defaultDuration));
  preferences.setValue(portletId,"weekStartsOn",String.valueOf(weekStartsOn));
  preferences.setValue(portletId,"isoTimeFormat",String.valueOf(isoTimeFormat));
  preferences.setValue(portletId,"usePortalTimeZone",String.valueOf(usePortalTimeZone));
}
