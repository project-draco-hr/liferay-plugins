{
  List<KBArticle> childKBArticles=getKBArticles(kbArticle.getGroupId(),kbArticle.getResourcePrimKey(),WorkflowConstants.STATUS_ANY,QueryUtil.ALL_POS,QueryUtil.ALL_POS,null);
  for (  KBArticle childrenKBArticle : childKBArticles) {
    kbArticleLocalService.deleteKBArticle(childrenKBArticle);
  }
  resourceLocalService.deleteResource(kbArticle.getCompanyId(),KBArticle.class.getName(),ResourceConstants.SCOPE_INDIVIDUAL,kbArticle.getResourcePrimKey());
  kbArticlePersistence.removeByResourcePrimKey(kbArticle.getResourcePrimKey());
  kbCommentLocalService.deleteKBComments(KBArticle.class.getName(),kbArticle.getResourcePrimKey());
  deleteAssets(kbArticle);
  ratingsStatsLocalService.deleteStats(KBArticle.class.getName(),kbArticle.getResourcePrimKey());
  socialActivityLocalService.deleteActivities(KBArticle.class.getName(),kbArticle.getResourcePrimKey());
  Indexer indexer=IndexerRegistryUtil.getIndexer(KBArticle.class);
  indexer.delete(kbArticle);
  PortletFileRepositoryUtil.deletePortletFolder(kbArticle.getAttachmentsFolderId());
  deleteSubscriptions(kbArticle);
  workflowInstanceLinkLocalService.deleteWorkflowInstanceLinks(kbArticle.getCompanyId(),kbArticle.getGroupId(),KBArticle.class.getName(),kbArticle.getResourcePrimKey());
  return kbArticle;
}
