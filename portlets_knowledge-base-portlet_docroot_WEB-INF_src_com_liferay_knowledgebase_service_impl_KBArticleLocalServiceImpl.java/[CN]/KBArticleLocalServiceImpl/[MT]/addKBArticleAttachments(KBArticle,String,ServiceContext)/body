{
  try {
    dlStore.addDirectory(serviceContext.getCompanyId(),CompanyConstants.SYSTEM,kbArticle.getAttachmentsDirName());
  }
 catch (  DuplicateDirectoryException dde) {
    _log.error("Directory already exists for " + dde.getMessage());
  }
  if (Validator.isNull(dirName)) {
    return;
  }
  String[] fileNames=dlStore.getFileNames(serviceContext.getCompanyId(),CompanyConstants.SYSTEM,dirName);
  for (  String fileName : fileNames) {
    byte[] bytes=dlStore.getFile(serviceContext.getCompanyId(),CompanyConstants.SYSTEM,fileName);
    try {
      addAttachment(kbArticle.getAttachmentsDirName(),FileUtil.getShortFileName(fileName),bytes,serviceContext);
    }
 catch (    DuplicateFileException dfe) {
      _log.error("File already exists for " + dfe.getMessage());
    }
  }
}
