{
  try {
    DLStoreUtil.addDirectory(serviceContext.getCompanyId(),CompanyConstants.SYSTEM,kbArticle.getAttachmentsDirName());
  }
 catch (  DuplicateDirectoryException dde) {
    _log.error("Directory already exists for " + dde.getMessage());
  }
  if (Validator.isNull(dirName)) {
    return;
  }
  String[] fileNames=DLStoreUtil.getFileNames(serviceContext.getCompanyId(),CompanyConstants.SYSTEM,dirName);
  for (  String fileName : fileNames) {
    InputStream inputStream=null;
    try {
      inputStream=DLStoreUtil.getFileAsStream(serviceContext.getCompanyId(),CompanyConstants.SYSTEM,fileName);
      addAttachment(kbArticle.getAttachmentsDirName(),FileUtil.getShortFileName(fileName),inputStream,serviceContext);
    }
 catch (    DuplicateFileException dfe) {
      _log.error("File already exists for " + dfe.getMessage());
    }
 finally {
      StreamUtil.cleanUp(inputStream);
    }
  }
}
