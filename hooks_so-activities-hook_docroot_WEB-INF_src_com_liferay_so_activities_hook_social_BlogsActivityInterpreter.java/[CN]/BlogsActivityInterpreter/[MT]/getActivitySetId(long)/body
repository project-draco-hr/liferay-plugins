{
  try {
    SocialActivity activity=SocialActivityUtil.fetchByPrimaryKey(activityId);
    if ((activity.getType() == _ACTIVITY_KEY_ADD_COMMENT) || (activity.getType() == SocialActivityConstants.TYPE_ADD_COMMENT)) {
      SocialActivitySet activitySet=SocialActivitySetLocalServiceUtil.fetchByC_C_T_First(activity.getClassNameId(),activity.getClassPK(),activity.getType());
      if ((activitySet != null) && !isExpired(activitySet)) {
        return activitySet.getActivitySetId();
      }
    }
 else     if (activity.getType() == _ACTIVITY_KEY_UPDATE_ENTRY) {
      SocialActivitySet activitySet=SocialActivitySetLocalServiceUtil.fetchByU_C_C_T_First(activity.getUserId(),activity.getClassNameId(),activity.getClassPK(),activity.getType());
      if ((activitySet != null) && !isExpired(activitySet)) {
        return activitySet.getActivitySetId();
      }
    }
  }
 catch (  Exception e) {
  }
  return 0;
}
