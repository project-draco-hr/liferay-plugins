{
  MarkdownConverter markdownConverter=MarkdownConverterFactoryUtil.create();
  String html=null;
  try {
    html=markdownConverter.convert(markdown);
  }
 catch (  IOException ioe) {
    throw new KBArticleImportException("Unable to convert Markdown to HTML: " + ioe.getLocalizedMessage(),ioe);
  }
  String heading=getHeading(html);
  if (Validator.isNull(heading)) {
    StringBundler sb=new StringBundler(2);
    sb.append("Unable to extract title heading from file: ");
    sb.append(fileEntryName);
    throw new KBArticleImportException(sb.toString());
  }
  _urlTitle=getUrlTitle(heading);
  _title=HtmlUtil.unescape(stripIds(heading));
  html=stripIds(html);
  _html=stripHeading(html);
  String baseSourceURL=metadata.get(_METADATA_BASE_SOURCE_URL);
  _sourceURL=buildSourceURL(baseSourceURL,fileEntryName);
}
