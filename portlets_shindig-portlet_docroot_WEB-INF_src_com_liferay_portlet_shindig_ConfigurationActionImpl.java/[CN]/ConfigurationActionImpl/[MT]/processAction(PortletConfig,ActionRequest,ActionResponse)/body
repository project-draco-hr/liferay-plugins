{
  String cmd=ParamUtil.getString(actionRequest,Constants.CMD);
  if (cmd.equals(Constants.UPDATE)) {
    String gadgetUrl=actionRequest.getParameter("gadgetUrl");
    String gadgetHeight=actionRequest.getParameter("gadgetHeight");
    if (Validator.isNotNull(gadgetUrl)) {
      String portletResource=ParamUtil.getString(actionRequest,"portletResource");
      PortletPreferences preferences=PortletPreferencesFactoryUtil.getPortletSetup(actionRequest,portletResource);
      preferences.setValue("gadget-url",gadgetUrl);
      preferences.setValue("gadget-height",gadgetHeight);
      preferences.store();
    }
  }
  res.sendRedirect(ParamUtil.getString(actionRequest,"redirect"));
}
