{
  setMockPostResponse("dependencies/watcher_test_move_file.json");
  SyncWatchEventProcessor syncWatchEventProcessor=new SyncWatchEventProcessor();
  syncWatchEventProcessor.process();
  WatchEventListener watchEventListener=new SyncSiteWatchEventListener(syncAccount.getSyncAccountId());
  Path filePath=Paths.get(syncAccount.getFilePathName());
  Watcher watcher=new Watcher(filePath,true,watchEventListener);
  Thread thread=new Thread(watcher);
  thread.start();
  Path addFilePath=Paths.get(_syncSite.getFilePathName() + "/test.txt");
  Files.createFile(addFilePath);
  Path moveFilePath=Paths.get(_syncSite.getFilePathName() + "/test");
  Files.createDirectory(moveFilePath);
  thread.sleep(5000);
  Files.move(addFilePath,moveFilePath.resolve(addFilePath.getFileName()));
  thread.sleep(5000);
  _syncFiles=SyncFileService.findSyncFiles(syncAccount.getSyncAccountId());
  Assert.assertEquals(4,_syncFiles.size());
  Assert.assertNotNull(SyncFileService.fetchSyncFile(FilePathNameUtil.getFilePathName(moveFilePath),syncAccount.getSyncAccountId()));
}
