{
  try {
    User user=UserLocalServiceUtil.getUser((Long)classPK);
    boolean hasRole=UserLocalServiceUtil.hasRoleUser(user.getCompanyId(),"Social Office User",user.getUserId(),true);
    Group group=user.getGroup();
    ExpandoBridge expandoBridge=group.getExpandoBridge();
    boolean socialOfficeEnabled=GetterUtil.getBoolean(expandoBridge.getAttribute("socialOfficeEnabled"));
    if (hasRole && !socialOfficeEnabled) {
      LayoutSetPrototypeUtil.updateLayoutSetPrototype(group,SocialOfficeConstants.LAYOUT_SET_PROTOTYPE_KEY_USER_PUBLIC,false);
      LayoutSetPrototypeUtil.updateLayoutSetPrototype(group,SocialOfficeConstants.LAYOUT_SET_PROTOTYPE_KEY_USER_PRIVATE,true);
      SocialOfficeUtil.enableSocialOffice(group);
    }
  }
 catch (  NoSuchGroupException nsge) {
  }
catch (  Exception e) {
    throw new ModelListenerException(e);
  }
}
