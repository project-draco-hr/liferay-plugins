{
  try {
    try {
      UserLocalServiceUtil.addOrganizationUsers(request.getClassPK(),new long[]{request.getUserId()});
      SocialActivityLocalServiceUtil.addActivity(request.getUserId(),0,Organization.class.getName(),request.getClassPK(),MembersActivityKeys.ADD_MEMBER,StringPool.BLANK,0);
    }
 catch (    NoSuchOrganizationException noOrganizationException) {
      UserLocalServiceUtil.addGroupUsers(request.getClassPK(),new long[]{request.getUserId()});
      SocialActivityLocalServiceUtil.addActivity(request.getUserId(),0,Group.class.getName(),request.getClassPK(),MembersActivityKeys.ADD_MEMBER,StringPool.BLANK,0);
    }
  }
 catch (  Exception e) {
    _log.error(e,e);
  }
  return true;
}
