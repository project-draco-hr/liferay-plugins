{
  JSONObject jsonObject=JSONFactoryUtil.createJSONObject(userNotificationEvent.getPayload());
  long microblogsEntryId=jsonObject.getLong("classPK");
  MicroblogsEntry microblogsEntry=MicroblogsEntryLocalServiceUtil.fetchMicroblogsEntry(microblogsEntryId);
  if (microblogsEntry == null) {
    UserNotificationEventLocalServiceUtil.deleteUserNotificationEvent(userNotificationEvent.getUserNotificationEventId());
    return null;
  }
  int notificationType=jsonObject.getInt("notificationType");
  return StringUtil.replace(getBodyTemplate(),new String[]{"[$BODY$]","[$TITLE$]"},new String[]{HtmlUtil.escape(jsonObject.getString("entryTitle")),getBodyTitle(microblogsEntry,notificationType,serviceContext)});
}
