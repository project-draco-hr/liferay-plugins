{
  ThemeDisplay themeDisplay=(ThemeDisplay)actionRequest.getAttribute(WebKeys.THEME_DISPLAY);
  if (!themeDisplay.isSignedIn()) {
    return;
  }
  long[] subscriptionIds=StringUtil.split(ParamUtil.getString(actionRequest,"subscriptionIds"),0L);
  for (  long subscriptionId : subscriptionIds) {
    if (subscriptionId > 0) {
      Subscription subscription=SubscriptionLocalServiceUtil.getSubscription(subscriptionId);
      PermissionChecker permissionChecker=themeDisplay.getPermissionChecker();
      if (permissionChecker.getUserId() != subscription.getUserId()) {
        throw new PrincipalException();
      }
      SubscriptionLocalServiceUtil.deleteSubscription(subscription);
    }
  }
}
