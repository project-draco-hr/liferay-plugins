{
  String command=message.getString("command");
  String servletContextName=message.getString("servletContextName");
  if (!command.equals("deploy") || !servletContextName.endsWith("-theme")) {
    return;
  }
  ServletContext servletContext=ServletContextPool.get(servletContextName);
  File resourceDir=new File(servletContext.getRealPath("/WEB-INF/classes/resources"));
  if (!resourceDir.exists()) {
    return;
  }
  _log.info("Importing resources from " + servletContextName);
  String name=TextFormatter.format(servletContextName,TextFormatter.J);
  File lar=new File(resourceDir,"/archive.lar");
  List<Company> companies=CompanyLocalServiceUtil.getCompanies();
  for (  Company company : companies) {
    if (hasLayoutSetPrototype(company.getCompanyId(),name)) {
      continue;
    }
    if (lar.exists()) {
      LarImporter.importResource(company.getCompanyId(),name,lar);
    }
 else {
      FileImporter.importResource(company.getCompanyId(),name,resourceDir);
    }
  }
}
