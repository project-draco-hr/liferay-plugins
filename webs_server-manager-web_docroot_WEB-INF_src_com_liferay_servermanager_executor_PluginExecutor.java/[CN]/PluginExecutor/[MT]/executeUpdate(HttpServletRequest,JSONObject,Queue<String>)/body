{
  String context=arguments.poll();
  File[] deployDirectories=getDeployDirectories(context);
  for (  File deployDirectory : deployDirectories) {
    if (!deployDirectory.exists()) {
      responseJSONObject.put(JSONKeys.ERROR,"Context directory " + deployDirectory.getAbsolutePath() + " does not exist");
      responseJSONObject.put(JSONKeys.STATUS,1);
      return;
    }
  }
  File tempFile=getTempFile(request,responseJSONObject);
  if (tempFile == null) {
    return;
  }
  for (  File deployDirectory : deployDirectories) {
    FileUtil.unzip(tempFile,deployDirectory);
  }
  File partialAppDeletePropsFile=new File(deployDirectories[0],"META-INF/liferay-partialapp-delete.props");
  if (!partialAppDeletePropsFile.exists()) {
    return;
  }
  BufferedReader bufferedReader=new BufferedReader(new FileReader(partialAppDeletePropsFile));
  String line=null;
  while ((line=bufferedReader.readLine()) != null) {
    for (    File deployDirectory : deployDirectories) {
      File staleFile=new File(deployDirectory,line.trim());
      if (!staleFile.exists()) {
        continue;
      }
      boolean success=FileUtils.deleteQuietly(staleFile);
      if (!success) {
        String message="Could not delete file " + staleFile.getAbsolutePath();
        _log.error(message);
        responseJSONObject.put(JSONKeys.ERROR,message);
      }
    }
  }
  FileUtils.deleteQuietly(partialAppDeletePropsFile);
}
