{
  Map<String,Serializable> context=executionContext.getContext();
  if (context == null) {
    KaleoInstanceToken kaleoInstanceToken=executionContext.getKaleoInstanceToken();
    KaleoInstance kaleoInstance=kaleoInstanceToken.getKaleoInstance();
    context=WorkflowContextUtil.convert(kaleoInstance.getContext());
  }
  for (  Map.Entry<String,Serializable> contextEntry : context.entrySet()) {
    freeMarkerContext.put(contextEntry.getKey(),contextEntry.getValue());
  }
  KaleoTaskInstanceToken kaleoTaskInstanceToken=executionContext.getKaleoTaskInstanceToken();
  if (kaleoTaskInstanceToken != null) {
    freeMarkerContext.put("assigneeClassName",kaleoTaskInstanceToken.getAssigneeClassName());
    freeMarkerContext.put("assigneeClassPK",kaleoTaskInstanceToken.getAssigneeClassPK());
    KaleoTask kaleoTask=kaleoTaskInstanceToken.getKaleoTask();
    freeMarkerContext.put("taskName",kaleoTask.getName());
    freeMarkerContext.put("userId",kaleoTaskInstanceToken.getUserId());
  }
 else {
    KaleoInstanceToken kaleoInstanceToken=executionContext.getKaleoInstanceToken();
    freeMarkerContext.put("userId",kaleoInstanceToken.getUserId());
  }
}
