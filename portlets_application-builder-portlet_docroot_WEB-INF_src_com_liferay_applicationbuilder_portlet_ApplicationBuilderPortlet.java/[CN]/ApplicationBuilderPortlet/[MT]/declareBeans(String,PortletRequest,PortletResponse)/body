{
  PortletConfig portletConfig=getPortletConfig();
  PortletContext portletContext=getPortletContext();
  PortletPreferences preferences=portletRequest.getPreferences();
  Map<String,String> userInfo=(Map<String,String>)portletRequest.getAttribute(PortletRequest.USER_INFO);
  bsfManager.declareBean("portletConfig",portletConfig,PortletConfig.class);
  bsfManager.declareBean("portletContext",portletContext,PortletContext.class);
  bsfManager.declareBean("preferences",preferences,PortletPreferences.class);
  bsfManager.declareBean("userInfo",userInfo,Map.class);
  bsfManager.declareBean("portletRequest",portletRequest,PortletRequest.class);
  if (portletRequest instanceof ActionRequest) {
    bsfManager.declareBean("actionRequest",portletRequest,ActionRequest.class);
  }
 else   if (portletRequest instanceof RenderRequest) {
    bsfManager.declareBean("renderRequest",portletRequest,RenderRequest.class);
  }
 else   if (portletRequest instanceof ResourceRequest) {
    bsfManager.declareBean("resourceRequest",portletRequest,ResourceRequest.class);
  }
  bsfManager.declareBean("portletResponse",portletResponse,PortletResponse.class);
  if (portletResponse instanceof ActionResponse) {
    bsfManager.declareBean("actionResponse",portletResponse,ActionResponse.class);
  }
 else   if (portletResponse instanceof RenderResponse) {
    bsfManager.declareBean("renderResponse",portletResponse,RenderResponse.class);
  }
 else   if (portletResponse instanceof ResourceResponse) {
    bsfManager.declareBean("resourceResponse",portletResponse,ResourceResponse.class);
  }
  bsfManager.exec(_SCRIPTING_ENGINE_LANGUAGE,"(Ruby)",0,0,script);
}
