{
  try {
    Definition definition=_workflowModelParser.parse(inputStream);
    definition.setName(name);
    if (_workflowValidator != null) {
      _workflowValidator.validate(definition);
    }
    WorkflowDefinition workflowDefinition=_workflowDeployer.deploy(definition,serviceContext);
    return workflowDefinition;
  }
 catch (  Exception e) {
    throw new WorkflowException(e);
  }
}
