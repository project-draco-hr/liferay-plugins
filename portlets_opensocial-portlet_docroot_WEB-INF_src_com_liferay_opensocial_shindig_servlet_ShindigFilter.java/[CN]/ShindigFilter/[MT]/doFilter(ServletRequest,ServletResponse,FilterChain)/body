{
  if (injector == null) {
    HttpServletRequest request=(HttpServletRequest)servletRequest;
    HttpSession session=request.getSession();
    _init(session.getServletContext());
  }
  PermissionChecker permissionChecker=PermissionThreadLocal.getPermissionChecker();
  if (permissionChecker == null) {
    setPermissionChecker(servletRequest);
  }
  String serverName=servletRequest.getServerName();
  String host=serverName.concat(StringPool.COLON).concat(String.valueOf(servletRequest.getServerPort()));
  ShindigUtil.setHost(host);
  filterChain.doFilter(servletRequest,servletResponse);
}
