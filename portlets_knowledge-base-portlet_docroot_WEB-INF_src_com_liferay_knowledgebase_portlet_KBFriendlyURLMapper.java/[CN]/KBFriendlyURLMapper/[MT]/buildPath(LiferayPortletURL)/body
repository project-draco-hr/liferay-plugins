{
  String friendlyURLPath=null;
  String cmd=GetterUtil.getString(portletURL.getParameter(Constants.CMD));
  if (cmd.equals("view_page")) {
    String title=portletURL.getParameter("title");
    StringBuilder sb=new StringBuilder();
    if (Validator.isNotNull(title)) {
      sb.append(StringPool.SLASH);
      sb.append(_MAPPING);
      sb.append(StringPool.SLASH);
      sb.append(HttpUtil.encodeURL(title));
      portletURL.addParameterIncludedInPath("title");
      WindowState windowState=portletURL.getWindowState();
      if (!windowState.equals(WindowState.NORMAL)) {
        sb.append(StringPool.SLASH);
        sb.append(windowState);
      }
    }
    friendlyURLPath=sb.toString();
  }
  if (Validator.isNotNull(friendlyURLPath)) {
    portletURL.addParameterIncludedInPath("p_p_id");
    portletURL.addParameterIncludedInPath(Constants.CMD);
  }
  return friendlyURLPath;
}
