{
  List<Group> groups=GroupLocalServiceUtil.getUserGroups(themeDisplay.getUserId(),true);
  List<Group> filteredGroups=new ArrayList<Group>();
  if (!groups.isEmpty()) {
    for (    Group curGroup : groups) {
      if (((curGroup.isOrganization() && curGroup.isSite()) || curGroup.isRegularSite()) && GroupPermissionUtil.contains(themeDisplay.getPermissionChecker(),curGroup.getGroupId(),ActionKeys.MANAGE_ANNOUNCEMENTS)) {
        filteredGroups.add(curGroup);
      }
    }
  }
  return filteredGroups;
}
