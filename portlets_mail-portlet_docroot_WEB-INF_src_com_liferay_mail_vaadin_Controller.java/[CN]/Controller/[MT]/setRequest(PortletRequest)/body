{
  user=null;
  try {
    user=PortalUtil.getUser(request);
  }
 catch (  PortalException e) {
    _log.debug(e);
  }
catch (  SystemException e) {
    _log.debug(e);
  }
  HttpServletRequest httpRequest=PortalUtil.getHttpServletRequest(request);
  PortletConfig portletConfig=(PortletConfig)request.getAttribute(JavaConstants.JAVAX_PORTLET_CONFIG);
  passwordRetriever=new PasswordRetriever(httpRequest);
  mailMgr=new MailManager(user,passwordRetriever,portletConfig);
}
