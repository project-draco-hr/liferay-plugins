{
  Role role=null;
  try {
    role=roleLocalService.getRole(serviceContext.getCompanyId(),roleName);
    if (role.getType() != roleType) {
      throw new DuplicateRoleException("Role already exists with name: " + roleName);
    }
  }
 catch (  NoSuchRoleException nsre) {
    if (!autoCreate) {
      throw nsre;
    }
    role=roleLocalService.addRole(serviceContext.getUserId(),serviceContext.getCompanyId(),roleName,null,"Autogenerated role from workflow definition",roleType);
  }
  return role;
}
