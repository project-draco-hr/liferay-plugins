{
  List<Folder> folders=FolderLocalServiceUtil.getFolders(accountId);
  List<Folder> requiredFolders=new ArrayList<Folder>();
  List<Folder> nonRequiredFolders=new ArrayList<Folder>();
  Account account=AccountLocalServiceUtil.getAccount(accountId);
  for (  Folder folder : folders) {
    if ((folder.getFolderId() == account.getInboxFolderId()) || (folder.getFolderId() == account.getDraftFolderId()) || (folder.getFolderId() == account.getSentFolderId())|| (folder.getFolderId() == account.getTrashFolderId())) {
      requiredFolders.add(folder);
    }
 else {
      nonRequiredFolders.add(folder);
    }
  }
  if (includeRequiredFolders && includeNonRequiredFolders) {
    requiredFolders.addAll(nonRequiredFolders);
    return requiredFolders;
  }
 else   if (includeNonRequiredFolders) {
    return nonRequiredFolders;
  }
 else {
    return requiredFolders;
  }
}
