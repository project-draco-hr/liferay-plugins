{
  if (resourcePrimKey <= 0) {
    return getMaxHumanPriority(groupId,parentResourcePrimKey,null);
  }
  int count=ArticleServiceUtil.getSiblingArticlesCount(groupId,parentResourcePrimKey,WorkflowConstants.STATUS_ANY);
  int start=0;
  int end=count;
  while ((end - start) > INTERVAL_SIZE) {
    int mid=(end - start) / 2;
    List<Article> articles=ArticleServiceUtil.getSiblingArticles(groupId,parentResourcePrimKey,WorkflowConstants.STATUS_ANY,mid - 1,mid,new ArticlePriorityComparator(true));
    Article article=articles.get(0);
    if (article.getPriority() < priority) {
      start=mid;
    }
 else {
      end=mid;
    }
  }
  List<Article> articles=ArticleServiceUtil.getSiblingArticles(groupId,parentResourcePrimKey,WorkflowConstants.STATUS_ANY,start,end,new ArticlePriorityComparator(true));
  for (  Article article : articles) {
    if (article.getResourcePrimKey() == resourcePrimKey) {
      return start + articles.indexOf(article) + 1;
    }
  }
  return getMaxHumanPriority(groupId,parentResourcePrimKey,null);
}
