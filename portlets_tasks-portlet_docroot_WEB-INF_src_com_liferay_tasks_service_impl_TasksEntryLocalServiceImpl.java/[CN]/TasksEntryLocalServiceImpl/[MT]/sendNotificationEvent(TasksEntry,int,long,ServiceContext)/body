{
  int status=tasksEntry.getStatus();
  if ((status != TasksEntryConstants.STATUS_OPEN) && (status != TasksEntryConstants.STATUS_RESOLVED) && (status != TasksEntryConstants.STATUS_REOPENED)) {
    return;
  }
  HashSet<Long> receiverUserIds=new HashSet<Long>(3);
  receiverUserIds.add(tasksEntry.getUserId());
  receiverUserIds.add(previousAssigneeUserId);
  receiverUserIds.add(tasksEntry.getAssigneeUserId());
  receiverUserIds.remove(serviceContext.getUserId());
  JSONObject notificationEventJSON=JSONFactoryUtil.createJSONObject();
  notificationEventJSON.put("body",tasksEntry.getTitle());
  notificationEventJSON.put("entryId",tasksEntry.getTasksEntryId());
  notificationEventJSON.put("portletId","1_WAR_tasksportlet");
  notificationEventJSON.put("userId",serviceContext.getUserId());
  for (  long receiverUserId : receiverUserIds) {
    String title=StringPool.BLANK;
    if (previousStatus == TasksEntryConstants.STATUS_ALL) {
      title="x-assigned-you-a-task";
    }
 else     if (tasksEntry.getAssigneeUserId() != previousAssigneeUserId) {
      if (receiverUserId == previousAssigneeUserId) {
        title="x-reassigned-your-task";
      }
 else {
        title="x-assigned-you-a-task";
      }
    }
 else     if (status != previousStatus) {
      String statusLabel=TasksEntryConstants.getStatusLabel(tasksEntry.getStatus());
      title="x-" + statusLabel + "-the-task";
    }
 else {
      title="x-modified-the-task";
    }
    notificationEventJSON.put("title",title);
    NotificationEvent notificationEvent=NotificationEventFactoryUtil.createNotificationEvent(System.currentTimeMillis(),"6_WAR_soportlet",notificationEventJSON);
    notificationEvent.setDeliveryRequired(0);
    ChannelHubManagerUtil.sendNotificationEvent(tasksEntry.getCompanyId(),receiverUserId,notificationEvent);
  }
}
