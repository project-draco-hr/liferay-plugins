{
  ThemeDisplay themeDisplay=(ThemeDisplay)request.getAttribute(WebKeys.THEME_DISPLAY);
  String articleURL=getArticleURL(themeDisplay.getPlid(),_PORTLET_ID,resourcePrimKey,themeDisplay.getPortalURL());
  String portletAddDefaultResourceCheckEnabled=PropsUtil.get(PropsKeys.PORTLET_ADD_DEFAULT_RESOURCE_CHECK_ENABLED);
  if (GetterUtil.getBoolean(portletAddDefaultResourceCheckEnabled)) {
    String p_p_auth=AuthTokenUtil.getToken(request,themeDisplay.getPlid(),_PORTLET_ID);
    articleURL=HttpUtil.setParameter(articleURL,"p_p_auth",p_p_auth);
  }
  articleURL=HttpUtil.setParameter(articleURL,"p_p_state",WindowState.MAXIMIZED.toString());
  return articleURL;
}
