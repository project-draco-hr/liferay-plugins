{
  int start=0;
  if (curStartValues.length > (cur - SearchContainer.DEFAULT_CUR)) {
    start=curStartValues[cur - SearchContainer.DEFAULT_CUR];
    curStartValues=ArrayUtil.subset(curStartValues,0,cur - SearchContainer.DEFAULT_CUR + 1);
  }
 else {
    cur=SearchContainer.DEFAULT_CUR;
    curStartValues=new int[]{0};
  }
  int end=start + _INTERVAL;
  List<KBStructure> kbStructures=new ArrayList<KBStructure>();
  int curStartValue=0;
  while (curStartValue == 0) {
    List<KBStructure> curKBStructures=kbStructureLocalService.search(groupId,title,content,startDate,endDate,andOperator,start,end,orderByComparator);
    if (curKBStructures.isEmpty()) {
      break;
    }
    for (int i=0; i < curKBStructures.size(); i++) {
      KBStructure curKBStructure=curKBStructures.get(i);
      if (!KBStructurePermission.contains(getPermissionChecker(),curKBStructure,ActionKeys.VIEW)) {
        continue;
      }
      if (kbStructures.size() == delta) {
        curStartValue=start + i;
        break;
      }
      kbStructures.add(curKBStructure);
    }
    start=start + _INTERVAL;
    end=start + _INTERVAL;
  }
  int total=((cur - 1) * delta) + kbStructures.size();
  if (curStartValue > 0) {
    curStartValues=ArrayUtil.append(curStartValues,curStartValue);
    total=total + 1;
  }
  return new KBStructureSearchDisplayImpl(kbStructures,total,curStartValues);
}
