{
  int start=0;
  if (maxResultSize == QueryUtil.ALL_POS) {
    start=QueryUtil.ALL_POS;
  }
  List<Object[]> favoriteSites=FavoriteSiteLocalServiceUtil.getFavoriteSites(userId,name,start,maxResultSize);
  List<Group> groups=new ArrayList<Group>(favoriteSites.size());
  for (  Object[] favoriteSite : favoriteSites) {
    long curUserId=(Long)favoriteSite[0];
    long groupId=(Long)favoriteSite[1];
    try {
      groups.add(GroupServiceUtil.getGroup(groupId));
    }
 catch (    Exception e) {
      FavoriteSiteLocalServiceUtil.deleteFavoriteSite(curUserId,groupId);
    }
  }
  return groups;
}
