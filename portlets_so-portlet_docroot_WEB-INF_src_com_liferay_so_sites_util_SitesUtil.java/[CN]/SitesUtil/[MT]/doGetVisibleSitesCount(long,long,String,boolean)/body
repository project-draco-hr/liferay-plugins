{
  if (usersSites) {
    LinkedHashMap<String,Object> params=new LinkedHashMap<String,Object>();
    params.put("active",Boolean.TRUE);
    params.put("pageCount",Boolean.TRUE);
    params.put("usersGroups",userId);
    return GroupLocalServiceUtil.searchCount(comapnyId,keywords,null,params,true);
  }
 else {
    LinkedHashMap<String,Object> params=new LinkedHashMap<String,Object>();
    List<Integer> types=new ArrayList<Integer>();
    types.add(GroupConstants.TYPE_SITE_OPEN);
    types.add(GroupConstants.TYPE_SITE_RESTRICTED);
    params.put("active",Boolean.TRUE);
    params.put("pageCount",Boolean.TRUE);
    params.put("types",types);
    int groupsCount=GroupLocalServiceUtil.searchCount(comapnyId,keywords,null,params,true);
    params.clear();
    params.put("usersGroups",userId);
    types.clear();
    types.add(GroupConstants.TYPE_SITE_PRIVATE);
    params.put("pageCount",Boolean.TRUE);
    params.put("types",types);
    return groupsCount + GroupLocalServiceUtil.searchCount(comapnyId,keywords,null,params,true);
  }
}
