{
  if (_logger.isTraceEnabled()) {
    _logger.trace("Processing sync watch events");
  }
  List<SyncWatchEvent> syncWatchEvents=SyncWatchEventService.findAll("eventType",true);
  for (  SyncWatchEvent syncWatchEvent : syncWatchEvents) {
    if (_processedSyncWatchEventIds.contains(syncWatchEvent.getSyncWatchEventId())) {
      SyncWatchEventService.deleteSyncWatchEvent(syncWatchEvent.getSyncWatchEventId());
      continue;
    }
    if (_logger.isDebugEnabled()) {
      _logger.debug("Event type {} file path {} file type {} timestamp {}",syncWatchEvent.getEventType(),syncWatchEvent.getFilePathName(),syncWatchEvent.getFileType(),syncWatchEvent.getTimestamp());
    }
    String fileType=syncWatchEvent.getFileType();
    String eventType=syncWatchEvent.getEventType();
    try {
      if (eventType.equals(SyncWatchEvent.EVENT_TYPE_CREATE)) {
        if (fileType.equals(SyncFile.TYPE_FILE)) {
          addFile(syncWatchEvent);
        }
 else {
          addFolder(syncWatchEvent);
        }
      }
 else       if (eventType.equals(SyncWatchEvent.EVENT_TYPE_DELETE)) {
        if (fileType.equals(SyncFile.TYPE_FILE)) {
          deleteFile(syncWatchEvent);
        }
 else {
          deleteFolder(syncWatchEvent);
        }
      }
 else       if (eventType.equals(SyncWatchEvent.EVENT_TYPE_MODIFY)) {
        if (fileType.equals(SyncFile.TYPE_FILE)) {
          modifyFile(syncWatchEvent);
        }
      }
    }
 catch (    Exception e) {
      _logger.error(e.getMessage(),e);
    }
    SyncWatchEventService.deleteSyncWatchEvent(syncWatchEvent.getSyncWatchEventId());
  }
  _processedSyncWatchEventIds.clear();
}
