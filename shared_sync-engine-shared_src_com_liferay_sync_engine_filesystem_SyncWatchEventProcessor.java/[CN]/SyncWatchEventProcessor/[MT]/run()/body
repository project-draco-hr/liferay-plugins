{
  if (_logger.isTraceEnabled()) {
    _logger.trace("Processing sync watch events");
  }
  List<SyncWatchEvent> syncWatchEvents=SyncWatchEventService.findAll("kindName",true);
  for (  SyncWatchEvent syncWatchEvent : syncWatchEvents) {
    if (_processedSyncWatchEventIds.contains(syncWatchEvent.getSyncWatchEventId())) {
      SyncWatchEventService.deleteSyncWatchEvent(syncWatchEvent.getSyncWatchEventId());
      continue;
    }
    if (_logger.isDebugEnabled()) {
      _logger.debug("Event file path {} file type {} kind name {} timestamp {}",syncWatchEvent.getFilePathName(),syncWatchEvent.getFileType(),syncWatchEvent.getKindName(),syncWatchEvent.getTimestamp());
    }
    String fileType=syncWatchEvent.getFileType();
    String kindName=syncWatchEvent.getKindName();
    try {
      if (kindName.equals(SyncWatchEvent.ENTRY_CREATE)) {
        if (fileType.equals(SyncFile.TYPE_FILE)) {
          addFile(syncWatchEvent);
        }
 else {
          addFolder(syncWatchEvent);
        }
      }
 else       if (kindName.equals(SyncWatchEvent.ENTRY_DELETE)) {
        if (fileType.equals(SyncFile.TYPE_FILE)) {
          deleteFile(syncWatchEvent);
        }
 else {
          deleteFolder(syncWatchEvent);
        }
      }
    }
 catch (    Exception e) {
      _logger.error(e.getMessage(),e);
    }
    SyncWatchEventService.deleteSyncWatchEvent(syncWatchEvent.getSyncWatchEventId());
  }
  _processedSyncWatchEventIds.clear();
}
