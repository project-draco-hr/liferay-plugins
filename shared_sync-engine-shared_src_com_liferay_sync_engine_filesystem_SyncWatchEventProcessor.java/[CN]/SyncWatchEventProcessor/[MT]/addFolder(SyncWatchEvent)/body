{
  Path filePath=Paths.get(syncWatchEvent.getFilePathName());
  String filePathName=FilePathNameUtil.getFilePathName(filePath);
  SyncAccount syncAccount=SyncAccountService.fetchSyncAccount(syncWatchEvent.getSyncAccountId());
  if (filePathName.equals(syncAccount.getFilePathName()) || (SyncSiteService.fetchSyncSite(filePathName,syncWatchEvent.getSyncAccountId()) != null)) {
    return;
  }
  Path parentFilePath=filePath.getParent();
  SyncFile parentSyncFile=SyncFileService.fetchSyncFile(FilePathNameUtil.getFilePathName(parentFilePath),syncWatchEvent.getSyncAccountId());
  SyncFile syncFile=SyncFileService.fetchSyncFileByFileKey(FileUtil.getFileKey(filePath),syncWatchEvent.getSyncAccountId());
  if (syncFile == null) {
    SyncFileService.addFolderSyncFile(filePath,parentSyncFile.getTypePK(),parentSyncFile.getRepositoryId(),syncWatchEvent.getSyncAccountId());
    return;
  }
  SyncWatchEvent relatedSyncWatchEvent=SyncWatchEventService.fetchSyncWatchEvent(syncFile.getFilePathName(),SyncWatchEvent.ENTRY_DELETE,syncWatchEvent.getTimestamp());
  if (relatedSyncWatchEvent == null) {
    return;
  }
  Path srcFilePath=Paths.get(relatedSyncWatchEvent.getFilePathName());
  if (parentFilePath.equals(srcFilePath.getParent())) {
    SyncFileService.updateFolderSyncFile(filePath,syncWatchEvent.getSyncAccountId(),syncFile);
  }
 else {
    SyncFileService.moveFolderSyncFile(filePath,parentSyncFile.getTypePK(),syncWatchEvent.getSyncAccountId(),syncFile);
  }
  _processedSyncWatchEventIds.add(relatedSyncWatchEvent.getSyncWatchEventId());
}
