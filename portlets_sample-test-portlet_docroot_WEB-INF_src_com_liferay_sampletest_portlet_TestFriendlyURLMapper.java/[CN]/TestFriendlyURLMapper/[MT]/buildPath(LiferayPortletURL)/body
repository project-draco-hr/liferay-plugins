{
  String resourceID=portletURL.getResourceID();
  if (Validator.isNotNull(resourceID)) {
    portletURL.addParameterIncludedInPath("p_p_id");
    portletURL.addParameterIncludedInPath("p_p_lifecycle");
    portletURL.addParameterIncludedInPath("p_p_resource_id");
    portletURL.addParameterIncludedInPath("p_p_cacheability");
    StringBuilder sb=new StringBuilder();
    sb.append(StringPool.SLASH);
    sb.append(_MAPPING);
    sb.append(StringPool.SLASH);
    sb.append(resourceID);
    return sb.toString();
  }
  WindowState windowState=portletURL.getWindowState();
  String jspPage=GetterUtil.getString(portletURL.getParameter("jspPage"));
  if ((windowState == null) || (windowState.equals(WindowState.NORMAL)) || (Validator.isNotNull(jspPage))) {
    portletURL.addParameterIncludedInPath("p_p_id");
    portletURL.addParameterIncludedInPath("jspPage");
    StringBuilder sb=new StringBuilder();
    sb.append(StringPool.SLASH);
    sb.append(_MAPPING);
    sb.append(jspPage);
    return sb.toString();
  }
  return null;
}
