{
  try {
    String[] credentials=null;
    String ssoSessionId=CookieUtil.get(request,WebKeys.SSOSESSIONID);
    if (Validator.isNotNull(ssoSessionId)) {
      Company company=PortalUtil.getCompany(request);
      SSOSession ssoSession=null;
      try {
        ssoSession=SSOSessionLocalServiceUtil.getSSOSession(ssoSessionId);
      }
 catch (      NoSuchSSOSessionException nssse) {
        return credentials;
      }
      if (ssoSession.isExpired()) {
        return credentials;
      }
      User user=null;
      try {
        user=UserLocalServiceUtil.getUserById(company.getCompanyId(),ssoSession.getUserId());
      }
 catch (      NoSuchUserException nsue) {
      }
      if (user != null) {
        credentials=new String[3];
        credentials[0]=String.valueOf(user.getUserId());
        credentials[1]=user.getPassword();
        credentials[2]=Boolean.TRUE.toString();
      }
    }
    return credentials;
  }
 catch (  Exception e) {
    _log.warn(e,e);
    throw new AutoLoginException(e);
  }
}
