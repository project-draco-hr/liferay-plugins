{
  Message message=new Message();
  message.put("command","getPresences");
  message.put("userId",userId);
  message.put("locale",locale);
  JSONObject responseJSON=(JSONObject)MessageBusUtil.sendSynchronousMessage(DestinationNames.RUON,message);
  if (responseJSON == null) {
    return null;
  }
  JSONArray presencesJSON=responseJSON.getJSONArray("presencesJSON");
  if ((presencesJSON == null) || (presencesJSON.length() == 0)) {
    return null;
  }
  List<Presence> presences=new ArrayList<Presence>();
  for (int i=0; i < presencesJSON.length(); i++) {
    JSONObject presenceJSON=presencesJSON.getJSONObject(i);
    String output=presenceJSON.getString("output");
    Presence presence=new Presence(userId,output);
    presences.add(presence);
  }
  return presences;
}
