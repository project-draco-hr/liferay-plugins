{
  if (Files.notExists(filePath)) {
    return null;
  }
  String name=String.valueOf(filePath.getFileName());
  SyncFile syncFile=addSyncFile(null,null,name,FileUtil.getFileKey(filePath),FilePathNameUtil.getFilePathName(filePath),Files.probeContentType(filePath),name,parentFolderId,repositoryId,syncAccountId,SyncFile.TYPE_FOLDER);
  Map<String,Object> parameters=new HashMap<String,Object>();
  parameters.put("description","");
  parameters.put("name",name);
  parameters.put("parentFolderId",parentFolderId);
  parameters.put("repositoryId",repositoryId);
  SyncSite syncSite=SyncSiteService.fetchSyncSite(repositoryId,syncAccountId);
  if (syncSite.getType() != SyncSite.TYPE_SYSTEM) {
    parameters.put("serviceContext.addGroupPermissions",true);
  }
  if (syncSite.getType() == SyncSite.TYPE_OPEN) {
    parameters.put("serviceContext.addGuestPermissions",true);
  }
  parameters.put("syncFile",syncFile);
  AddFolderEvent addFolderEvent=new AddFolderEvent(syncAccountId,parameters);
  addFolderEvent.run();
  return syncFile;
}
