{
  _running=true;
  SyncEngineUtil.fireSyncEngineStateChanged(SyncEngineUtil.SYNC_ENGINE_STATE_STARTING);
  LoggerUtil.initLogger();
  _logger.info("Starting {}",PropsValues.SYNC_PRODUCT_NAME);
  UpgradeUtil.upgrade();
  _syncAccountModelListener=new SyncAccountModelListener();
  SyncAccountService.registerModelListener(_syncAccountModelListener);
  _syncFileModelListener=new SyncFileModelListener();
  SyncFileService.registerModelListener(_syncFileModelListener);
  _syncSiteModelListener=new SyncSiteModelListener();
  SyncSiteService.registerModelListener(_syncSiteModelListener);
  SyncWatchEventProcessor syncWatchEventProcessor=new SyncWatchEventProcessor();
  _syncWatchEventProcessorExecutorService=Executors.newSingleThreadScheduledExecutor();
  _syncWatchEventProcessorExecutorService.scheduleAtFixedRate(syncWatchEventProcessor,0,3,TimeUnit.SECONDS);
  List<SyncAccount> syncAccounts=SyncAccountService.findAll();
  if (syncAccounts.isEmpty()) {
    SyncEngineUtil.fireSyncEngineStateChanged(SyncEngineUtil.SYNC_ENGINE_NOT_CONFIGURED);
  }
  for (  long activeSyncAccountId : SyncAccountService.getActiveSyncAccountIds()) {
    scheduleSyncAccountTasks(activeSyncAccountId);
  }
  SyncEngineUtil.fireSyncEngineStateChanged(SyncEngineUtil.SYNC_ENGINE_STATE_STARTED);
}
