{
  String repositoryMappedFileEntryId=_getRepositoryEntryMappedId(fileEntryId);
  ExtRepositoryFileEntry extRepositoryFileEntry=_extRepository.getEntry(ExtRepositoryModelType.FILE,repositoryMappedFileEntryId);
  ExtRepositoryFileVersion extRepositoryFileVersion=null;
  List<ExtRepositoryFileVersion> extRepositoryFileVersions=_extRepository.getFileVersions(extRepositoryFileEntry);
  for (  ExtRepositoryFileVersion curExtRepositoryFileVersion : extRepositoryFileVersions) {
    String curVersion=curExtRepositoryFileVersion.getVersion();
    if (curVersion.equals(version)) {
      extRepositoryFileVersion=curExtRepositoryFileVersion;
      break;
    }
  }
  if (extRepositoryFileVersion != null) {
    InputStream is=_extRepository.getContentStream(extRepositoryFileVersion);
    _extRepository.checkOutFile(repositoryMappedFileEntryId);
    _extRepository.updateFile(repositoryMappedFileEntryId,extRepositoryFileVersion.getMimeType(),is);
    String changeLog="Reverted to " + version;
    _extRepository.checkInFile(repositoryMappedFileEntryId,true,changeLog);
  }
 else {
    throw new NoSuchFileVersionException("No file version with {id=" + extRepositoryFileEntry.getId() + ", version: "+ version+ "}");
  }
}
