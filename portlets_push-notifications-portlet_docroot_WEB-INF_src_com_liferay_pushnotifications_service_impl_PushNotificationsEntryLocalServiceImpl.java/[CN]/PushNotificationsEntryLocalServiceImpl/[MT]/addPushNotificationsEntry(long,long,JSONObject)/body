{
  long pushNotificationsEntryId=counterLocalService.increment();
  PushNotificationsEntry pushNotificationsEntry=pushNotificationsEntryPersistence.create(pushNotificationsEntryId);
  pushNotificationsEntry.setUserId(userId);
  pushNotificationsEntry.setCreateTime(System.currentTimeMillis());
  pushNotificationsEntry.setParentPushNotificationsEntryId(parentPushNotificationsEntryId);
  pushNotificationsEntry.setPayload(payloadJSONObject.toString());
  pushNotificationsEntryPersistence.update(pushNotificationsEntry);
  updateChildrenPushNotificationsEntriesCount(parentPushNotificationsEntryId);
  sendPushNotification(userId,pushNotificationsEntry);
  return pushNotificationsEntry;
}
