{
  UploadPortletRequest uploadPortletRequest=PortalUtil.getUploadPortletRequest(actionRequest);
  String fileName=GetterUtil.getString(uploadPortletRequest.getFileName("file"));
  File file=uploadPortletRequest.getFile("file");
  byte[] bytes=FileUtil.getBytes(file);
  if ((bytes == null) || (bytes.length == 0)) {
    SessionErrors.add(actionRequest,UploadException.class.getName());
  }
 else {
    String deployDir=PrefsPropsUtil.getString(PropsKeys.AUTO_DEPLOY_DEPLOY_DIR);
    FileUtil.copyFile(file.toString(),deployDir + StringPool.SLASH + fileName);
    SessionMessages.add(actionRequest,"pluginUploaded");
  }
  String redirect=ParamUtil.getString(uploadPortletRequest,"redirect");
  actionResponse.sendRedirect(redirect);
}
