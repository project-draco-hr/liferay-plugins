{
  if (liferayPortletURL.getLifecycle().equals(PortletRequest.ACTION_PHASE)) {
    return null;
  }
  String resourceID=liferayPortletURL.getResourceID();
  if (Validator.isNotNull(resourceID)) {
    liferayPortletURL.addParameterIncludedInPath("p_p_id");
    liferayPortletURL.addParameterIncludedInPath("p_p_lifecycle");
    liferayPortletURL.addParameterIncludedInPath("p_p_resource_id");
    liferayPortletURL.addParameterIncludedInPath("p_p_cacheability");
    StringBuilder sb=new StringBuilder();
    sb.append(StringPool.SLASH);
    sb.append(_MAPPING);
    sb.append(StringPool.SLASH);
    sb.append(resourceID);
    return sb.toString();
  }
  WindowState windowState=liferayPortletURL.getWindowState();
  String jspPage=GetterUtil.getString(liferayPortletURL.getParameter("jspPage"));
  if ((windowState == null) || (windowState.equals(WindowState.NORMAL)) || (Validator.isNotNull(jspPage))) {
    liferayPortletURL.addParameterIncludedInPath("p_p_id");
    liferayPortletURL.addParameterIncludedInPath("jspPage");
    StringBuilder sb=new StringBuilder();
    sb.append(StringPool.SLASH);
    sb.append(_MAPPING);
    sb.append(jspPage);
    return sb.toString();
  }
  return null;
}
