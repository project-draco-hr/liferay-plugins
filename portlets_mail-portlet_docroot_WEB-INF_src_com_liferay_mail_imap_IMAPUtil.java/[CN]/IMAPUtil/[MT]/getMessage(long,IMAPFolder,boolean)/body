{
  com.liferay.mail.model.Message storedMessage=null;
  storedMessage=MessageLocalServiceUtil.getRemoteMessage(storedFolderId,oldest);
  if (storedMessage == null) {
    return null;
  }
  long messageId=storedMessage.getRemoteMessageId();
  Message message=getMessage(imapFolder,messageId);
  if (message == null) {
    MessageLocalServiceUtil.deleteMessage(storedMessage);
    return getMessage(storedFolderId,imapFolder,oldest);
  }
 else {
    return message;
  }
}
