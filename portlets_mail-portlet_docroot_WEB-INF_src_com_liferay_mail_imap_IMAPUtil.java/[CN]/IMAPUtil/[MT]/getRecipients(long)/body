{
  try {
    Message message=MessageLocalServiceUtil.getMessage(messageId);
    StringBuilder sb=new StringBuilder();
    sb.append(message.getTo());
    sb.append(StringPool.COMMA);
    sb.append(message.getCc());
    sb.append(StringPool.COMMA);
    sb.append(message.getBcc());
    sb.append(StringPool.COMMA);
    return InternetAddress.parse(sb.toString(),true);
  }
 catch (  AddressException ae) {
    throw new MailException(MailException.MESSAGE_INVALID_ADDRESS,ae);
  }
}
