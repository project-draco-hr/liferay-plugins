{
  try {
    FetchProfile fetchProfile=new FetchProfile();
    fetchProfile.add(UIDFolder.FetchProfileItem.UID);
    imapFolder.fetch(messages,fetchProfile);
    long[] messageIds=new long[messages.length];
    for (int i=0; i < messages.length; i++) {
      Message message=messages[i];
      messageIds[i]=imapFolder.getUID(message);
    }
    return messageIds;
  }
 catch (  MessagingException me) {
    throw new MailException(me);
  }
}
