{
  IMAPFolder imapFolder=null;
  try {
    imapFolder=openFolder(folderId);
    imapFolder.addMessageCountListener(new IMAPMessageCountListener(_user,_account));
    List<javax.mail.Message> messages=getMessages(imapFolder,messageIds,true);
    for (    javax.mail.Message message : messages) {
      message.setFlag(Flags.Flag.DELETED,true);
    }
  }
 catch (  MessagingException me) {
    throw new MailException(me);
  }
 finally {
    closeFolder(imapFolder,true);
  }
}
