{
  String[] actorIds=null;
  try {
    if (userId > 0) {
      if ((searchByUserRoles != null) && searchByUserRoles.booleanValue()) {
        List<Role> roles=RoleLocalServiceUtil.getUserRoles(userId);
        StringBundler sb=new StringBundler();
        sb.append(ListUtil.toString(roles,"roleId"));
        sb.append(StringPool.COMMA);
        sb.append(ListUtil.toString(roles,"name"));
        actorIds=StringUtil.split(sb.toString());
      }
 else {
        User user=UserLocalServiceUtil.getUser(userId);
        actorIds=new String[]{String.valueOf(userId),user.getEmailAddress()};
      }
    }
  }
 catch (  Exception e) {
    throw new WorkflowException(e);
  }
  return actorIds;
}
