{
  if (baseAlloyControllerImpl.permissioned) {
    ThemeDisplay themeDisplay=baseAlloyControllerImpl.themeDisplay;
    Portlet portlet=baseAlloyControllerImpl.portlet;
    AlloyPermission.check(themeDisplay.getPermissionChecker(),themeDisplay.getScopeGroupId(),portlet.getRootPortletId(),baseAlloyControllerImpl.controllerPath,"index");
  }
  Map<String,Serializable> attributes=null;
  String attributesParam=ParamUtil.getString(actionRequest,"attributes");
  if (Validator.isNotNull(attributesParam)) {
    attributes=JSONFactoryUtil.looseDeserialize(attributesParam,HashMap.class);
  }
  String keywords=ParamUtil.getString(actionRequest,"keywords");
  Sort[] sorts=null;
  String sortsParam=ParamUtil.getString(actionRequest,"sorts");
  if (Validator.isNotNull(sortsParam)) {
    Map<String,Boolean> sortsMap=JSONFactoryUtil.looseDeserialize(sortsParam,LinkedHashMap.class);
    sorts=new Sort[sortsMap.size()];
    int i=0;
    for (    Map.Entry<String,Boolean> sort : sortsMap.entrySet()) {
      sorts[i++]=new Sort(sort.getKey(),sort.getValue());
    }
  }
  baseAlloyControllerImpl.portletRequest=actionRequest;
  baseAlloyControllerImpl.request=PortalUtil.getHttpServletRequest(actionRequest);
  AlloySearchResult alloySearchResult=baseAlloyControllerImpl.search(attributes,keywords,sorts);
  List<BaseModel<?>> baseModels=alloySearchResult.getBaseModels();
  return JSONFactoryUtil.looseSerialize(baseModels);
}
