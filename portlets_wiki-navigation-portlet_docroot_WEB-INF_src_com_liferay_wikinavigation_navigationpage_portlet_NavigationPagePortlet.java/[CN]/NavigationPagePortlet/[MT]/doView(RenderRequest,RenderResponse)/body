{
  try {
    PortletPreferences prefs=renderRequest.getPreferences();
    long nodeId=GetterUtil.getLong(prefs.getValue("node-id",StringPool.BLANK));
    String title=prefs.getValue("title",null);
    if ((nodeId > 0) && Validator.isNotNull(title)) {
      WikiPage wikiPage=WikiPageServiceUtil.getPage(nodeId,title);
      List<EntryDisplay> entries=_buildNavigationTree(wikiPage,renderResponse.createRenderURL());
      renderRequest.setAttribute(WebKeys.NAVIGATION_ENTRIES,entries);
      renderRequest.setAttribute(WebKeys.WIKI_PAGE,wikiPage);
    }
  }
 catch (  Exception e) {
    SessionErrors.add(renderRequest,e.getClass().getName(),e);
  }
  super.doView(renderRequest,renderResponse);
}
