{
  PasswordPrompt prompt=new PasswordPrompt(account);
  account=null;
  prompt.addListener(new Window.CloseListener(){
    @Override public void windowClose(    CloseEvent e){
      PasswordPrompt prompt=(PasswordPrompt)e.getWindow();
      mainMailView=new MainMailView();
      mainMailView.setHeight("550px");
      if (prompt.getStatus() == Status.VALIDATED) {
        mainMailView.setEnabled(true);
        try {
          controller.getMailManager().synchronizeAccount(prompt.getAccount().getAccountId());
        }
 catch (        PortalException e1) {
          Controller.get().showError(Lang.get("unable-to-synchronize-account"),e1);
        }
catch (        SystemException e1) {
          Controller.get().showError(Lang.get("unable-to-synchronize-account"),e1);
        }
        window.setContent(mainMailView);
        mainMailView.show(prompt.getAccount());
        mainMailView.update();
      }
 else       if (prompt.getStatus() == Status.CANCELED) {
        window.open(new ExternalResource(summaryViewURL));
      }
    }
  }
);
  window.addWindow(prompt);
  prompt.center();
}
