{
  try {
    if ((eventType.equals(SyncWatchEvent.EVENT_TYPE_CREATE) && FileUtil.isIgnoredFilePath(filePath)) || !FileUtil.isValidFileName(String.valueOf(filePath.getFileName()))) {
      return;
    }
    String parentFilePathName=FilePathNameUtil.getFilePathName(filePath.getParent());
    String filePathName=FilePathNameUtil.getFilePathName(filePath);
    SyncAccount syncAccount=SyncAccountService.fetchSyncAccount(getSyncAccountId());
    if (filePathName.equals(syncAccount.getFilePathName()) || parentFilePathName.equals(syncAccount.getFilePathName())) {
      return;
    }
    SyncFile parentSyncFile=SyncFileService.fetchSyncFile(parentFilePathName,getSyncAccountId());
    if (parentSyncFile == null) {
      Thread.sleep(1000);
      addSyncWatchEvent(eventType,filePath);
      return;
    }
    SyncSite syncSite=SyncSiteService.fetchSyncSite(parentSyncFile.getRepositoryId(),getSyncAccountId());
    Set<Long> activeSyncSiteIds=SyncSiteService.getActiveSyncSiteIds(getSyncAccountId());
    if (!activeSyncSiteIds.contains(syncSite.getSyncSiteId())) {
      return;
    }
    SyncWatchEventService.addSyncWatchEvent(eventType,filePathName,getFileType(eventType,filePath),getSyncAccountId());
  }
 catch (  Exception e) {
    _logger.error(e.getMessage(),e);
  }
}
