{
  ThemeDisplay themeDisplay=(ThemeDisplay)renderRequest.getAttribute(WebKeys.THEME_DISPLAY);
  try {
    if (themeDisplay.isSignedIn()) {
      HttpServletRequest request=PortalUtil.getHttpServletRequest(renderRequest);
      HttpSession session=request.getSession();
      String memberRequestKey=(String)session.getAttribute(WebKeys.MEMBER_REQUEST_KEY);
      if (Validator.isNotNull(memberRequestKey)) {
        MemberRequestLocalServiceUtil.updateMemberRequest(memberRequestKey,themeDisplay.getUserId());
        session.removeAttribute(WebKeys.MEMBER_REQUEST_KEY);
      }
    }
    List<SocialRequest> socialRequests=SocialRequestLocalServiceUtil.getReceiverUserRequests(themeDisplay.getUserId(),SocialRequestConstants.STATUS_PENDING,QueryUtil.ALL_POS,QueryUtil.ALL_POS);
    List<MemberRequest> memberRequests=MemberRequestLocalServiceUtil.getReceiverStatusMemberRequest(themeDisplay.getUserId(),InviteMembersConstants.STATUS_PENDING,QueryUtil.ALL_POS,QueryUtil.ALL_POS);
    if (socialRequests.isEmpty() && memberRequests.isEmpty()) {
      renderRequest.setAttribute(WebKeys.PORTLET_DECORATE,Boolean.FALSE);
    }
    include(viewTemplate,renderRequest,renderResponse);
  }
 catch (  Exception e) {
    super.doView(renderRequest,renderResponse);
  }
}
