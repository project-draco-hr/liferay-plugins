{
  User user=userPersistence.findByPrimaryKey(serviceContext.getGuestOrUserId());
  Date now=new Date();
  long kaleoNotificationRecipientId=counterLocalService.increment();
  KaleoNotificationRecipient kaleoNotificationRecipient=kaleoNotificationRecipientPersistence.create(kaleoNotificationRecipientId);
  kaleoNotificationRecipient.setCompanyId(user.getCompanyId());
  kaleoNotificationRecipient.setUserId(user.getUserId());
  kaleoNotificationRecipient.setUserName(user.getFullName());
  kaleoNotificationRecipient.setCreateDate(now);
  kaleoNotificationRecipient.setModifiedDate(now);
  kaleoNotificationRecipient.setKaleoDefinitionId(kaleoDefinitionId);
  kaleoNotificationRecipient.setKaleoNotificationId(kaleoNotificationId);
  kaleoNotificationRecipient.setEmailRecipientType(recipient.getEmailRecipientType());
  setRecipient(kaleoNotificationRecipient,recipient,serviceContext);
  kaleoNotificationRecipientPersistence.update(kaleoNotificationRecipient);
  return kaleoNotificationRecipient;
}
