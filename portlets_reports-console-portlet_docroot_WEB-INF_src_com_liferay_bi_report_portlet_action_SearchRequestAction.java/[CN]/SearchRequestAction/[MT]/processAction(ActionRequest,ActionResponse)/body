{
  actionResponse.setRenderParameter(TABS,actionRequest.getParameter(TABS));
  int cur=ParamUtil.getInteger(actionRequest,ReportDefinitionSearch.DEFAULT_CUR_PARAM,ReportDefinitionSearch.DEFAULT_CUR);
  int delta=ParamUtil.getInteger(actionRequest,ReportDefinitionSearch.DEFAULT_DELTA_PARAM,ReportDefinitionSearch.DEFAULT_DELTA);
  int start=(cur - 1) * delta;
  int end=start + delta;
  int total=0;
  List<RequestedReport> requestedReports=EMPTY_LIST;
  long requestId=ParamUtil.getLong(actionRequest,"requestId",-1);
  long definitionId=ParamUtil.getLong(actionRequest,"definitionId",-1);
  try {
    if (requestId > 0) {
      requestedReports.add(RequestedReportLocalServiceUtil.getRequestedReport(requestId));
      total=1;
    }
    if (definitionId > 0) {
      total=RequestedReportLocalServiceUtil.countByDefinitionId(definitionId);
      if (total > 0) {
        requestedReports=RequestedReportLocalServiceUtil.findByDefinitionId(definitionId,start,end);
      }
    }
 else {
      total=RequestedReportLocalServiceUtil.getRequestedReportsCount();
      if (total > 0) {
        requestedReports=RequestedReportLocalServiceUtil.getRequestedReports(start,end);
      }
    }
    actionRequest.setAttribute(SEARCH_RESULTS_ATTRIBUTE,requestedReports);
    actionRequest.setAttribute(SEARCH_TOTAL_ATTRIBUTE,total);
    actionResponse.setRenderParameter(ReportDefinitionSearch.DEFAULT_CUR_PARAM,String.valueOf(cur));
    actionResponse.setRenderParameter(ReportDefinitionSearch.DEFAULT_DELTA_PARAM,String.valueOf(delta));
  }
 catch (  PortalException e) {
    throw new PortletException("Unable to retrieve rquested report",e);
  }
catch (  SystemException e) {
    throw new PortletException("Unable to retrieve rquested report",e);
  }
  return false;
}
