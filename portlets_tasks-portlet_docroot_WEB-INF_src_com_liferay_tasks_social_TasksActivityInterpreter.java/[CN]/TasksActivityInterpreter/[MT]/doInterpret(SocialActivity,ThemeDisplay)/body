{
  TasksEntry tasksEntry=TasksEntryLocalServiceUtil.getTasksEntry(activity.getClassPK());
  long userId=activity.getUserId();
  long receiverUserId=activity.getReceiverUserId();
  int activityType=activity.getType();
  String link=StringPool.BLANK;
  String titlePattern=null;
  if (activityType == TasksActivityKeys.ADD_ENTRY) {
    if ((userId != receiverUserId) && (receiverUserId != 0)) {
      titlePattern="activity-tasks-add-entry-for";
    }
 else {
      titlePattern="activity-tasks-add-entry";
    }
  }
 else   if (activityType == TasksActivityKeys.REOPEN_ENTRY) {
    if ((userId != receiverUserId) && (receiverUserId != 0)) {
      titlePattern="activity-tasks-reopened-entry-for";
    }
 else {
      titlePattern="activity-tasks-reopened-entry";
    }
  }
 else   if (activityType == TasksActivityKeys.RESOLVE_ENTRY) {
    if ((userId != receiverUserId) && (receiverUserId != 0)) {
      titlePattern="activity-tasks-resolved-entry-for";
    }
 else {
      titlePattern="activity-tasks-resolved-entry";
    }
    userId=tasksEntry.getResolverUserId();
    receiverUserId=tasksEntry.getUserId();
  }
 else   if (activityType == TasksActivityKeys.UPDATE_ENTRY) {
    if ((userId != receiverUserId) && (receiverUserId != 0)) {
      titlePattern="activity-tasks-update-entry-for";
    }
 else {
      titlePattern="activity-tasks-update-entry";
    }
  }
  String creatorUserName=getUserName(userId,themeDisplay);
  String receiverUserName=getUserName(receiverUserId,themeDisplay);
  Object[] titleArguments=new Object[]{creatorUserName,receiverUserName};
  String title=themeDisplay.translate(titlePattern,titleArguments);
  String body=getValue(activity.getExtraData(),"title",tasksEntry.getTitle());
  return new SocialActivityFeedEntry(link,title,body);
}
