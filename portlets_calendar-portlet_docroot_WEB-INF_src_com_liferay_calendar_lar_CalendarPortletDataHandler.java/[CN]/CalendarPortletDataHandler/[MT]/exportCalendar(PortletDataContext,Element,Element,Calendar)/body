{
  String path=getCalendarPath(portletDataContext,calendar);
  if (!portletDataContext.isPathNotProcessed(path)) {
    return;
  }
  if (portletDataContext.getBooleanParameter(NAMESPACE,"bookings")) {
    List<CalendarBooking> calendarBookings=CalendarBookingLocalServiceUtil.getCalendarBookings(calendar.getCalendarId());
    for (    CalendarBooking calendarBooking : calendarBookings) {
      exportCalendarBooking(portletDataContext,calendarBookingsElement,calendarBooking);
    }
  }
  Element calendarElement=calendarsElement.addElement("calendar");
  portletDataContext.addClassedModel(calendarElement,path,calendar,NAMESPACE);
}
