{
  Group group=GroupLocalServiceUtil.getGroup(groupId);
  PortletPreferences groupPortletPreferences=PortletPreferencesLocalServiceUtil.getPreferences(group.getCompanyId(),groupId,PortletKeys.PREFS_OWNER_TYPE_GROUP,0,servicePackageName);
  ServiceGroupSettings serviceGroupSettings=new ServiceGroupSettings(groupPortletPreferences);
  PortletPreferences companyPortletPreferences=PortletPreferencesLocalServiceUtil.getPreferences(group.getCompanyId(),group.getCompanyId(),PortletKeys.PREFS_OWNER_TYPE_GROUP_DEFAULTS_COMPANY,0,servicePackageName);
  serviceGroupSettings.setCompanyPortletPreferences(companyPortletPreferences);
  serviceGroupSettings.setPortalProperties(getPortalProperties(servicePackageName));
  return serviceGroupSettings;
}
