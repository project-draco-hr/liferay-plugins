{
  int activityType=activity.getType();
  JSONObject extraData=null;
  if (Validator.isNotNull(activity.getExtraData())) {
    extraData=JSONFactoryUtil.createJSONObject(activity.getExtraData());
  }
  String link=getLink(activity,themeDisplay);
  String text=StringPool.BLANK;
  if (activityType == JIRAActivityKeys.ADD_CHANGE) {
    text=interpretJIRAChangeItems(extraData.getJSONArray("jiraChangeItems"),themeDisplay);
  }
 else   if (activityType == JIRAActivityKeys.ADD_COMMENT) {
    long jiraActionId=extraData.getLong("jiraActionId");
    JIRAAction jiraAction=JIRAActionLocalServiceUtil.getJIRAAction(jiraActionId);
    text=HtmlUtil.escape(jiraAction.getBody());
  }
 else   if (activityType == JIRAActivityKeys.ADD_ISSUE) {
    JIRAIssue jiraIssue=JIRAIssueLocalServiceUtil.getJIRAIssue(activity.getClassPK());
    text=HtmlUtil.escape(jiraIssue.getSummary());
  }
  return wrapLink(link,text);
}
