{
  int activityType=activity.getType();
  JSONObject extraData=null;
  if (Validator.isNotNull(activity.getExtraData())) {
    extraData=JSONFactoryUtil.createJSONObject(activity.getExtraData());
  }
  String link=getLink(activity,themeDisplay);
  StringBundler sb=new StringBundler(5);
  sb.append("<a href=\"");
  sb.append(link);
  sb.append("\" target=\"_blank\">");
  if (activityType == JIRAActivityKeys.ADD_CHANGE) {
    sb.append(interpretJIRAChangeItems(extraData.getJSONArray("jiraChangeItems"),themeDisplay));
  }
 else   if (activityType == JIRAActivityKeys.ADD_COMMENT) {
    long jiraActionId=extraData.getLong("jiraActionId");
    JIRAAction jiraAction=JIRAActionLocalServiceUtil.getJIRAAction(jiraActionId);
    sb.append(HtmlUtil.escape(jiraAction.getBody()));
  }
 else   if (activityType == JIRAActivityKeys.ADD_ISSUE) {
    JIRAIssue jiraIssue=JIRAIssueLocalServiceUtil.getJIRAIssue(activity.getClassPK());
    sb.append(HtmlUtil.escape(jiraIssue.getSummary()));
  }
  sb.append("</a>");
  return sb.toString();
}
