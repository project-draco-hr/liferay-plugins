{
  WorkflowInstance workflowInstance=WorkflowInstanceManagerUtil.startWorkflowInstance(defaultUserId,DEFINITION_NAME_3,_workflowDefinition.getVersion(),null,null);
  List<WorkflowInstance> childrenWorkflowInstances=workflowInstance.getChildrenWorkflowInstances();
  assertEquals(3,childrenWorkflowInstances.size());
  WorkflowInstance childWorkflowInstance1=childrenWorkflowInstances.get(0);
  List<WorkflowTask> childWorkflowTasks1=WorkflowTaskManagerUtil.getWorkflowTasksByWorkflowInstance(childWorkflowInstance1.getWorkflowInstanceId(),null,QueryUtil.ALL_POS,QueryUtil.ALL_POS,new WorkflowTaskNameComparator(true));
  assertEquals(1,childWorkflowTasks1.size());
  WorkflowTask workflowTask1=childWorkflowTasks1.get(0);
  workflowTask1=WorkflowTaskManagerUtil.assignWorkflowTaskToRole(defaultUserId,workflowTask1.getWorkflowTaskId(),guestRoleId,null,null);
  workflowTask1=WorkflowTaskManagerUtil.assignWorkflowTaskToUser(defaultUserId,workflowTask1.getWorkflowTaskId(),defaultUserId,null,null);
  List<String> nextTransitionNames1=WorkflowTaskManagerUtil.getNextTransitionNames(defaultUserId,workflowTask1.getWorkflowTaskId());
  assertEquals(1,nextTransitionNames1.size());
  assertEquals("toJoinNode",nextTransitionNames1.get(0));
  WorkflowInstance childWorkflowInstance2=childrenWorkflowInstances.get(1);
  List<WorkflowTask> childWorkflowTasks2=WorkflowTaskManagerUtil.getWorkflowTasksByWorkflowInstance(childWorkflowInstance2.getWorkflowInstanceId(),null,QueryUtil.ALL_POS,QueryUtil.ALL_POS,new WorkflowTaskNameComparator(true));
  assertEquals(1,childWorkflowTasks2.size());
  WorkflowTask workflowTask2=childWorkflowTasks2.get(0);
  workflowTask2=WorkflowTaskManagerUtil.assignWorkflowTaskToRole(defaultUserId,workflowTask2.getWorkflowTaskId(),guestRoleId,null,null);
  workflowTask2=WorkflowTaskManagerUtil.assignWorkflowTaskToUser(defaultUserId,workflowTask2.getWorkflowTaskId(),defaultUserId,null,null);
  List<String> nextTransitionNames2=WorkflowTaskManagerUtil.getNextTransitionNames(defaultUserId,workflowTask2.getWorkflowTaskId());
  assertEquals(1,nextTransitionNames2.size());
  assertEquals("toTaskNode4",nextTransitionNames2.get(0));
  WorkflowInstance childWorkflowInstance3=childrenWorkflowInstances.get(2);
  List<WorkflowTask> childWorkflowTasks3=WorkflowTaskManagerUtil.getWorkflowTasksByWorkflowInstance(childWorkflowInstance3.getWorkflowInstanceId(),null,QueryUtil.ALL_POS,QueryUtil.ALL_POS,new WorkflowTaskNameComparator(true));
  assertEquals(1,childWorkflowTasks3.size());
  WorkflowTask workflowTask3=childWorkflowTasks3.get(0);
  workflowTask3=WorkflowTaskManagerUtil.assignWorkflowTaskToRole(defaultUserId,workflowTask3.getWorkflowTaskId(),guestRoleId,null,null);
  workflowTask3=WorkflowTaskManagerUtil.assignWorkflowTaskToUser(defaultUserId,workflowTask3.getWorkflowTaskId(),defaultUserId,null,null);
  List<String> nextTransitionNames3=WorkflowTaskManagerUtil.getNextTransitionNames(defaultUserId,workflowTask3.getWorkflowTaskId());
  assertEquals(1,nextTransitionNames3.size());
  assertEquals("toJoinNode",nextTransitionNames3.get(0));
  WorkflowInstanceManagerUtil.deleteWorkflowInstance(workflowInstance.getWorkflowInstanceId());
}
