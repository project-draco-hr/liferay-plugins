{
  WorkflowInstance workflowInstance=WorkflowInstanceManagerUtil.startWorkflowInstance(USER.getUserId(),NAME_3,_workflowDefinition.getVersion(),null,null);
  long[] roleIds=USER.getRoleIds();
  assertTrue(roleIds.length > 0);
  int count=WorkflowTaskManagerUtil.getWorkflowTaskCountByWorkflowInstance(workflowInstance.getWorkflowInstanceId(),null);
  assertEquals(0,count);
  workflowInstance=WorkflowInstanceManagerUtil.getWorkflowInstance(workflowInstance.getWorkflowInstanceId());
  List<WorkflowInstance> childrenWorkflowInstances=workflowInstance.getChildren();
  for (  WorkflowInstance childWorkflowInstance : childrenWorkflowInstances) {
    List<WorkflowTask> childWorkflowTasks=WorkflowTaskManagerUtil.getWorkflowTasksByWorkflowInstance(childWorkflowInstance.getWorkflowInstanceId(),null,QueryUtil.ALL_POS,QueryUtil.ALL_POS,new WorkflowTaskNameComparator(true));
    assertEquals(1,childWorkflowTasks.size());
    childWorkflowTasks=WorkflowTaskManagerUtil.getWorkflowTasksByWorkflowInstance(childWorkflowInstance.getWorkflowInstanceId(),Boolean.TRUE,QueryUtil.ALL_POS,QueryUtil.ALL_POS,new WorkflowTaskNameComparator(true));
    assertEquals(0,childWorkflowTasks.size());
    childWorkflowTasks=WorkflowTaskManagerUtil.getWorkflowTasksByWorkflowInstance(childWorkflowInstance.getWorkflowInstanceId(),Boolean.FALSE,QueryUtil.ALL_POS,QueryUtil.ALL_POS,new WorkflowTaskNameComparator(true));
    assertEquals(1,childWorkflowTasks.size());
  }
  WorkflowInstanceManagerUtil.deleteWorkflowInstance(workflowInstance.getWorkflowInstanceId());
}
