{
  int start=0;
  if (curStartValues.length > (cur - SearchContainer.DEFAULT_CUR)) {
    start=curStartValues[cur - SearchContainer.DEFAULT_CUR];
    curStartValues=ArrayUtil.subset(curStartValues,0,cur - SearchContainer.DEFAULT_CUR + 1);
  }
 else {
    cur=SearchContainer.DEFAULT_CUR;
    curStartValues=new int[]{0};
  }
  int end=start + _INTERVAL;
  List<Template> templates=new ArrayList<Template>();
  int curStartValue=0;
  while (curStartValue == 0) {
    List<Template> curTemplates=templateLocalService.search(groupId,title,content,startDate,endDate,andOperator,start,end,orderByComparator);
    if (curTemplates.isEmpty()) {
      break;
    }
    for (int i=0; i < curTemplates.size(); i++) {
      Template curTemplate=curTemplates.get(i);
      if (!TemplatePermission.contains(getPermissionChecker(),curTemplate,ActionKeys.VIEW)) {
        continue;
      }
      if (templates.size() == delta) {
        curStartValue=start + i;
        break;
      }
      templates.add(curTemplate);
    }
    start=start + _INTERVAL;
    end=start + _INTERVAL;
  }
  int total=((cur - 1) * delta) + templates.size();
  if (curStartValue > 0) {
    curStartValues=ArrayUtil.append(curStartValues,curStartValue);
    total=total + 1;
  }
  return new TemplateSearchDisplayImpl(templates,total,curStartValues);
}
