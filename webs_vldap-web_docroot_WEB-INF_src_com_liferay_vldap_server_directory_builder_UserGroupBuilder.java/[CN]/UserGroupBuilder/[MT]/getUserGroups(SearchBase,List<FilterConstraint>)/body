{
  if (filterConstraints == null) {
    return UserGroupLocalServiceUtil.getUserGroups(searchBase.getCompanyId());
  }
  List<UserGroup> userGroups=new ArrayList<UserGroup>();
  for (  FilterConstraint filterConstraint : filterConstraints) {
    if (!isValidFilterConstraint(filterConstraint)) {
      continue;
    }
    String name=filterConstraint.getValue("ou");
    if (name == null) {
      name=filterConstraint.getValue("cn");
    }
    String description=filterConstraint.getValue("description");
    String member=filterConstraint.getValue("member");
    String screenName=LdapUtil.getRdnValue(new Dn(member),3);
    if (screenName != null) {
      User user=UserLocalServiceUtil.getUserByScreenName(searchBase.getCompanyId(),screenName);
      for (      UserGroup userGroup : user.getUserGroups()) {
        if ((name != null) && !name.equals(userGroup.getName())) {
          continue;
        }
        if ((description != null) && !description.equals(userGroup.getDescription())) {
          continue;
        }
        userGroups.add(userGroup);
      }
    }
 else {
      userGroups.addAll(UserGroupLocalServiceUtil.search(searchBase.getCompanyId(),name,description,null,0,(int)searchBase.getSizeLimit(),null));
    }
  }
  return userGroups;
}
