{
  try {
    ServiceContext serviceContext=ServiceContextThreadLocal.getServiceContext();
    if (serviceContext != null) {
      Map<String,String> headers=serviceContext.getHeaders();
      String refererURL=headers.get(WebKeys.REFERER);
      String portletId=HttpUtil.getParameter(refererURL,"p_p_id",false);
      String memberRequestKey=HttpUtil.getParameter(refererURL,PortalUtil.getPortletNamespace(portletId) + "key",false);
      if (Validator.isNotNull(memberRequestKey)) {
        MemberRequestLocalServiceUtil.updateMemberRequest(memberRequestKey,user.getUserId());
      }
    }
  }
 catch (  Exception e) {
    throw new ModelListenerException(e);
  }
}
