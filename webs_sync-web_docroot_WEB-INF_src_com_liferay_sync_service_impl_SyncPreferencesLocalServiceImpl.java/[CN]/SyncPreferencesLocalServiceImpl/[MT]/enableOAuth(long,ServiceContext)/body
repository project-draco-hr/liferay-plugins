{
  long oAuthApplicationId=PrefsPropsUtil.getLong(companyId,PortletPropsKeys.SYNC_OAUTH_APPLICATION_ID,0);
  OAuthApplication oAuthApplication=OAuthApplicationLocalServiceUtil.fetchOAuthApplication(oAuthApplicationId);
  if (oAuthApplication != null) {
    return oAuthApplication;
  }
  oAuthApplication=OAuthApplicationLocalServiceUtil.addOAuthApplication(serviceContext.getUserId(),"Liferay Sync",StringPool.BLANK,OAuthApplicationConstants.ACCESS_WRITE,true,"http://liferay-sync","http://liferay-sync",serviceContext);
  Class<?> clazz=getClass();
  ClassLoader classLoader=clazz.getClassLoader();
  InputStream inputStream=classLoader.getResourceAsStream("/resources/images/logo.png");
  OAuthApplicationLocalServiceUtil.updateLogo(oAuthApplication.getOAuthApplicationId(),inputStream);
  return oAuthApplication;
}
