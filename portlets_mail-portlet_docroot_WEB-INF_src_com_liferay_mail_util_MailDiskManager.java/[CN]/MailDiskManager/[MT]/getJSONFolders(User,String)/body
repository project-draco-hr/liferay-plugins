{
  String accountPath=getAccountPath(user,emailAddress);
  String[] folderNames=FileUtil.listDirs(accountPath);
  JSONObject jsonObj=JSONFactoryUtil.createJSONObject();
  JSONArray jsonArray=JSONFactoryUtil.createJSONArray();
  jsonObj.put("folders",jsonArray);
  for (  String folderName : folderNames) {
    try {
      String decodedFolderName=URLDecoder.decode(folderName,"UTF-8");
      JSONObject jsonFolder=getJSONFolder(user,emailAddress,decodedFolderName);
      if (Validator.isNull(jsonFolder)) {
        continue;
      }
      jsonFolder.put("name",decodedFolderName);
      jsonArray.put(jsonFolder);
    }
 catch (    UnsupportedEncodingException uee) {
      _log.error(uee,uee);
    }
  }
  return jsonObj;
}
