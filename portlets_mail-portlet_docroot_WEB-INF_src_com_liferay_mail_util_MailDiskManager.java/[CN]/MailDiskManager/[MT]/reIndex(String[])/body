{
  if (SearchEngineUtil.isIndexReadOnly()) {
    return;
  }
  long companyId=GetterUtil.getLong(ids[0]);
  String rootPath=PortletProps.get("disk.root.dir") + "/";
  String[] userIds=FileUtil.listDirs(rootPath);
  try {
    for (    String userIdStr : userIds) {
      long userId=0;
      long groupId=0;
      try {
        userId=GetterUtil.getLong(userIdStr);
        groupId=UserServiceUtil.getUserById(userId).getGroup().getGroupId();
      }
 catch (      Exception e) {
        _log.error(e,e);
        continue;
      }
      String userPath=rootPath + userId + "/";
      if (!FileUtil.exists(userPath)) {
        continue;
      }
      String[] emailAddresses=FileUtil.listDirs(userPath + "/");
      for (      String emailAddress : emailAddresses) {
        _reIndexAccount(companyId,groupId,userId,userPath,emailAddress);
      }
    }
  }
 catch (  Exception e) {
    throw new SystemException(e);
  }
}
