{
  JSONObject jsonObj=JSONFactoryUtil.createJSONObject();
  try {
    String filePath=_getAccountFilePath(user,mailAccount.getEmailAddress());
    jsonObj.put("emailAddress",mailAccount.getEmailAddress());
    jsonObj.put("initialized",mailAccount.isInitialized());
    jsonObj.put("mailInHostName",mailAccount.getMailInHostName());
    jsonObj.put("mailInPort",mailAccount.getMailInPort());
    jsonObj.put("mailInSecure",mailAccount.isMailInSecure());
    jsonObj.put("mailOutHostName",mailAccount.getMailOutHostName());
    jsonObj.put("mailOutPort",mailAccount.getMailOutPort());
    jsonObj.put("mailOutSecure",mailAccount.isMailOutSecure());
    jsonObj.put("password",MailPasswordUtil.encrypt(mailAccount.getPassword()));
    jsonObj.put("username",mailAccount.getUsername());
    FileUtil.write(filePath,jsonObj.toString());
  }
 catch (  IOException ioe) {
    _log.error(ioe,ioe);
    return null;
  }
  return jsonObj;
}
