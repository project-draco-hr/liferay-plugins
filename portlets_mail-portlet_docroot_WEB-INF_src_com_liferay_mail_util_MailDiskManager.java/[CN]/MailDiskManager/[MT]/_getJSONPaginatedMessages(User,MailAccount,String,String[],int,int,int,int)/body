{
  int begin=(messagesOnDiskCount + 1) - (messagesPerPage * pageNumber) - 1;
  int end=messagesOnDiskCount - (messagesPerPage * (pageNumber - 1)) - 1;
  if (begin < 0) {
    begin=0;
  }
  double pageCount=Math.ceil((double)messageCount / messagesPerPage);
  JSONObject jsonObj=new JSONObject();
  JSONArray jsonArray=new JSONArray();
  JSONUtil.put(jsonObj,"messages",jsonArray);
  JSONUtil.put(jsonObj,"messageCount",messageCount);
  JSONUtil.put(jsonObj,"messagesPerPage",messagesPerPage);
  JSONUtil.put(jsonObj,"pageCount",(int)pageCount);
  JSONUtil.put(jsonObj,"pageNumber",pageNumber);
  for (int i=begin; i <= end; i++) {
    jsonArray.put(getJSONMessageByUid(user,mailAccount,folderName,messageUidsOnDisk[i]));
  }
  return jsonObj;
}
