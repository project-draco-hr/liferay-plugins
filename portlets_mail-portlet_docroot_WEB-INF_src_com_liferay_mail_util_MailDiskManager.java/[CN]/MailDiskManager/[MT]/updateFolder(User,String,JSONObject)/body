{
  if (!isAccountExists(user,emailAddress)) {
    return;
  }
  try {
    String fullName=folder.getString("fullName");
    double messageCount=folder.getInt("messageCount") * 1.0;
    int downloadedMessages=getMessageUidsByFolder(user,emailAddress,fullName).length;
    int percentageDownloaded=(int)((downloadedMessages / messageCount) * 100);
    String filePath=_getFolderFilePath(user,emailAddress,fullName);
    folder.put("percentageDownloaded",percentageDownloaded);
    folder.put("initialized",true);
    folder.put("lastUpdated",new Date());
    FileUtil.write(filePath,folder.toString());
  }
 catch (  IOException ioe) {
    _log.error(ioe,ioe);
  }
}
