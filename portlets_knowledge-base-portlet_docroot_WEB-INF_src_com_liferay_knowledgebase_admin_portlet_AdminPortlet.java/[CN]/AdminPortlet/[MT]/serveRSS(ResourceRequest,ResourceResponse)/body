{
  ThemeDisplay themeDisplay=(ThemeDisplay)resourceRequest.getAttribute(WebKeys.THEME_DISPLAY);
  long resourcePrimKey=ParamUtil.getLong(resourceRequest,"resourcePrimKey");
  int max=ParamUtil.getInteger(resourceRequest,"max",SearchContainer.DEFAULT_DELTA);
  String type=ParamUtil.getString(resourceRequest,"type",RSSUtil.DEFAULT_TYPE);
  double version=ParamUtil.getDouble(resourceRequest,"version",RSSUtil.DEFAULT_VERSION);
  String displayStyle=ParamUtil.getString(resourceRequest,"displayStyle",RSSUtil.DISPLAY_STYLE_FULL_CONTENT);
  String portletId=PortalUtil.getPortletId(resourceRequest);
  String rss=StringPool.BLANK;
  if (resourcePrimKey <= 0) {
    rss=ArticleServiceUtil.getGroupArticlesRSS(portletId,max,type,version,displayStyle,isServeRSSMaximized(resourceRequest),themeDisplay);
  }
 else {
    rss=ArticleServiceUtil.getArticlesRSS(portletId,resourcePrimKey,max,type,version,displayStyle,isServeRSSMaximized(resourceRequest),themeDisplay);
  }
  PortletResponseUtil.sendFile(resourceRequest,resourceResponse,null,rss.getBytes(StringPool.UTF8),ContentTypes.TEXT_XML_UTF8);
}
