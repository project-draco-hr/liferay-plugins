{
  KaleoTaskInstanceToken kaleoTaskInstanceToken=kaleoTaskInstanceTokenPersistence.findByPrimaryKey(kaleoTaskInstanceTokenId);
  kaleoTaskInstanceToken.setCompletionUserId(serviceContext.getUserId());
  kaleoTaskInstanceToken.setCompleted(true);
  kaleoTaskInstanceToken.setCompletionDate(new Date());
  kaleoTaskInstanceTokenPersistence.update(kaleoTaskInstanceToken,false);
  kaleoTaskAssignmentInstanceLocalService.completeKaleoTaskInstanceToken(kaleoTaskInstanceTokenId,serviceContext);
  kaleoInstanceTokenLocalService.completeKaleoInstanceToken(kaleoTaskInstanceToken.getKaleoInstanceTokenId());
  KaleoTask kaleoTask=kaleoTaskInstanceToken.getKaleoTask();
  List<KaleoTimer> kaleoTimers=kaleoTimerLocalService.getKaleoTimers(kaleoTask.getKaleoNodeId());
  kaleoTimerInstanceTokenLocalService.completeKaleoTimerInstanceTokens(kaleoTaskInstanceToken.getKaleoInstanceId(),kaleoTimers,serviceContext);
  return kaleoTaskInstanceToken;
}
