{
  HttpClientBuilder httpClientBuilder=HttpClients.custom();
  PoolingHttpClientConnectionManager poolingHttpClientConnectionManager=new PoolingHttpClientConnectionManager(60000,TimeUnit.MILLISECONDS);
  poolingHttpClientConnectionManager.setMaxTotal(20);
  httpClientBuilder.setConnectionManager(poolingHttpClientConnectionManager);
  if ((_login != null) && (_password != null)) {
    CredentialsProvider credentialsProvider=new BasicCredentialsProvider();
    credentialsProvider.setCredentials(new AuthScope(_hostName,_hostPort),new UsernamePasswordCredentials(_login,_password));
    httpClientBuilder.setDefaultCredentialsProvider(credentialsProvider);
  }
 else {
    if (_logger.isWarnEnabled()) {
      _logger.warn("Login and password are required");
    }
  }
  try {
    setSSLConnectionSocketFactory(httpClientBuilder);
    _closeableHttpClient=httpClientBuilder.build();
    if (_logger.isDebugEnabled()) {
      _logger.debug("Configured client for " + _protocol + "://"+ _hostName);
    }
  }
 catch (  Exception e) {
    _logger.error("Unable to configure client",e);
  }
}
