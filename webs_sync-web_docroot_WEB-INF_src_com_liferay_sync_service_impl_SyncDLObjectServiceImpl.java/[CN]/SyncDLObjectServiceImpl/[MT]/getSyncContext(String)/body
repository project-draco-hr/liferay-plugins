{
  SyncContext syncContext=new SyncContext();
  PluginPackage syncWebPluginPackage=DeployManagerUtil.getInstalledPluginPackage("sync-web");
  syncContext.setPluginVersion(syncWebPluginPackage.getVersion());
  syncContext.setPortalBuildNumber(ReleaseInfo.getBuildNumber());
  PluginPackage soPortletPluginPackage=DeployManagerUtil.getInstalledPluginPackage("so-portlet");
  if (soPortletPluginPackage != null) {
    syncContext.setSocialOfficeInstalled(true);
  }
 else {
    syncContext.setSocialOfficeInstalled(false);
  }
  syncContext.setUserId(getUserId());
  syncContext.setUserSitesGroups(getUserSitesGroups());
  return syncContext;
}
