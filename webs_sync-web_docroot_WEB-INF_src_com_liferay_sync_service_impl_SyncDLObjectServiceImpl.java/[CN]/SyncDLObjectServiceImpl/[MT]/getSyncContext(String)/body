{
  SyncContext syncContext=new SyncContext();
  PluginPackage pluginPackage=DeployManagerUtil.getInstalledPluginPackage("sync-web");
  syncContext.setPluginVersion(pluginPackage.getVersion());
  syncContext.setPortalBuildNumber(ReleaseInfo.getBuildNumber());
  try {
    String digest=getLicenseDigest("Portal",uuid,LicenseManager.STATE_GOOD);
    syncContext.setPortalEELicenseDigest(digest);
  }
 catch (  Exception e) {
    syncContext.setPortalEELicenseDigest(StringPool.BLANK);
  }
  try {
    SocialOfficeServiceUtil.getService();
    syncContext.setSocialOfficeInstalled(true);
    try {
      String digest=getLicenseDigest("Social Office EE",uuid,LicenseManager.STATE_GOOD);
      syncContext.setSocialOfficeEELicenseDigest(digest);
    }
 catch (    Exception e) {
      syncContext.setSocialOfficeEELicenseDigest(StringPool.BLANK);
    }
  }
 catch (  BeanLocatorException ble) {
    syncContext.setSocialOfficeInstalled(false);
  }
  syncContext.setUserId(getUserId());
  syncContext.setUserSitesGroups(getUserSitesGroups());
  return syncContext;
}
