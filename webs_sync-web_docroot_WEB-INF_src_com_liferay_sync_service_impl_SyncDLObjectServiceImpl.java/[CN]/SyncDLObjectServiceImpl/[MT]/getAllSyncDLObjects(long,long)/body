{
  try {
    SyncUtil.checkSyncEnabled(repositoryId);
    long lastAccessTime=System.currentTimeMillis();
    long companyId=0;
    Repository repository=repositoryLocalService.fetchRepository(repositoryId);
    if (repository != null) {
      companyId=repository.getCompanyId();
    }
 else {
      Group group=groupLocalService.getGroup(repositoryId);
      companyId=group.getCompanyId();
    }
    List<SyncDLObject> syncDLObjects=syncDLObjectPersistence.findByC_M_R(companyId,0,repositoryId);
    return new SyncDLObjectUpdate(syncDLObjects,syncDLObjects.size(),lastAccessTime);
  }
 catch (  PortalException pe) {
    throw new PortalException(SyncUtil.buildExceptionMessage(pe),pe);
  }
}
