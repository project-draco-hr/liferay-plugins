{
  String rootHomeMarkdown=null;
  for (  String zipEntry : zipReader.getEntries()) {
    if (zipEntry.endsWith(".markdown") || zipEntry.endsWith(".md")) {
      int lastSlash=zipEntry.lastIndexOf(StringPool.SLASH);
      if (lastSlash == -1) {
        if (zipEntry.equals(_HOME_MARKDOWN)) {
          rootHomeMarkdown=zipReader.getEntryAsString(_HOME_MARKDOWN);
        }
        continue;
      }
      String folder=zipEntry.substring(0,lastSlash);
      List<String> fileEntries=_folderFileEntryMap.get(folder);
      if (fileEntries == null) {
        fileEntries=new ArrayList<String>();
      }
      fileEntries.add(zipEntry);
      _folderFileEntryMap.put(folder,fileEntries);
    }
  }
  if (Validator.isNull(rootHomeMarkdown)) {
    throw new KBArticleImportException("Missing file entry: " + _HOME_MARKDOWN);
  }
  KBArticle rootHomeKBArticle=createKBArticleFromMarkdown(KBArticleConstants.DEFAULT_PARENT_RESOURCE_PRIM_KEY,rootHomeMarkdown,importerContext,_HOME_MARKDOWN);
  Set<String> folders=_folderFileEntryMap.keySet();
  Iterator<String> folderIter=folders.iterator();
  while (folderIter.hasNext()) {
    String folder=folderIter.next();
    List<String> zipFileEntries=_folderFileEntryMap.get(folder);
    String chapterHomeFileEntry=null;
    List<String> chapterMarkdownFileEntries=new ArrayList<String>();
    for (    String fileEntry : zipFileEntries) {
      if (fileEntry.endsWith(_INTRODUCTION_MARKDOWN) || fileEntry.endsWith(_INTRO_MARKDOWN)) {
        chapterHomeFileEntry=fileEntry;
      }
 else {
        chapterMarkdownFileEntries.add(fileEntry);
      }
    }
    if (Validator.isNull(chapterHomeFileEntry)) {
      throw new KBArticleImportException("Missing intro file entry in folder: " + folder);
    }
    String chapterIntroMarkdown=zipReader.getEntryAsString(chapterHomeFileEntry);
    KBArticle chapterIntroKBArticle=createKBArticleFromMarkdown(rootHomeKBArticle.getResourcePrimKey(),chapterIntroMarkdown,importerContext,chapterHomeFileEntry);
    for (    String tutorialFileEntry : chapterMarkdownFileEntries) {
      String tutorialMarkdown=zipReader.getEntryAsString(tutorialFileEntry);
      if (Validator.isNotNull(tutorialMarkdown)) {
        createKBArticleFromMarkdown(chapterIntroKBArticle.getResourcePrimKey(),tutorialMarkdown,importerContext,tutorialFileEntry);
      }
 else {
        if (_log.isWarnEnabled()) {
          _log.warn("Missing Markdown in file entry: " + tutorialFileEntry);
        }
      }
    }
  }
}
