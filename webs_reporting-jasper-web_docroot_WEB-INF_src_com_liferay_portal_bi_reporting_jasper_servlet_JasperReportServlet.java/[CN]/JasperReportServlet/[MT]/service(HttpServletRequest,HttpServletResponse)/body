{
  String reportName=request.getParameter("report");
  String format=request.getParameter("format");
  ReportDesignRetriever retriever=new ServletContextReportDesignRetriever(getServletContext(),reportName,"/WEB-INF/reports/",".jrxml");
  ReportRequest reportRequest=new ReportRequest(retriever,format,_imageStorageLocation,request.getContextPath() + "/images");
  ReportResultContainer container=new ReportResultContainer(){
    public String getReportName(){
      return null;
    }
    public OutputStream getOutputStream() throws IOException {
      return response.getOutputStream();
    }
    public byte[] getResults(){
      throw new UnsupportedOperationException();
    }
    public ReportResultContainer clone(    String name){
      throw new UnsupportedOperationException();
    }
    public void setReportGenerationException(    ReportGenerationException e){
    }
    public boolean hasError(){
      return false;
    }
    public ReportGenerationException getReportGenerationException(){
      return null;
    }
  }
;
  try {
    _engine.execute(reportRequest,container);
  }
 catch (  ReportGenerationException e) {
    throw new ServletException("Unable to generate report",e);
  }
}
