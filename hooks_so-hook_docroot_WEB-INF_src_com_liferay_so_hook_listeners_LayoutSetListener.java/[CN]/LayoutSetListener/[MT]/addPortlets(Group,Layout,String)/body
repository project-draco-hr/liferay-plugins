{
  LayoutTypePortlet layoutTypePortlet=(LayoutTypePortlet)layout.getLayoutType();
  LayoutTemplate layoutTemplate=layoutTypePortlet.getLayoutTemplate();
  List<String> columns=layoutTemplate.getColumns();
  for (  String column : columns) {
    String keyPrefix=PortletPropsKeys.SITE_PROTOTYPE_PORTLETS;
    if (group.isUser()) {
      keyPrefix=PortletPropsKeys.USER_LAYOUT_PORTLETS;
    }
    Filter filter=new Filter(name);
    String[] portletIds=PortletProps.getArray(keyPrefix + column,filter);
    String portlets=StringPool.BLANK;
    for (    String portletId : portletIds) {
      portlets=StringUtil.add(portlets,portletId);
    }
    layoutTypePortlet.setPortletIds(column,portlets);
  }
  LayoutLocalServiceUtil.updateLayout(layout.getGroupId(),layout.isPrivateLayout(),layout.getLayoutId(),layout.getTypeSettings());
  List<String> portletIds=layoutTypePortlet.getPortletIds();
  for (  String portletId : portletIds) {
    addResources(layout,portletId);
    if (portletId.equals("1_WAR_wysiwygportlet")) {
      updatePortletTitle(layout,"1_WAR_wysiwygportlet","Welcome");
    }
 else     if (portletId.startsWith("71_INSTANCE_")) {
      configureNavigation(layout,portletId);
    }
 else     if (portletId.equals(PortletKeys.ALERTS)) {
      updatePortletTitle(layout,PortletKeys.ALERTS,"Announcements");
    }
  }
}
