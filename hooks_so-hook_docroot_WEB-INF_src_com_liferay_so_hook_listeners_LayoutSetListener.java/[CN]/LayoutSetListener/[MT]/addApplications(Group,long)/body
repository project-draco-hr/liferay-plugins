{
  for (  String portletId : PortletPropsValues.USER_APPLICATIONS) {
    Portlet portlet=PortletLocalServiceUtil.getPortletById(group.getCompanyId(),portletId);
    if ((portlet == null) || portlet.isUndeployedPortlet()) {
      continue;
    }
    Layout layout=LayoutUtil.addLayout(group,true,parentLayoutId,portlet.getDisplayName(),PortletPropsValues.USER_NEW_LAYOUT_TEMPLATE);
    LayoutTypePortlet layoutTypePortlet=(LayoutTypePortlet)layout.getLayoutType();
    String[] commonPortletIds=PortletProps.getArray(PortletPropsKeys.USER_LAYOUT_PORTLETS + "column-1",new Filter("/home"));
    String portletIds=StringPool.BLANK;
    for (    String commonPortletId : commonPortletIds) {
      portletIds=StringUtil.add(portletIds,commonPortletId);
    }
    layoutTypePortlet.setPortletIds("column-1",portletIds);
    layoutTypePortlet.setPortletIds("column-2",portletId);
    LayoutLocalServiceUtil.updateLayout(layout.getGroupId(),layout.isPrivateLayout(),layout.getLayoutId(),layout.getTypeSettings());
    LayoutUtil.addResources(layout,portletId);
    for (    String commonPortletId : commonPortletIds) {
      LayoutUtil.addResources(layout,commonPortletId);
      if (commonPortletId.startsWith("71_INSTANCE_")) {
        LayoutUtil.removePortletBorder(layout,commonPortletId);
        LayoutUtil.configureNavigation(layout,commonPortletId);
      }
    }
    LayoutUtil.updatePermissions(layout,false);
  }
}
