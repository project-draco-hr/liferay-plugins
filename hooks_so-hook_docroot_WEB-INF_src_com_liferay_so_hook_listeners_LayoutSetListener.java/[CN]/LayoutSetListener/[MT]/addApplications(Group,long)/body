{
  for (  String portletId : PortletPropsValues.USER_APPLICATIONS) {
    Portlet portlet=PortletLocalServiceUtil.getPortletById(group.getCompanyId(),portletId);
    if ((portlet == null) || portlet.isUndeployedPortlet()) {
      continue;
    }
    Layout layout=addLayout(group,parentLayoutId,portlet.getDisplayName(),"2_columns_ii");
    LayoutTypePortlet layoutTypePortlet=(LayoutTypePortlet)layout.getLayoutType();
    String[] commonPortlets=PortletProps.getArray(PortletPropsKeys.USER_LAYOUT_PORTLETS + "column-1",new Filter("/home"));
    String portletIds=StringPool.BLANK;
    for (    String commonPortlet : commonPortlets) {
      portletIds=StringUtil.add(portletIds,commonPortlet);
    }
    layoutTypePortlet.setPortletIds("column-1",portletIds);
    layoutTypePortlet.setPortletIds("column-2",portletId);
    LayoutLocalServiceUtil.updateLayout(layout.getGroupId(),layout.isPrivateLayout(),layout.getLayoutId(),layout.getTypeSettings());
    addResources(layout,portletId);
    for (    String commonPortlet : commonPortlets) {
      addResources(layout,commonPortlet);
      if (commonPortlet.startsWith("71_INSTANCE_")) {
        removePortletBorder(layout,commonPortlet);
        configureNavigation(layout,commonPortlet);
      }
    }
    updatePermissions(layout,false);
  }
}
