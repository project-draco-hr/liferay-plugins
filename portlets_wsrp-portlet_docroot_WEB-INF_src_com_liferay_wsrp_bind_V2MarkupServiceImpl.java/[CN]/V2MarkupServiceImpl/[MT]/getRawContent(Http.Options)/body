{
  HttpServletRequest request=ServletUtil.getRequest();
  HttpSession session=ServletUtil.getSession();
  Cookie[] sessionCookies=(Cookie[])session.getAttribute(WebKeys.COOKIES);
  Map<String,Cookie> cookiesMap=new HashMap<String,Cookie>();
  if (sessionCookies != null) {
    for (    Cookie cookie : sessionCookies) {
      cookiesMap.put(cookie.getName(),cookie);
    }
  }
  Cookie[] forwardCookies=request.getCookies();
  if (forwardCookies != null) {
    for (    Cookie cookie : forwardCookies) {
      if (!cookie.getName().equalsIgnoreCase("cookie_support") || !cookie.getName().equalsIgnoreCase("guest_language_id") || !cookie.getName().equalsIgnoreCase("jsessionid")) {
        cookiesMap.put(cookie.getName(),cookie);
      }
    }
  }
  if (cookiesMap.size() > 0) {
    httpOptions.setCookies(cookiesMap.values().toArray(new Cookie[0]));
  }
  String rawContent=HttpUtil.URLtoString(httpOptions);
  Cookie[] cookiesArray=HttpUtil.getCookies();
  if (cookiesArray != null) {
    session.setAttribute(WebKeys.COOKIES,cookiesArray);
  }
  return rawContent;
}
