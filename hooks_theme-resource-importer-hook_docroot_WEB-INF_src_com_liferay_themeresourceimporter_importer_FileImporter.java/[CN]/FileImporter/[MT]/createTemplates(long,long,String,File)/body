{
  File[] files=dir.listFiles();
  if (files == null) {
    return;
  }
  for (  File file : files) {
    if (file.isDirectory()) {
      continue;
    }
    String name=getName(file.getName());
    Map<Locale,String> nameMap=new HashMap<Locale,String>();
    nameMap.put(Locale.US,name);
    String xsl=new String(FileUtil.getBytes(file));
    JournalTemplate journalTemplate=JournalTemplateLocalServiceUtil.addTemplate(userId,groupId,StringPool.BLANK,true,journalStructureId,nameMap,null,xsl,true,JournalTemplateConstants.LANG_TYPE_VM,false,false,StringPool.BLANK,null,new ServiceContext());
    File resourceDir=getResourceDir(dir);
    File articlesDir=new File(resourceDir,"/articles/" + name);
    if (articlesDir.exists() && articlesDir.isDirectory()) {
      createArticles(userId,groupId,journalStructureId,journalTemplate.getTemplateId(),articlesDir);
    }
  }
}
