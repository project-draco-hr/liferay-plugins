{
  File[] files=dir.listFiles();
  if (files == null) {
    return;
  }
  for (  File file : files) {
    if (file.isDirectory()) {
      continue;
    }
    String name=getName(file.getName());
    Map<Locale,String> nameMap=new HashMap<Locale,String>();
    nameMap.put(Locale.US,name);
    String xsd=new String(FileUtil.getBytes(file));
    JournalStructure journalStructure=JournalStructureLocalServiceUtil.addStructure(userId,groupId,StringPool.BLANK,true,StringPool.BLANK,nameMap,null,xsd,new ServiceContext());
    File resourceDir=getResourceDir(dir);
    File templatesDir=new File(resourceDir,"/templates/" + name);
    if (templatesDir.exists() && templatesDir.isDirectory()) {
      createTemplates(userId,groupId,journalStructure.getStructureId(),templatesDir);
    }
  }
}
