{
  InternetAddress fromInternetAddress;
  try {
    fromInternetAddress=new InternetAddress(emailModelBean.getFromEmailAddress());
    InternetAddress recipientInternetAddress=new InternetAddress(emailModelBean.getRecipientEmailAddress());
    String subject=emailModelBean.getSubject();
    String body=emailModelBean.getBody();
    boolean htmlFormat=true;
    _liferayFacesContext.addGlobalSuccessInfoMessage();
    _log.debug("Sending email to " + emailModelBean.getRecipientEmailAddress());
    emailModelBean.clear();
    MailEngine.send(fromInternetAddress,recipientInternetAddress,subject,body,htmlFormat);
  }
 catch (  Exception e) {
    _log.error(e,e);
    _liferayFacesContext.addGlobalUnexpectedErrorMessage();
  }
}
