{
  if (_initialized) {
    return;
  }
  WURFLUtils wurflUtils=_wurflHolder.getWURFLUtils();
  if (wurflUtils == null) {
    _log.error("Unable to load WURFL devices");
    return;
  }
  StopWatch stopWatch=new StopWatch();
  stopWatch.start();
  if (_log.isDebugEnabled()) {
    _log.debug("Loading database");
  }
  Map<String,VersionableName> brands=new HashMap<String,VersionableName>();
  Map<String,VersionableName> browsers=new HashMap<String,VersionableName>();
  Map<String,VersionableName> operatingSystems=new HashMap<String,VersionableName>();
  for (  Object deviceIdObject : wurflUtils.getAllDevicesId()) {
    String deviceId=(String)deviceIdObject;
    Device device=wurflUtils.getDeviceById(deviceId);
    updateVersionableCapability(device,brands,WURFLConstants.BRAND_NAME,WURFLConstants.MODEL_NAME,WURFLConstants.MARKETING_NAME);
    updateVersionableCapability(device,browsers,WURFLConstants.MOBILE_BROWSER,WURFLConstants.MOBILE_BROWSER_VERSION,null);
    updateVersionableCapability(device,operatingSystems,WURFLConstants.DEVICE_OS,WURFLConstants.DEVICE_OS_VERSION,null);
    updateCapability(device,_pointingMethods,WURFLConstants.POINTING_METHOD);
    updateDevicesIds(device,WURFLConstants.DEVICE_OS);
  }
  _brands=new TreeSet<VersionableName>(brands.values());
  _browsers=new TreeSet<VersionableName>(browsers.values());
  _operatingSystems=new TreeSet<VersionableName>(operatingSystems.values());
  if (_log.isDebugEnabled()) {
    _log.debug("Loaded database in " + stopWatch.getTime() + " ms");
  }
  _initialized=true;
}
