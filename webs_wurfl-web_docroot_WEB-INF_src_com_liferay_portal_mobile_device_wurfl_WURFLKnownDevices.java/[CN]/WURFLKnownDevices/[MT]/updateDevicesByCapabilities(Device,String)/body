{
  if (Validator.isNull(capabilities)) {
    return;
  }
  for (  String capabilityName : capabilities) {
    String capabilityValue=device.getCapability(capabilityName);
    if (Validator.isNotNull(capabilityValue)) {
      Capability capability=new Capability(capabilityName,capabilityValue);
      Set<String> deviceIds=_devicesByCapability.get(capability);
      if (deviceIds == null) {
        deviceIds=new TreeSet<String>();
        _devicesByCapability.put(capability,deviceIds);
      }
      deviceIds.add(device.getId());
    }
  }
}
