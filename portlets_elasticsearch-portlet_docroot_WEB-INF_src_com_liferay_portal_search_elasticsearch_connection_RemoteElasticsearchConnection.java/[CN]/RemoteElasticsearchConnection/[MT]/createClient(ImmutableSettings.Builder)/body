{
  if (_transportAddresses.isEmpty()) {
    throw new IllegalStateException("Must configure at least one transport address");
  }
  settingsBuilder.loadFromClasspath(PortletPropsValues.ELASTICSEARCH_REMOTE_CONFIG_LOCATION);
  TransportClient transportClient=new TransportClient(settingsBuilder);
  settingsBuilder.put("client.transport.sniff",true);
  settingsBuilder.put("cluster.name",getClusterName());
  for (  String transportAddress : _transportAddresses) {
    String[] transportAddressComponents=StringUtil.split(transportAddress,StringPool.COLON);
    try {
      InetAddress inetAddress=InetAddress.getByName(transportAddressComponents[0]);
      int port=Integer.parseInt(transportAddressComponents[1]);
      transportClient.addTransportAddress(new InetSocketTransportAddress(inetAddress,port));
    }
 catch (    Exception e) {
      if (_log.isWarnEnabled()) {
        _log.warn("Unable to add address: " + transportAddress,e);
      }
    }
  }
  return transportClient;
}
