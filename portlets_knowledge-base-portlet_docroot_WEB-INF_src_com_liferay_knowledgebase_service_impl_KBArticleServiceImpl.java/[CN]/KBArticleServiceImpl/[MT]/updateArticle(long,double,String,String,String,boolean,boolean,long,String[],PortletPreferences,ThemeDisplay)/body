{
  KBArticle article=kbArticleLocalService.getArticle(resourcePrimKey);
  if (template) {
    KBPermission.check(getPermissionChecker(),article.getGroupId(),KnowledgeBaseKeys.MANAGE_TEMPLATES);
  }
 else {
    KBArticlePermission.check(getPermissionChecker(),resourcePrimKey,ActionKeys.UPDATE);
  }
  return kbArticleLocalService.updateArticle(getUserId(),resourcePrimKey,version,title,content,description,minorEdit,template,parentResourcePrimKey,tagsEntries,prefs,themeDisplay);
}
