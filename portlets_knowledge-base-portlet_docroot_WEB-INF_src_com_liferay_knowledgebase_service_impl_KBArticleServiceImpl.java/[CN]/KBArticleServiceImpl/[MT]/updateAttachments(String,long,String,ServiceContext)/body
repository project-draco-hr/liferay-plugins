{
  if ((resourcePrimKey <= 0) && portletId.equals(PortletKeys.KNOWLEDGE_BASE_ADMIN)) {
    AdminPermission.check(getPermissionChecker(),serviceContext.getScopeGroupId(),ActionKeys.ADD_KB_ARTICLE);
  }
 else   if ((resourcePrimKey <= 0) && portletId.equals(PortletKeys.KNOWLEDGE_BASE_DISPLAY)) {
    DisplayPermission.check(getPermissionChecker(),serviceContext.getScopeGroupId(),ActionKeys.ADD_KB_ARTICLE);
  }
 else {
    KBArticlePermission.check(getPermissionChecker(),resourcePrimKey,ActionKeys.UPDATE);
  }
  return kbArticleLocalService.updateAttachments(resourcePrimKey,dirName,serviceContext);
}
