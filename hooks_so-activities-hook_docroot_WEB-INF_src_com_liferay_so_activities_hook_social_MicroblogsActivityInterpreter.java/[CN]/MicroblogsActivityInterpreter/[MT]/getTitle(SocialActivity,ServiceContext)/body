{
  StringBundler sb=new StringBundler(8);
  sb.append(getTitle(activity.getGroupId(),activity.getUserId(),activity.getCreateDate(),serviceContext));
  sb.append("<div class=\"activity-action\">");
  MicroblogsEntry microblogsEntry=MicroblogsEntryLocalServiceUtil.getMicroblogsEntry(activity.getClassPK());
  String receiverUserName=getUserName(activity.getReceiverUserId(),serviceContext);
  if (activity.getReceiverUserId() > 0) {
    if (microblogsEntry.getType() == _ACTIVITY_KEY_REPLY_ENTRY) {
      sb.append("@");
      sb.append(receiverUserName);
      sb.append(": ");
    }
 else     if (microblogsEntry.getType() == _ACTIVITY_KEY_REPOST_ENTRY) {
      sb.append(serviceContext.translate("reposted-from"));
      sb.append(" ");
      sb.append(receiverUserName);
      sb.append(": ");
    }
  }
  sb.append(MicroblogsUtil.getTaggedContent(microblogsEntry,serviceContext));
  sb.append("</div>");
  return sb.toString();
}
