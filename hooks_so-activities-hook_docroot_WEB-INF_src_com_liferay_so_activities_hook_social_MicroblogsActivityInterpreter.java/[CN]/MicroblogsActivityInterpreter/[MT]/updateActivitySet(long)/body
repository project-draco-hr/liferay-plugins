{
  SocialActivity activity=SocialActivityLocalServiceUtil.fetchSocialActivity(activityId);
  if ((activity == null) || (activity.getActivitySetId() > 0)) {
    return;
  }
  long activitySetId=getActivitySetId(activityId);
  if (activitySetId > 0) {
    SocialActivitySetLocalServiceUtil.incrementActivityCount(activitySetId,activityId);
  }
 else {
    SocialActivitySet activitySet=SocialActivitySetLocalServiceUtil.addActivitySet(activityId);
    if (activity.getType() == SocialActivityKeyConstants.MICROBLOGS_REPLY_ENTRY) {
      MicroblogsEntry microblogsEntry=MicroblogsEntryLocalServiceUtil.fetchMicroblogsEntry(activity.getClassPK());
      if (microblogsEntry == null) {
        return;
      }
      activitySet.setClassPK(microblogsEntry.getReceiverMicroblogsEntryId());
      SocialActivitySetLocalServiceUtil.updateSocialActivitySet(activitySet);
    }
  }
}
