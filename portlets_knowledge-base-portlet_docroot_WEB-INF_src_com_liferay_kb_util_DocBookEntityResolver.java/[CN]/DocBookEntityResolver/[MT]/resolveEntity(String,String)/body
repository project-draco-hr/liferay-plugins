{
  if (_log.isDebugEnabled()) {
    _log.debug("Found Entity: " + systemId);
  }
  if (systemId.contains("file:///")) {
    File zipEntity=new File(systemId);
    String zipPath=_rootDirZip + File.separator + zipEntity.getParentFile().getName()+ File.separator+ zipEntity.getName();
    String contents=_zipReader.getEntryAsString(zipPath);
    if (contents != null) {
      return new InputSource(new StringReader(contents.substring(1)));
    }
    return null;
  }
 else   if (systemId.endsWith("xml")) {
    String zipPath=_rootDirZip + File.separator + systemId.replace("\\","/");
    String contents=_zipReader.getEntryAsString(zipPath);
    if (contents != null) {
      if (_log.isDebugEnabled()) {
        _log.debug("Testing Entity: " + zipPath);
      }
      return new InputSource(new StringReader(contents.substring(1)));
    }
    return null;
  }
 else {
    return new InputSource(new StringReader(""));
  }
}
