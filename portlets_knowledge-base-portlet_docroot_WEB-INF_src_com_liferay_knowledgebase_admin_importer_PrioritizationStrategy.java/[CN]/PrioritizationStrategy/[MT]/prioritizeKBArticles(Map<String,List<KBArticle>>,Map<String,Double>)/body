{
  for (  Map.Entry<String,List<KBArticle>> entry : kbArticlesMap.entrySet()) {
    List<KBArticle> kbArticles=entry.getValue();
    if (kbArticles == null) {
      continue;
    }
    ListUtil.sort(kbArticles,new Comparator<KBArticle>(){
      @Override public int compare(      KBArticle kbArticle1,      KBArticle kbArticle2){
        String urlTitle1=kbArticle1.getUrlTitle();
        String urlTitle2=kbArticle2.getUrlTitle();
        return urlTitle1.compareTo(urlTitle2);
      }
    }
);
    String parentKBArticleUrlTitle=entry.getKey();
    int size=kbArticles.size();
    for (int i=0; i < size; i++) {
      KBArticle kbArticle=kbArticles.get(i);
      double maxPriority=0.0;
      if (maxKBArticlePriorityMap.containsKey(parentKBArticleUrlTitle)) {
        maxPriority=maxKBArticlePriorityMap.get(parentKBArticleUrlTitle);
      }
      maxPriority++;
      maxKBArticlePriorityMap.put(parentKBArticleUrlTitle,maxPriority);
      KBArticleLocalServiceUtil.updatePriority(kbArticle.getResourcePrimKey(),maxPriority);
    }
  }
}
