{
  ServiceContext serviceContext=portletDataContext.createServiceContext(consumer);
  WSRPConsumer importedConsumer=null;
  if (portletDataContext.isDataStrategyMirror()) {
    WSRPConsumer existingConsumer=WSRPConsumerLocalServiceUtil.fetchWSRPConsumerByUuidAndCompanyId(consumer.getUuid(),portletDataContext.getCompanyId());
    if (existingConsumer == null) {
      serviceContext.setUuid(consumer.getUuid());
      importedConsumer=WSRPConsumerLocalServiceUtil.addWSRPConsumer(portletDataContext.getCompanyId(),null,consumer.getName(),consumer.getUrl(),consumer.getForwardCookies(),consumer.getForwardHeaders(),consumer.getMarkupCharacterSets(),serviceContext);
    }
 else {
      existingConsumer.setName(consumer.getName());
      existingConsumer.setUrl(consumer.getUrl());
      existingConsumer.setWsdl(consumer.getWsdl());
      existingConsumer.setForwardCookies(consumer.getForwardCookies());
      existingConsumer.setForwardHeaders(consumer.getForwardHeaders());
      existingConsumer.setMarkupCharacterSets(consumer.getMarkupCharacterSets());
      importedConsumer=WSRPConsumerLocalServiceUtil.updateWSRPConsumer(existingConsumer);
    }
  }
 else {
    importedConsumer=WSRPConsumerLocalServiceUtil.addWSRPConsumer(portletDataContext.getCompanyId(),null,consumer.getName(),consumer.getUrl(),consumer.getForwardCookies(),consumer.getForwardHeaders(),consumer.getMarkupCharacterSets(),serviceContext);
  }
  portletDataContext.importClassedModel(consumer,importedConsumer);
}
