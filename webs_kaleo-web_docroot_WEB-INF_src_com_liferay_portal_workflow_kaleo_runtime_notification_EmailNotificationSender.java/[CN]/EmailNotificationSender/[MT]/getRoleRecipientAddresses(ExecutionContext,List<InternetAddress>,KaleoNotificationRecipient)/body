{
  if (kaleoNotificationRecipient.getRecipientRoleType() == RoleConstants.TYPE_REGULAR) {
    List<User> users=UserLocalServiceUtil.getRoleUsers(kaleoNotificationRecipient.getRecipientClassPK());
    for (    User user : users) {
      InternetAddress internetAddress=new InternetAddress(user.getEmailAddress(),user.getFullName());
      internetAddresses.add(internetAddress);
    }
  }
 else {
    long groupId=executionContext.getKaleoTaskInstanceToken().getGroupId();
    List<UserGroupRole> userGroupRoles=UserGroupRoleLocalServiceUtil.getUserGroupRolesByGroupAndRole(groupId,kaleoNotificationRecipient.getRecipientClassPK());
    for (    UserGroupRole userGroupRole : userGroupRoles) {
      User user=userGroupRole.getUser();
      InternetAddress internetAddress=new InternetAddress(user.getEmailAddress(),user.getFullName());
      internetAddresses.add(internetAddress);
    }
  }
}
