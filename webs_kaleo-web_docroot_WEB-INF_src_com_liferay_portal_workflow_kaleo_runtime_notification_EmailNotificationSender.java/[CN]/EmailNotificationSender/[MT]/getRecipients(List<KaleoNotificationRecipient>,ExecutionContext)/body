{
  Set<InternetAddress> internetAddresses=new HashSet<InternetAddress>();
  if (kaleoNotificationRecipients.isEmpty()) {
    getAssignedRecipients(internetAddresses,executionContext);
  }
 else {
    for (    KaleoNotificationRecipient kaleoNotificationRecipient : kaleoNotificationRecipients) {
      if (Validator.isNotNull(kaleoNotificationRecipient.getAddress())) {
        InternetAddress internetAddress=new InternetAddress(kaleoNotificationRecipient.getAddress());
        internetAddresses.add(internetAddress);
      }
 else {
        String recipientClassName=kaleoNotificationRecipient.getRecipientClassName();
        if (recipientClassName.equals(User.class.getName())) {
          getUserEmailAddress(kaleoNotificationRecipient.getRecipientClassPK(),internetAddresses,executionContext);
        }
 else {
          getRoleRecipientAddresses(kaleoNotificationRecipient.getRecipientClassPK(),kaleoNotificationRecipient.getRecipientRoleType(),internetAddresses,executionContext);
        }
      }
    }
  }
  return internetAddresses.toArray(new InternetAddress[internetAddresses.size()]);
}
