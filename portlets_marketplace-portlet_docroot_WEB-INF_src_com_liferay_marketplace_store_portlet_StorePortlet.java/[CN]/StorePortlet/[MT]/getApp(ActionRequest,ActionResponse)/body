{
  long marketplaceAppId=ParamUtil.getLong(actionRequest,"appId");
  JSONObject jsonObject=JSONFactoryUtil.createJSONObject();
  App app=AppLocalServiceUtil.fetchApp(marketplaceAppId);
  if (app != null) {
    jsonObject.put("appId",app.getMarketplaceAppId());
    jsonObject.put("downloaded",app.isDownloaded());
    jsonObject.put("installed",app.isInstalled());
    jsonObject.put("version",app.getVersion());
  }
 else {
    jsonObject.put("appId",marketplaceAppId);
    jsonObject.put("downloaded",false);
    jsonObject.put("installed",false);
    jsonObject.put("version",StringPool.BLANK);
  }
  sendJSONResponse(actionResponse,jsonObject);
}
