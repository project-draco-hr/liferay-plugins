{
  long remoteAppId=ParamUtil.getLong(actionRequest,"appId");
  String version=ParamUtil.getString(actionRequest,"version");
  String url=ParamUtil.getString(actionRequest,"url");
  URL urlObj=new URL(url);
  InputStream inputStream=null;
  try {
    inputStream=urlObj.openStream();
    App app=AppLocalServiceUtil.fetchRemoteApp(remoteAppId);
    AppServiceUtil.updateApp(app.getAppId(),version,inputStream);
    AppServiceUtil.installApp(remoteAppId);
    JSONObject jsonObject=getAppJSONObject(remoteAppId);
    writeJSON(actionRequest,actionResponse,jsonObject);
  }
  finally {
    StreamUtil.cleanUp(inputStream);
  }
}
