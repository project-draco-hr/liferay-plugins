{
  CmdLineParser cmdLineParser=new CmdLineParser();
  CmdLineParser.Option baseDirOption=cmdLineParser.addStringOption("base.dir");
  CmdLineParser.Option propertiesFileNameOption=cmdLineParser.addStringOption("properties.file.name");
  CmdLineParser.Option imageNameOption=cmdLineParser.addStringOption("image.name");
  cmdLineParser.parse(args);
  AMIBuilder amiBuilder=new AMIBuilder((String)cmdLineParser.getOptionValue(baseDirOption),(String)cmdLineParser.getOptionValue(propertiesFileNameOption),(String)cmdLineParser.getOptionValue(imageNameOption));
  try {
    amiBuilder.start();
    amiBuilder.runProvisioners();
    amiBuilder.createImage();
    amiBuilder.destroy();
  }
 catch (  Exception e) {
    e.printStackTrace();
    amiBuilder.destroy();
  }
}
