{
  List<EntryDisplay> entries=new LinkedList<EntryDisplay>();
  for (  WikiPage wikiPage : pages) {
    if ((wikiPage.getParentPage() != null && actualDepth == 0) || (!contains(permissionChecker,wikiPage,ActionKeys.VIEW))) {
      continue;
    }
    String title=wikiPage.getTitle();
    WikiNode wikiNode=wikiPage.getNode();
    EntryDisplay parent=new EntryDisplay();
    portletURL.setParameter("nodeId",String.valueOf(wikiNode.getNodeId()));
    portletURL.setParameter("title",title);
    parent.setLabel(title);
    parent.setUrl(portletURL.toString());
    if ((displayDepth == -1) || (actualDepth < displayDepth)) {
      parent.addChildren(_buildNavigationTree(wikiPage.getChildPages(),permissionChecker,titleSelected,portletURL,displayDepth,(actualDepth + 1)));
    }
    entries.add(parent);
  }
  return entries;
}
