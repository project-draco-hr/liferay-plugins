{
  OutputStream outputStream=null;
  try {
    SyncFile syncFile=(SyncFile)getParameterValue("syncFile");
    Path filePath=Paths.get(syncFile.getFilePathName());
    outputStream=Files.newOutputStream(filePath);
    outputStream.write(response.getBytes());
    syncFile.setFileKey(FileUtil.getFileKey(filePath));
    syncFile.setState(SyncFile.STATE_SYNCED);
    syncFile.setUiEvent(SyncFile.UI_EVENT_DOWNLOADED);
    SyncFileService.update(syncFile);
  }
  finally {
    StreamUtil.cleanUp(outputStream);
  }
}
