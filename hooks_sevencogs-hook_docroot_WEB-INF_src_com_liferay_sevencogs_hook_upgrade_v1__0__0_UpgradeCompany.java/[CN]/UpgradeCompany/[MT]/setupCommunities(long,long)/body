{
  Group group=GroupLocalServiceUtil.getGroup(companyId,GroupConstants.GUEST);
  addJournalStructure(defaultUserId,group.getGroupId(),"/guest/journal/structures/single_image.xml");
  addJournalTemplate(defaultUserId,group.getGroupId(),"/guest/journal/templates/single_image.xml");
  ServiceContext serviceContext=new ServiceContext();
  serviceContext.setAddCommunityPermissions(true);
  serviceContext.setAddGuestPermissions(true);
  serviceContext.setScopeGroupId(group.getGroupId());
  Folder folder=DLAppLocalServiceUtil.addFolder(defaultUserId,0,0,"Web Content","Images used for content",serviceContext);
  FileEntry cellBgIGImage=addDLFileEntry(defaultUserId,folder.getFolderId(),"cell_bg.png","/guest/images/cell_bg.png",serviceContext);
  FileEntry portalMashupIGImage=addDLFileEntry(defaultUserId,folder.getFolderId(),"portal_mashup.png","/guest/images/portal_mashup.png",serviceContext);
  FileEntry sevenCogsAdIGImage=addDLFileEntry(defaultUserId,folder.getFolderId(),"sevencogs_ad.png","/guest/images/sevencogs_ad.png",serviceContext);
  FileEntry sevenCogsMobileAdIGImage=addDLFileEntry(defaultUserId,folder.getFolderId(),"sevencogs_mobile_ad.png","/guest/images/sevencogs_mobile_ad.png",serviceContext);
  FileEntry sharedWorkspacesIGImage=addDLFileEntry(defaultUserId,folder.getFolderId(),"shared_workspaces.png","/guest/images/shared_workspaces.png",serviceContext);
  FileEntry socialNetworkingIGImage=addDLFileEntry(defaultUserId,folder.getFolderId(),"social_network.png","/guest/images/social_network.png",serviceContext);
  FileEntry webPublishingIGImage=addDLFileEntry(defaultUserId,folder.getFolderId(),"web_publishing.png","/guest/images/web_publishing.png",serviceContext);
  Layout layout=addLayout(group,"Welcome",false,"/home","2_columns_iii");
  String portletId=addPortletId(layout,PortletKeys.JOURNAL_CONTENT,"column-1");
  removePortletBorder(layout,portletId);
  serviceContext.setAssetTagNames(new String[]{"liferay","welcome"});
  JournalArticle journalArticle=addJournalArticle(defaultUserId,group.getGroupId(),"Welcome","/guest/journal/articles/welcome.xml",serviceContext);
  String content=StringUtil.replace(journalArticle.getContent(),new String[]{"[$CELL_BG_IG_IMAGE_UUID$]","[$GROUP_ID$]","[$PORTAL_MASHUPS_IG_IMAGE_UUID$]","[$SHARED_WORKSPACES_IG_IMAGE_UUID$]","[$SOCIAL_NETWORKING_IG_IMAGE_UUID$]","[$WEB_PUBLISHING_IG_IMAGE_UUID$]"},new String[]{String.valueOf(cellBgIGImage.getUuid()),String.valueOf(group.getGroupId()),String.valueOf(portalMashupIGImage.getUuid()),String.valueOf(sharedWorkspacesIGImage.getUuid()),String.valueOf(socialNetworkingIGImage.getUuid()),String.valueOf(webPublishingIGImage.getUuid())});
  JournalArticleLocalServiceUtil.updateContent(group.getGroupId(),journalArticle.getArticleId(),journalArticle.getVersion(),content);
  configureJournalContent(layout,portletId,journalArticle.getArticleId());
  portletId=addPortletId(layout,PortletKeys.JOURNAL_CONTENT,"column-2");
  removePortletBorder(layout,portletId);
  serviceContext.setAssetTagNames(new String[]{"liferay","7cogs"});
  journalArticle=addJournalArticle(defaultUserId,group.getGroupId(),"7Cogs Ad","/guest/journal/articles/sample_site_ad.xml",serviceContext);
  content=StringUtil.replace(journalArticle.getContent(),new String[]{"[$GROUP_ID$]","[$GROUP_URL$]","[$IG_IMAGE_UUID$]"},new String[]{String.valueOf(group.getGroupId()),"/web/7cogs/home",String.valueOf(sevenCogsAdIGImage.getUuid())});
  JournalArticleLocalServiceUtil.updateContent(group.getGroupId(),journalArticle.getArticleId(),journalArticle.getVersion(),content);
  configureJournalContent(layout,portletId,journalArticle.getArticleId());
  portletId=addPortletId(layout,PortletKeys.JOURNAL_CONTENT,"column-2");
  removePortletBorder(layout,portletId);
  serviceContext.setAssetTagNames(new String[]{"liferay","7cogs"});
  journalArticle=addJournalArticle(defaultUserId,group.getGroupId(),"7Cogs Mobile Ad","/guest/journal/articles/sample_site_ad.xml",serviceContext);
  content=StringUtil.replace(journalArticle.getContent(),new String[]{"[$GROUP_ID$]","[$GROUP_URL$]","[$IG_IMAGE_UUID$]"},new String[]{String.valueOf(group.getGroupId()),"/web/7cogs-mobile/home",String.valueOf(sevenCogsMobileAdIGImage.getUuid())});
  JournalArticleLocalServiceUtil.updateContent(group.getGroupId(),journalArticle.getArticleId(),journalArticle.getVersion(),content);
  configureJournalContent(layout,portletId,journalArticle.getArticleId());
  portletId=addPortletId(layout,PortletKeys.JOURNAL_CONTENT,"column-2");
  removePortletBorder(layout,portletId);
  serviceContext.setAssetTagNames(new String[]{"welcome"});
  journalArticle=addJournalArticle(defaultUserId,group.getGroupId(),"Welcome Note","/guest/journal/articles/welcome_note.xml",serviceContext);
  configureJournalContent(layout,portletId,journalArticle.getArticleId());
  portletId=addPortletId(layout,PortletKeys.JOURNAL_CONTENT,"column-2");
  serviceContext.setAssetTagNames(new String[]{"login","users","welcome"});
  journalArticle=addJournalArticle(defaultUserId,group.getGroupId(),"Welcome Login","/guest/journal/articles/welcome_login.xml",serviceContext);
  content=StringUtil.replace(journalArticle.getContent(),"[$COMPANY_ID$]",String.valueOf(companyId));
  JournalArticleLocalServiceUtil.updateContent(group.getGroupId(),journalArticle.getArticleId(),journalArticle.getVersion(),content);
  configureJournalContent(layout,portletId,journalArticle.getArticleId());
  configurePortletTitle(layout,portletId,"Current Users");
  addPortletId(layout,PortletKeys.LOGIN,"column-2");
}
