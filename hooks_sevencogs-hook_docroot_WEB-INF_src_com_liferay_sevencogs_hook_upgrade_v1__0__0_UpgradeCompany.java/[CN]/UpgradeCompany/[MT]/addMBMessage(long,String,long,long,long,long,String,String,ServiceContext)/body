{
  String fileName=StringUtil.extractLast(filePath,StringPool.SLASH);
  String body=getString(filePath);
  List<ObjectValuePair<String,InputStream>> inputStreamOVPs=new ArrayList<ObjectValuePair<String,InputStream>>();
  InputStream inputStream=getInputStream(filePath);
  ObjectValuePair<String,InputStream> inputStreamOVP=new ObjectValuePair<String,InputStream>(fileName,inputStream);
  inputStreamOVPs.add(inputStreamOVP);
  serviceContext.setAddGroupPermissions(true);
  serviceContext.setAddGuestPermissions(true);
  return MBMessageLocalServiceUtil.addMessage(userId,userName,groupId,categoryId,threadId,parentMessageId,subject,body,MBMessageConstants.DEFAULT_FORMAT,inputStreamOVPs,false,-1.0,false,serviceContext);
}
