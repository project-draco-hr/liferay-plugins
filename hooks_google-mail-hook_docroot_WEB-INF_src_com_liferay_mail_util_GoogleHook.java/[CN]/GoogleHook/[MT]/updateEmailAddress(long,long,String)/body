{
  try {
    User user=UserLocalServiceUtil.getUserById(userId);
    deleteEmailAddress(companyId,userId);
    GNicknameManager gNicknameManager=GoogleAppsConnectionFactoryUtil.getGNicknameManager(companyId);
    String nickname=_getNickname(emailAddress);
    gNicknameManager.addGNickname(userId,nickname);
    GEmailSettingsManager gEmailSettingsManager=GoogleAppsConnectionFactoryUtil.getGEmailSettingsManager(companyId);
    gEmailSettingsManager.addSendAs(userId,user.getFullName(),emailAddress);
  }
 catch (  Exception e) {
    _log.error(e,e);
  }
}
