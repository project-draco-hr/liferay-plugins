{
  boolean failedIncomingConnection=false;
  try {
    testIncomingConnection();
  }
 catch (  MailException me) {
    failedIncomingConnection=true;
  }
  boolean failedOutgoingConnection=false;
  try {
    testOutgoingConnection();
  }
 catch (  MailException me) {
    failedOutgoingConnection=true;
  }
  if (failedIncomingConnection || failedOutgoingConnection) {
    throw new MailException(MailException.ACCOUNT_CONNECTIONS_FAILED);
  }
 else   if (failedIncomingConnection) {
    throw new MailException(MailException.ACCOUNT_INCOMING_CONNECTION_FAILED);
  }
 else   if (failedOutgoingConnection) {
    throw new MailException(MailException.ACCOUNT_OUTGOING_CONNECTION_FAILED);
  }
}
