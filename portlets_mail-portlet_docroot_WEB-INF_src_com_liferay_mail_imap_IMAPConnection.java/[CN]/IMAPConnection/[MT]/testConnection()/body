{
  boolean incomingConnection=false;
  boolean outgoingConnection=false;
  try {
    testIncomingConnection();
    incomingConnection=true;
  }
 catch (  MailException me) {
  }
  try {
    testOutgoingConnection();
    outgoingConnection=true;
  }
 catch (  MailException me) {
  }
  if (!incomingConnection && !outgoingConnection) {
    throw new MailException(MailException.ACCOUNT_CONNECTIONS_FAILED);
  }
 else   if (!incomingConnection) {
    throw new MailException(MailException.ACCOUNT_INCOMING_CONNECTION_FAILED);
  }
 else   if (!outgoingConnection) {
    throw new MailException(MailException.ACCOUNT_OUTGOING_CONNECTION_FAILED);
  }
}
