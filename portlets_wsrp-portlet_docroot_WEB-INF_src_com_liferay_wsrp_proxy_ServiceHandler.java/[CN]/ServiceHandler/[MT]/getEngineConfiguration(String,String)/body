{
  SimpleChain requestChain=new SimpleChain();
  Handler logHandler=new LogHandler();
  if (PortletPropsValues.WSRP_DEBUG) {
    requestChain.addHandler(logHandler);
  }
  if (Validator.isNotNull(userToken)) {
    Handler handler=new WSDoAllSender();
    handler.setOption(WSHandlerConstants.ACTION,"UsernameToken");
    handler.setOption(WSHandlerConstants.MUST_UNDERSTAND,"false");
    handler.setOption(UsernameToken.PASSWORD_TYPE,WSConstants.PW_NONE);
    handler.setOption(WSHandlerConstants.PW_CALLBACK_CLASS,PasswordCallback.class.getName());
    handler.setOption(WSHandlerConstants.USER,userToken);
    requestChain.addHandler(handler);
  }
  SimpleChain responseChain=new SimpleChain();
  if (PortletPropsValues.WSRP_DEBUG) {
    responseChain.addHandler(logHandler);
  }
  SimpleProvider simpleProvider=new SimpleProvider();
  HTTPSender httpSender=new WSRPHTTPSender(forwardCookies);
  simpleProvider.deployTransport(HTTPTransport.DEFAULT_TRANSPORT_NAME,new SimpleTargetedChain(requestChain,httpSender,responseChain));
  return simpleProvider;
}
