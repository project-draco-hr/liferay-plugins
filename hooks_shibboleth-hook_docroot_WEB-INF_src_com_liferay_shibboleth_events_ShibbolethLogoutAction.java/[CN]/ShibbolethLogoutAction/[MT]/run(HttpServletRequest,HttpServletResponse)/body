{
  try {
    long companyId=PortalUtil.getCompanyId(request);
    if (!ShibbolethUtil.isEnabled(companyId)) {
      return;
    }
    String pathInfo=request.getPathInfo();
    if (pathInfo.contains("/portal/logout")) {
      HttpSession session=request.getSession();
      String shibbolethLogoutURL=PrefsPropsUtil.getString(companyId,PropsKeys.SHIBBOLETH_LOGOUT_URL,PropsValues.SHIBBOLETH_LOGOUT_URL);
      session.invalidate();
      if (Validator.isNotNull(shibbolethLogoutURL)) {
        response.sendRedirect(shibbolethLogoutURL);
      }
    }
  }
 catch (  Exception e) {
    _log.error(e,e);
  }
}
