{
  List<TaskVO> pendingTasks=null;
  if (getIsWFEnabled()) {
    pendingTasks=wfHelper.getPendingTasks(USER_ROLE_MANAGER);
    JSONArray reportsArray=new JSONArray();
    for (    TaskVO task : pendingTasks) {
      String reportNumber=task.getFlexString6();
      System.out.println("RN from Jcaps " + reportNumber);
      Report report=dbHelper.getReportDetailsforReport(reportNumber);
      if (report != null) {
        String empId=report.getEmployeeId();
        String managerId=dbHelper.getManagerForEmployee(empId);
        System.out.println("Manager for report  " + managerId);
        System.out.println("user  " + this.getUser());
        if (managerId.equals(this.getUser())) {
          System.out.println("Manager for report 2 " + managerId);
          String empName=dbHelper.getEmployeeNameFromId(empId);
          String url="javascript:viewReport(\'" + report.getReportId() + "\');";
          String reportValue="<a href=\"" + url + "\">"+ report.getReportId()+ "</a>";
          report.setReportId(reportValue);
          String rowData="id : " + report.getId();
          report.setId(rowData);
          report.setEmployeeName(empName);
          JSONArray reportArray=report.toJSON("manager");
          reportsArray.put(reportArray);
        }
      }
    }
    return reportsArray.toString();
  }
 else {
    return getReportsToApproveJSONDB();
  }
}
