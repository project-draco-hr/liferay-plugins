{
  long userIdLong=GetterUtil.getLong(userId.getUserId(securityToken));
  User user=UserLocalServiceUtil.getUserById(userIdLong);
  Group group=user.getGroup();
  long groupIdLong=group.getGroupId();
  long albumIdLong=GetterUtil.getLong(albumId);
  List<FileEntry> fileEntries=DLAppLocalServiceUtil.getFileEntries(groupIdLong,albumIdLong);
  List<MediaItem> mediaItems=new ArrayList<MediaItem>();
  for (  FileEntry fileEntry : fileEntries) {
    MediaItem.Type mediaItemType=getMediaItemType(fileEntry);
    if (mediaItemType == null) {
      continue;
    }
    MediaItem mediaItem=getMediaItem(fileEntry,fields,securityToken);
    if (mediaItemIds.contains(mediaItem.getId())) {
      mediaItems.add(mediaItem);
    }
  }
  return new RestfulCollection<MediaItem>(mediaItems,collectionOptions.getFirst(),mediaItems.size(),collectionOptions.getMax());
}
