{
  long userIdLong=GetterUtil.getLong(userId.getUserId(securityToken));
  User user=UserLocalServiceUtil.getUserById(userIdLong);
  Group group=user.getGroup();
  long groupIdLong=group.getGroupId();
  long albumIdLong=GetterUtil.getLong(albumId);
  List<DLFileEntry> dLFileEntries=DLAppLocalServiceUtil.getFileEntries(groupIdLong,albumIdLong);
  List<MediaItem> mediaItems=new ArrayList<MediaItem>();
  for (  DLFileEntry dlFileEntry : dLFileEntries) {
    MediaItem.Type mediaItemType=getMediaItemType(dlFileEntry);
    if (mediaItemType == null) {
      continue;
    }
    MediaItem mediaItem=getMediaItem(dlFileEntry,fields,securityToken);
    mediaItems.add(mediaItem);
  }
  return new RestfulCollection<MediaItem>(mediaItems,collectionOptions.getFirst(),mediaItems.size(),collectionOptions.getMax());
}
