{
  List<Group> groups=Collections.emptyList();
  if (_user != null) {
    groups=GroupLocalServiceUtil.getUserGroups(_user.getUserId());
  }
 else   if (_company != null) {
    groups=GroupLocalServiceUtil.search(_company.getCompanyId(),null,null,null,0,PortletPropsValues.SEARCH_MAX_SIZE);
  }
  for (  Group group : groups) {
    Directory communityDirectory=new CommunityDirectory(group,this,_usersDirectory);
    _directories.add(communityDirectory);
  }
  return _directories;
}
