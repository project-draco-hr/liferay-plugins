{
  PortletSession portletSession=resourceRequest.getPortletSession();
  PortletContext portletContext=wsrpResourceResponse.getPortletContext();
  if (portletContext != null) {
    portletSession.setAttribute(WebKeys.PORTLET_CONTEXT,portletContext);
  }
  SessionContext sessionContext=wsrpResourceResponse.getSessionContext();
  if (sessionContext != null) {
    portletSession.setAttribute(WebKeys.SESSION_CONTEXT,sessionContext);
  }
  ResourceContext resourceContext=wsrpResourceResponse.getResourceContext();
  NamedString[] clientAttributes=resourceContext.getClientAttributes();
  if (clientAttributes != null) {
    for (    NamedString clientAttribute : clientAttributes) {
      String name=clientAttribute.getName();
      String value=clientAttribute.getValue();
      if (name.equalsIgnoreCase(HttpHeaders.CONTENT_DISPOSITION)) {
        resourceResponse.setProperty(HttpHeaders.CONTENT_DISPOSITION,value);
        break;
      }
    }
  }
  CacheControl cacheControl=resourceContext.getCacheControl();
  if (cacheControl != null) {
    if (cacheControl.getExpires() == 0) {
      resourceResponse.setProperty(HttpHeaders.CACHE_CONTROL,HttpHeaders.CACHE_CONTROL_NO_CACHE_NO_STORE_VALUE);
    }
  }
  processMimeResponse(resourceRequest,resourceResponse,resourceContext);
}
