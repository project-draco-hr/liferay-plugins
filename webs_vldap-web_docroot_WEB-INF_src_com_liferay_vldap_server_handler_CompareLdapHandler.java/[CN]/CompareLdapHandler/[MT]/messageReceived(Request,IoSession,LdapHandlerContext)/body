{
  CompareRequest compareRequest=(CompareRequest)request;
  DirectoryTree directoryTree=new DirectoryTree();
  SearchBase searchBase=directoryTree.getSearchBase(compareRequest.getName(),PortletPropsValues.SEARCH_MAX_SIZE);
  if (searchBase == null) {
    return toList(getResponse(compareRequest,ResultCodeEnum.COMPARE_FALSE));
  }
  Directory directory=searchBase.getDirectory();
  if (directory == null) {
    return toList(getResponse(compareRequest,ResultCodeEnum.COMPARE_FALSE));
  }
  Value<?> value=compareRequest.getAssertionValue();
  if (!directory.hasAttribute(compareRequest.getAttributeId(),value.getString())) {
    return toList(getResponse(compareRequest,ResultCodeEnum.COMPARE_FALSE));
  }
  return toList(getResponse(compareRequest,ResultCodeEnum.COMPARE_TRUE));
}
