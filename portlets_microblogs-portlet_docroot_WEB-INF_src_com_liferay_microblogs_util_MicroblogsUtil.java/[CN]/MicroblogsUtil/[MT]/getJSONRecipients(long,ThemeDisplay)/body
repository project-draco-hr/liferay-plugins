{
  Set<User> users=new HashSet<User>();
  users.addAll(UserLocalServiceUtil.getSocialUsers(userId,SocialRelationConstants.TYPE_BI_CONNECTION,QueryUtil.ALL_POS,QueryUtil.ALL_POS,new UserFirstNameComparator(true)));
  JSONArray userJSONArray=JSONFactoryUtil.createJSONArray();
  for (  User user : users) {
    if (user.isDefaultUser() || (userId == user.getUserId())) {
      continue;
    }
    JSONObject userJSONObject=JSONFactoryUtil.createJSONObject();
    userJSONObject.put("userScreenName",user.getScreenName());
    userJSONObject.put("userId",user.getUserId());
    userJSONObject.put("userFullName",user.getFullName());
    userJSONObject.put("email",user.getEmailAddress());
    userJSONObject.put("portraitURL",user.getPortraitURL(themeDisplay));
    userJSONObject.put("jobTitle",user.getJobTitle());
    userJSONArray.put(userJSONObject);
  }
  return userJSONArray;
}
