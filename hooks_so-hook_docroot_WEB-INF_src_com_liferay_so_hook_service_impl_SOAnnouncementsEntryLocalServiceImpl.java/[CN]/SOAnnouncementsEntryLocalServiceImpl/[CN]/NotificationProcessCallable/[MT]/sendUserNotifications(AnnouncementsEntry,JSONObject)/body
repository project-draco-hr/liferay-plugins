{
  List<User> users=null;
  LinkedHashMap<String,Object> params=new LinkedHashMap<String,Object>();
  if (announcementEntry.getClassNameId() == 0) {
    users=UserLocalServiceUtil.getUsers(start,end);
  }
 else {
    String className=announcementEntry.getClassName();
    long classPK=announcementEntry.getClassPK();
    if (classPK > 0) {
      if (className.equals(Group.class.getName())) {
        params.put("inherit",Boolean.TRUE);
        params.put("usersGroups",classPK);
      }
 else       if (className.equals(Organization.class.getName())) {
        Organization organization=OrganizationLocalServiceUtil.fetchOrganization(classPK);
        if (organization == null) {
          return;
        }
        params.put("usersOrgsTree",ListUtil.fromArray(new Organization[]{organization}));
      }
 else       if (className.equals(Role.class.getName())) {
        Role role=RoleLocalServiceUtil.fetchRole(classPK);
        if (role == null) {
          return;
        }
        if (role.getType() == RoleConstants.TYPE_REGULAR) {
          params.put("inherit",Boolean.TRUE);
          params.put("usersRoles",classPK);
        }
 else {
          params.put("userGroupRole",new Long[]{Long.valueOf(0),classPK});
        }
      }
 else       if (className.equals(UserGroup.class.getName())) {
        params.put("usersUserGroups",classPK);
      }
    }
    users=UserLocalServiceUtil.search(announcementEntry.getCompanyId(),null,WorkflowConstants.STATUS_APPROVED,params,start,end,(OrderByComparator)null);
  }
  for (  User user : users) {
    NotificationEvent notificationEvent=NotificationEventFactoryUtil.createNotificationEvent(System.currentTimeMillis(),"6_WAR_soportlet",notificationEventJSONObject);
    notificationEvent.setDeliveryRequired(0);
    ChannelHubManagerUtil.sendNotificationEvent(user.getCompanyId(),user.getUserId(),notificationEvent);
  }
}
