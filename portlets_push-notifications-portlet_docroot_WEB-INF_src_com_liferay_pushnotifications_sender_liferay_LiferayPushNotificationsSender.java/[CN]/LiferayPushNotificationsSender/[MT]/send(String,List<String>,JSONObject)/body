{
  HttpRequest httpRequest=HttpRequest.post(getServer());
  httpRequest.basicAuthentication(getUsername(),getPassword());
  httpRequest.form(PushNotificationsConstants.KEY_PAYLOAD,payloadJSONObject.toString());
  httpRequest.form("platform",platform);
  JSONArray tokensJSONArray=JSONFactoryUtil.createJSONArray();
  for (  String token : tokens) {
    tokensJSONArray.put(token);
  }
  httpRequest.form("tokens",tokensJSONArray.toString());
  httpRequest.path("/api/jsonws/push-notifications-portlet.pushnotificationsdevice" + "/send-push-notification");
  httpRequest.timeout(getTimeout());
  HttpResponse httpResponse=httpRequest.send();
  if (httpResponse.statusCode() != 200) {
    throw new PushNotificationsException("Unable to send push notification to Liferay Push " + httpResponse.bodyText());
  }
}
