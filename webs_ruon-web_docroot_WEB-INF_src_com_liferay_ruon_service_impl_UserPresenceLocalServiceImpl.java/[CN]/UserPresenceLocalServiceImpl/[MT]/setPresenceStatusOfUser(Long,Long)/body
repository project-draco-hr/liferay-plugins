{
  try {
    UserPresence userPresence=getUserPresence(userId);
    userPresence.setPresenceStatus(status);
    updateUserPresence(userPresence);
  }
 catch (  NoSuchUserPresenceException noSuchUserPresenceException) {
    UserPresence pUserNew=new UserPresenceImpl();
    pUserNew.setPresenceUserId(userId);
    pUserNew.setPresenceStatus(status);
    try {
      addUserPresence(pUserNew);
    }
 catch (    Exception se) {
      throw new RUONException(se);
    }
  }
catch (  Exception e) {
    throw new RUONException(e);
  }
}
