{
  String lifecycle=parameterMap.get("wsrp-urlType");
  LiferayPortletURL portletURL=null;
  if (lifecycle.equals("blockingAction")) {
    portletURL=(LiferayPortletURL)renderResponse.createActionURL();
  }
 else   if (lifecycle.equals("render")) {
    portletURL=(LiferayPortletURL)renderResponse.createRenderURL();
  }
 else   if (lifecycle.equals("resource")) {
    portletURL=(LiferayPortletURL)renderResponse.createResourceURL();
  }
  for (  Map.Entry<String,String> parameter : parameterMap.entrySet()) {
    String name=parameter.getKey();
    String value=parameter.getValue();
    if (name.equals("wsrp-mode")) {
      portletURL.setPortletMode(new PortletMode(value.substring(5)));
    }
 else     if (name.equals("wsrp-resourceID")) {
      portletURL.setResourceID(value);
    }
 else     if (name.equals("wsrp-urlType")) {
    }
 else     if (name.equals("wsrp-windowState")) {
      portletURL.setWindowState(new WindowState(value.substring(5)));
    }
 else {
      portletURL.setParameter(name,value);
    }
  }
  return portletURL.toString();
}
