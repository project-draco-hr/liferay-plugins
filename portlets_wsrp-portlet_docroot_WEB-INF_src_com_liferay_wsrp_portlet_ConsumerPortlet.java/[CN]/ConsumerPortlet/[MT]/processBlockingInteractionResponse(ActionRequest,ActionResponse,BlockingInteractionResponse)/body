{
  PortletSession portletSession=actionRequest.getPortletSession();
  UpdateResponse updateResponse=blockingInteractionResponse.getUpdateResponse();
  String redirectURL=blockingInteractionResponse.getRedirectURL();
  if (Validator.isNotNull(redirectURL)) {
    actionResponse.sendRedirect(redirectURL);
    return;
  }
  portletSession.setAttribute(_MARKUP_CONTEXT,updateResponse.getMarkupContext());
  portletSession.setAttribute(_NAVIGATIONAL_CONTEXT,updateResponse.getNavigationalContext());
  portletSession.setAttribute(_PORTLET_CONTEXT,updateResponse.getPortletContext());
  String portletMode=updateResponse.getNewMode();
  if (Validator.isNotNull(portletMode)) {
    actionResponse.setPortletMode(getPortletMode(portletMode));
  }
  String windowState=updateResponse.getNewWindowState();
  if (Validator.isNotNull(windowState)) {
    actionResponse.setWindowState(getWindowState(windowState));
  }
  portletSession.setAttribute(_SESSION_CONTEXT,updateResponse.getSessionContext());
}
