{
  initContexts(eventRequest,eventResponse,wsrpConsumerPortlet,wsrpConsumerManager,markupParams,portletContext,runtimeContext,userContext);
  eventParams.setPortletStateChange(StateChange.cloneBeforeWrite);
  javax.portlet.Event jxEvent=eventRequest.getEvent();
  KeyValuePair[] payloadKvps=(KeyValuePair[])jxEvent.getValue();
  NamedString[] namedStrings=new NamedString[payloadKvps.length];
  for (int i=0; i < namedStrings.length; i++) {
    namedStrings[i]=new NamedString();
    namedStrings[i].setName(payloadKvps[i].getKey());
    namedStrings[i].setName(payloadKvps[i].getValue());
  }
  EventPayload eventPayload=new EventPayload();
  eventPayload.setNamedStringArray(namedStrings);
  Event event=new Event();
  event.setPayload(eventPayload);
  eventParams.setEvents(new Event[]{event});
}
