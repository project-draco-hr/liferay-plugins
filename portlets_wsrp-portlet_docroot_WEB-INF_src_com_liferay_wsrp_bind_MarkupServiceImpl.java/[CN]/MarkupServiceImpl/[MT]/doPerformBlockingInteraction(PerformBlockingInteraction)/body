{
  WSRPProducer wsrpProducer=getWSRPProducer();
  Http.Options httpOptions=new Http.Options();
  addHeaders(performBlockingInteraction.getMarkupParams(),httpOptions);
  httpOptions.setLocation(getURL(performBlockingInteraction,wsrpProducer));
  PortletContext portletContext=performBlockingInteraction.getPortletContext();
  InteractionParams interactionParams=performBlockingInteraction.getInteractionParams();
  NamedString[] formParameters=interactionParams.getFormParameters();
  if (formParameters != null) {
    MarkupParams markupParams=performBlockingInteraction.getMarkupParams();
    NavigationalContext navigationalContext=markupParams.getNavigationalContext();
    String namespace=PortalUtil.getPortletNamespace(getPortletId(portletContext,navigationalContext));
    for (    NamedString formParameter : formParameters) {
      httpOptions.addPart(namespace + formParameter.getName(),formParameter.getValue());
    }
  }
  httpOptions.setPost(true);
  String content=getContent(httpOptions);
  MarkupContext markupContext=new MarkupContext();
  markupContext.setItemString(content);
  markupContext.setRequiresRewriting(true);
  BlockingInteractionResponse blockingInteractionResponse=new BlockingInteractionResponse();
  UpdateResponse updateResponse=new UpdateResponse();
  updateResponse.setMarkupContext(markupContext);
  blockingInteractionResponse.setUpdateResponse(updateResponse);
  return blockingInteractionResponse;
}
