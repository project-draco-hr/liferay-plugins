{
  String portletId=getPortletId(portletContext);
  if (navigationalContext != null) {
    String opaqueValue=navigationalContext.getOpaqueValue();
    Map<String,String[]> parameterMap=HttpUtil.parameterMapFromString(opaqueValue);
    if (parameterMap.containsKey(_STRUTS_ACTION_PORTLET_CONFIGURATION)) {
      portletId=PortletKeys.PORTLET_CONFIGURATION;
    }
  }
  return portletId;
}
