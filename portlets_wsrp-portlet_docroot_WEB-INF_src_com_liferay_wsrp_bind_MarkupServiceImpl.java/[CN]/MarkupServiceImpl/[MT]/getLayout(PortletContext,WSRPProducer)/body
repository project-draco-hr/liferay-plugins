{
  Group group=GroupLocalServiceUtil.getGroup(wsrpProducer.getCompanyId(),WSRPProducerLocalServiceImpl.WSRP_GROUP_NAME);
  List<Layout> layouts=LayoutLocalServiceUtil.getLayouts(group.getGroupId(),false,LayoutConstants.DEFAULT_PARENT_LAYOUT_ID,0,1);
  if (layouts.isEmpty()) {
    throw new NoSuchLayoutException();
  }
  Layout layout=layouts.get(0);
  LayoutTypePortlet layoutTypePortlet=(LayoutTypePortlet)layout.getLayoutType();
  String portletId=getPortletId(portletContext);
  if (!layoutTypePortlet.hasPortletId(portletId)) {
    layoutTypePortlet.addPortletId(0,portletId,"column-1",-1,false);
    LayoutLocalServiceUtil.updateLayout(layout.getGroupId(),layout.isPrivateLayout(),layout.getLayoutId(),layout.getTypeSettings());
  }
  return layout;
}
