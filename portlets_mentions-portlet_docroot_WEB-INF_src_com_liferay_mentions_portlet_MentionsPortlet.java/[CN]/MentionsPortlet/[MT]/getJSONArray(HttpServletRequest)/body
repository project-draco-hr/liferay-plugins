{
  JSONArray jsonArray=JSONFactoryUtil.createJSONArray();
  ThemeDisplay themeDisplay=(ThemeDisplay)request.getAttribute(WebKeys.THEME_DISPLAY);
  PortletDisplay portletDisplay=themeDisplay.getPortletDisplay();
  String query=ParamUtil.getString(request,"query");
  SocialInteractionsConfiguration socialInteractionsConfiguration=SocialInteractionsConfigurationUtil.getSocialInteractionsConfiguration(themeDisplay.getCompanyId(),portletDisplay.getId());
  List<User> users=MentionsUserFinderUtil.getUsers(themeDisplay.getCompanyId(),themeDisplay.getUserId(),query,socialInteractionsConfiguration);
  for (  User user : users) {
    if (user.isDefaultUser() || (themeDisplay.getUserId() == user.getUserId())) {
      continue;
    }
    JSONObject jsonObject=JSONFactoryUtil.createJSONObject();
    jsonObject.put("fullName",user.getFullName());
    jsonObject.put("portraitURL",user.getPortraitURL(themeDisplay));
    jsonObject.put("screenName",user.getScreenName());
    jsonArray.put(jsonObject);
  }
  return jsonArray;
}
