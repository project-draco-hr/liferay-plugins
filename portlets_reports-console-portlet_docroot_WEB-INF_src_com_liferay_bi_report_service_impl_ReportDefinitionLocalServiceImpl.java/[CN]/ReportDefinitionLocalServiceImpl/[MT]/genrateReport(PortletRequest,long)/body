{
  _log.info("genrateReport");
  ReportDefinition definition=reportDefinitionPersistence.fetchByPrimaryKey(definitionId);
  String[] existingFiles=definition.getAttachmentsFiles();
  byte[] definitionFile=DLServiceUtil.getFile(definition.getCompanyId(),repositoryId,existingFiles[0]);
  ReportDesignRetriever retriever=new MemoryReportDesignRetriever(definition.getDefinitionName(),definitionFile);
  ReportRequest request=new ReportRequest(retriever,definition.getReportFormat(),null,null);
  Message message=new Message();
  message.setPayload(request);
  message.setResponseId(PortalUUIDUtil.generate());
  message.setResponseDestination("liferay/report_responses");
  MessageBusUtil.sendMessage("liferay/report_requests",message);
}
