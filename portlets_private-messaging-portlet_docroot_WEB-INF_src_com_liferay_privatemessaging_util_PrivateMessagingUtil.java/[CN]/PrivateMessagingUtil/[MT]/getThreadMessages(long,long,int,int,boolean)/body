{
  UserThread userThread=UserThreadLocalServiceUtil.getUserThread(userId,mbThreadId);
  MBMessage topMBMessage=MBMessageLocalServiceUtil.getMBMessage(userThread.getTopMBMessageId());
  List<MBMessage> mbMessages=MBMessageLocalServiceUtil.getThreadMessages(mbThreadId,WorkflowConstants.STATUS_ANY,new MessageCreateDateComparator(ascending));
  List<MBMessage> filteredMBMessages=new ArrayList<MBMessage>();
  for (  MBMessage mbMessage : mbMessages) {
    if (mbMessage.getMessageId() >= topMbMessage.getMessageId()) {
      filteredMBMessages.add(mbMessage);
    }
  }
  if (filteredMBMessages.isEmpty()) {
    return filteredMBMessages;
  }
 else   if ((start == QueryUtil.ALL_POS) || (end == QueryUtil.ALL_POS)) {
    return filteredMBMessages;
  }
 else   if (end > filteredMBMessages.size()) {
    end=filteredMBMessages.size();
  }
  return filteredMBMessages.subList(start,end);
}
