{
  try {
    String subject=preferences.getValue("automaticResponseSubject",StringPool.BLANK);
    String body=preferences.getValue("automaticResponseBody",StringPool.BLANK);
    String fromEmailAddress=preferences.getValue("emailAutomaticResponse",StringPool.BLANK);
    String emailField=preferences.getValue("emailField",StringPool.BLANK);
    String toEmailAddress=fieldsMap.get(emailField);
    if (Validator.isNull(toEmailAddress) || !Validator.isEmailAddress(toEmailAddress)) {
      _log.error("The automatic response email could bit be sent because " + "no valid email address was introduced");
      return false;
    }
 else {
      InternetAddress fromAddress=new InternetAddress(fromEmailAddress);
      InternetAddress toAddress=new InternetAddress(toEmailAddress);
      MailMessage mailMessage=new MailMessage(fromAddress,toAddress,subject,body,false);
      MailServiceUtil.sendEmail(mailMessage);
      return true;
    }
  }
 catch (  Exception e) {
    _log.error("The automatic response email could not be sent",e);
    return false;
  }
}
