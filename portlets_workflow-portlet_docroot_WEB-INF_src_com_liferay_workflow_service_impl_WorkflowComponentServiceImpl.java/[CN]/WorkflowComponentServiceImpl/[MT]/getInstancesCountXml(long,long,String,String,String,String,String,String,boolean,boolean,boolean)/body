{
  if (!_useSAW) {
    try {
      WorkflowURL url=getWorkflowURL();
      url.setParameter(Constants.CMD,"getInstancesCountXml");
      url.setParameter("definitionId",definitionId);
      url.setParameter("instanceId",instanceId);
      url.setParameter("definitionName",definitionName);
      url.setParameter("definitionVersion",definitionVersion);
      url.setParameter("startDateGT",startDateGT);
      url.setParameter("startDateLT",startDateLT);
      url.setParameter("endDateGT",endDateGT);
      url.setParameter("endDateLT",endDateLT);
      url.setParameter("hideEndedTasks",hideEndedTasks);
      url.setParameter("retrieveUserInstances",retrieveUserInstances);
      url.setParameter("andOperator",andOperator);
      return url.getContent();
    }
 catch (    Exception e) {
      throw new WorkflowComponentException(e);
    }
  }
 else {
    String userId=_getLoggedInUserId();
    if (definitionName == null) {
      definitionName="";
    }
    if (definitionVersion == null) {
      definitionVersion="";
    }
    if (endDateLT == null) {
      endDateLT="";
    }
    if (startDateGT == null) {
      startDateGT="";
    }
    if (startDateLT == null) {
      startDateLT="";
    }
    if (endDateGT == null) {
      endDateGT="";
    }
    if (userId == null) {
      userId="";
    }
    return SAWWorkflowLocalServiceUtil.getInstancesCountXml(definitionId,instanceId,definitionName,definitionVersion,startDateGT,startDateLT,endDateGT,endDateLT,userId,hideEndedTasks,retrieveUserInstances,andOperator);
  }
}
