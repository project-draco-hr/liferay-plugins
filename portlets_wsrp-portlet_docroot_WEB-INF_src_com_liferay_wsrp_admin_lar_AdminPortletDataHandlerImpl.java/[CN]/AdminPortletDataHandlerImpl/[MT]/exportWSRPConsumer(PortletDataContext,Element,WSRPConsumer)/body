{
  String path=getWSRPConsumerPath(portletDataContext,wsrpConsumer);
  if (!portletDataContext.isPathNotProcessed(path)) {
    return;
  }
  Element wsrpConsumerElement=wsrpConsumersElement.addElement("wsrp-consumer");
  portletDataContext.addClassedModel(wsrpConsumerElement,path,wsrpConsumer,_NAMESPACE);
  if (portletDataContext.getBooleanParameter(_NAMESPACE,"wsrp-consumer-portlets")) {
    List<WSRPConsumerPortlet> wsrpConsumerPortlets=WSRPConsumerPortletLocalServiceUtil.getWSRPConsumerPortlets(wsrpConsumer.getWsrpConsumerId(),QueryUtil.ALL_POS,QueryUtil.ALL_POS);
    Element wsrpConsumerPortletsElement=wsrpConsumerElement.addElement("wsrp-consumer-portlets");
    for (    WSRPConsumerPortlet wsrpConsumerPortlet : wsrpConsumerPortlets) {
      exportWSRPConsumerPortlet(portletDataContext,wsrpConsumerPortletsElement,wsrpConsumerPortlet);
    }
  }
}
