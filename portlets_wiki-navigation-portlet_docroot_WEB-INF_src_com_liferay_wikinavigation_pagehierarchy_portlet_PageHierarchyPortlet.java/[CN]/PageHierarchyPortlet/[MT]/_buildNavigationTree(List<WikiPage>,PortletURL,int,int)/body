{
  List<EntryDisplay> entries=new LinkedList<EntryDisplay>();
  for (  WikiPage wikiPage : pages) {
    if ((wikiPage.getParentPage() != null) && (curDepth == 1)) {
      continue;
    }
    String title=wikiPage.getTitle();
    WikiNode wikiNode=wikiPage.getNode();
    portletURL.setParameter("nodeId",String.valueOf(wikiNode.getNodeId()));
    portletURL.setParameter("title",title);
    EntryDisplay parentEntryDisplay=new EntryDisplay();
    parentEntryDisplay.setLabel(title);
    parentEntryDisplay.setUrl(portletURL.toString());
    if ((depth == WikiNavigationConstants.DEPTH_ALL) || (curDepth < depth)) {
      parentEntryDisplay.addChildren(_buildNavigationTree(wikiPage.getChildPages(),portletURL,depth,curDepth + 1));
    }
    entries.add(parentEntryDisplay);
  }
  return entries;
}
