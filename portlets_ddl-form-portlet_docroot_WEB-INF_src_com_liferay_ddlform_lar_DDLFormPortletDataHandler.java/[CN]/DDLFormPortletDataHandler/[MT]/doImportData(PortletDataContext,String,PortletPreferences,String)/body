{
  portletDataContext.importPermissions("com.liferay.portlet.dynamicdatalist",portletDataContext.getSourceGroupId(),portletDataContext.getScopeGroupId());
  Element recordSetsElement=portletDataContext.getImportDataGroupElement(DDLRecordSet.class);
  List<Element> recordSetElements=recordSetsElement.elements();
  Element recordSetElement=recordSetElements.get(0);
  StagedModelDataHandlerUtil.importStagedModel(portletDataContext,recordSetElement);
  Map<Long,Long> templateIds=(Map<Long,Long>)portletDataContext.getNewPrimaryKeysMap(DDMTemplate.class);
  long importedFormDDMTemplateId=GetterUtil.getLong(portletPreferences.getValue("formDDMTemplateId",null));
  long formDDMTemplateId=MapUtil.getLong(templateIds,importedFormDDMTemplateId,importedFormDDMTemplateId);
  portletPreferences.setValue("formDDMTemplateId",String.valueOf(formDDMTemplateId));
  long importedRecordSetId=GetterUtil.getLong(portletPreferences.getValue("recordSetId",null));
  Map<Long,Long> recordSetIds=(Map<Long,Long>)portletDataContext.getNewPrimaryKeysMap(DDLRecordSet.class);
  long recordSetId=MapUtil.getLong(recordSetIds,importedRecordSetId,importedRecordSetId);
  portletPreferences.setValue("recordSetId",String.valueOf(recordSetId));
  return portletPreferences;
}
