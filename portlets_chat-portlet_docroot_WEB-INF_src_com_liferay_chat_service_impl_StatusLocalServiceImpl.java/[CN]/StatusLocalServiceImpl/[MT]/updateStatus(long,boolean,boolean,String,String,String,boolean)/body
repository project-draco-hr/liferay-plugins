{
  Status status=statusPersistence.fetchByUserId(userId);
  if (status == null) {
    long statusId=CounterLocalServiceUtil.increment();
    status=statusPersistence.create(statusId);
    status.setUserId(userId);
  }
  status.setModifiedDate(System.currentTimeMillis());
  status.setOnline(online);
  status.setAwake(awake);
  status.setActiveBrowserKey(activeBrowserKey);
  status.setActivePanelId(activePanelId);
  status.setMessage(message);
  status.setPlaySound(playSound);
  statusPersistence.update(status,false);
  return status;
}
