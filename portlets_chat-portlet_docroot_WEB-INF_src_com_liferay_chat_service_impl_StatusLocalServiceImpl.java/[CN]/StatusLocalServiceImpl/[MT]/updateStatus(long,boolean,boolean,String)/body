{
  Status status=statusPersistence.fetchByUserId(userId);
  if (status == null) {
    long statusId=CounterLocalServiceUtil.increment();
    status=statusPersistence.create(statusId);
    status.setUserId(userId);
  }
  status.setModifiedDate(System.currentTimeMillis());
  status.setOnline(online);
  status.setAwake(awake);
  status.setActiveBrowserKey(activeBrowserKey);
  statusPersistence.update(status,false);
  RUONUtil.updatePresence(userId,"chat-portlet",online);
  return status;
}
