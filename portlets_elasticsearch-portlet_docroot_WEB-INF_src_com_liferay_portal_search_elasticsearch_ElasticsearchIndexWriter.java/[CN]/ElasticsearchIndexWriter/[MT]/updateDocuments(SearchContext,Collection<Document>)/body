{
  try {
    Client client=getClient();
    BulkRequestBuilder bulkRequestBuilder=client.prepareBulk();
    for (    Document document : documents) {
      UpdateRequestBuilder updateRequestBuilder=createUpdateRequestBuilder(searchContext,client,document);
      bulkRequestBuilder.add(updateRequestBuilder);
    }
    Future<BulkResponse> bulkRequestFuture=bulkRequestBuilder.execute();
    BulkResponse bulkResponse=bulkRequestFuture.get();
    logActionResponse(bulkResponse);
  }
 catch (  Exception e) {
    throw new SearchException("Failed to update documents: " + documents,e);
  }
}
