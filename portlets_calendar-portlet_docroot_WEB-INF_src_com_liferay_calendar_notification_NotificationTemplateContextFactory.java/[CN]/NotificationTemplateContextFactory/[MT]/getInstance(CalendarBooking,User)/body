{
  Calendar calendar=NotificationUtil.getRootCalendar(calendarBooking);
  NotificationTemplateContext notificationTemplateContext=new NotificationTemplateContext();
  Format dateFormatDateTime=FastDateFormatFactoryUtil.getDateTime(user.getLocale(),user.getTimeZone());
  long endTime=calendarBooking.getEndTime();
  notificationTemplateContext.setAttribute("endTime",dateFormatDateTime.format(endTime));
  notificationTemplateContext.setAttribute("location",calendarBooking.getLocation());
  Company company=CompanyLocalServiceUtil.getCompany(calendarBooking.getCompanyId());
  notificationTemplateContext.setAttribute("portalUrl",company.getPortalURL(calendarBooking.getGroupId()));
  notificationTemplateContext.setAttribute("portletName",LanguageUtil.get(getPortletConfig(),user.getLocale(),"javax.portlet.title.".concat(PortletKeys.CALENDAR)));
  long startTime=calendarBooking.getStartTime();
  notificationTemplateContext.setAttribute("startTime",dateFormatDateTime.format(startTime));
  notificationTemplateContext.setAttribute("title",calendarBooking.getTitle(user.getLocale()));
  notificationTemplateContext.setAttribute("toAddress",user.getEmailAddress());
  notificationTemplateContext.setAttribute("toName",user.getFullName());
  notificationTemplateContext.setCompanyId(calendarBooking.getCompanyId());
  notificationTemplateContext.setGroupId(calendarBooking.getGroupId());
  notificationTemplateContext.setCalendarId(calendar.getCalendarId());
  return notificationTemplateContext;
}
