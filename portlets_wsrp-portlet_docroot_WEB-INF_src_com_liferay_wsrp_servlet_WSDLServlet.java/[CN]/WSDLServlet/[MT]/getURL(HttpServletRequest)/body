{
  ServletContext servletContext=request.getSession().getServletContext();
  String hostname=ParamUtil.getString(request,"hostname",request.getServerName());
  String port=ParamUtil.getString(request,"port",Integer.toString(request.getServerPort()));
  String protocol=ParamUtil.getString(request,"protocol",request.getScheme());
  StringBundler sb=new StringBundler();
  sb.append(protocol);
  sb.append("://");
  sb.append(hostname);
  sb.append(StringPool.COLON);
  sb.append(port);
  sb.append(servletContext.getContextPath());
  return sb.toString();
}
