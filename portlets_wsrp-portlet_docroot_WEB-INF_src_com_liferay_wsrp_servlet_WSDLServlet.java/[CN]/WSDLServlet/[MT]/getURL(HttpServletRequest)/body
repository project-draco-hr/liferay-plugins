{
  HttpSession session=request.getSession();
  ServletContext servletContext=session.getServletContext();
  String hostname=ParamUtil.getString(request,"hostname",request.getServerName());
  String port=ParamUtil.getString(request,"port",Integer.toString(request.getServerPort()));
  String protocol=ParamUtil.getString(request,"protocol",request.getScheme());
  StringBundler sb=new StringBundler(5);
  sb.append(protocol);
  sb.append(Http.PROTOCOL_DELIMITER);
  sb.append(hostname);
  sb.append(StringPool.COLON);
  sb.append(port);
  sb.append(servletContext.getContextPath());
  return sb.toString();
}
