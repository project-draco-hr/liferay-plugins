{
  UploadPortletRequest uploadPortletRequest=PortalUtil.getUploadPortletRequest(actionRequest);
  File file=uploadPortletRequest.getFile("bundleFile");
  if ((file == null) || !file.exists()) {
    throw new IllegalArgumentException("file-does-not-exist");
  }
  InputStream inputStream=new BufferedInputStream(new FileInputStream(file));
  try {
    Bundle bundle=getBundle(_bundleContext,inputStream);
    if (bundle != null) {
      bundle.update(inputStream);
    }
  }
  finally {
    StreamUtil.cleanUp(inputStream);
  }
}
