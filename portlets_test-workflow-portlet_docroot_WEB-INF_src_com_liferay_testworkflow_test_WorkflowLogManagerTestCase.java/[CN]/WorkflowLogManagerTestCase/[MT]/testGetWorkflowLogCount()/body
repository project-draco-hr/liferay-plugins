{
  WorkflowInstance workflowInstance=WorkflowInstanceManagerUtil.startWorkflowInstance(user.getUserId(),_workflowDefinition.getName(),_workflowDefinition.getVersion(),null,null);
  int countForRoot=WorkflowLogManagerUtil.getWorkflowLogCount(workflowInstance.getWorkflowInstanceId(),false);
  assertTrue(countForRoot > 0);
  int countForAll=WorkflowLogManagerUtil.getWorkflowLogCount(workflowInstance.getWorkflowInstanceId(),true);
  assertTrue(countForAll > 0);
  assertTrue(countForAll > countForRoot);
  workflowInstance=WorkflowInstanceManagerUtil.getWorkflowInstance(workflowInstance.getWorkflowInstanceId());
  List<WorkflowInstance> childrenWorkflowInstances=workflowInstance.getChildren();
  assertEquals(3,childrenWorkflowInstances.size());
  int countForChild1=WorkflowLogManagerUtil.getWorkflowLogCount(childrenWorkflowInstances.get(0).getWorkflowInstanceId(),true);
  assertTrue(countForChild1 > 0);
  int countForChild2=WorkflowLogManagerUtil.getWorkflowLogCount(childrenWorkflowInstances.get(1).getWorkflowInstanceId(),true);
  assertTrue(countForChild1 > 0);
  int countForChild3=WorkflowLogManagerUtil.getWorkflowLogCount(childrenWorkflowInstances.get(2).getWorkflowInstanceId(),true);
  assertTrue(countForChild1 > 0);
  assertEquals(countForAll,countForRoot + countForChild1 + countForChild2+ countForChild3);
  WorkflowInstanceManagerUtil.deleteWorkflowInstance(workflowInstance.getWorkflowInstanceId());
}
