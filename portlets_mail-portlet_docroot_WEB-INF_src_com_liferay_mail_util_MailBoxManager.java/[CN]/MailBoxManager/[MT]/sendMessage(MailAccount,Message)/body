{
  Transport transport=null;
  try {
    Session session=getOutgoingSession(fromMailAccount);
    if (fromMailAccount.isMailSecure()) {
      transport=session.getTransport("smtps");
    }
 else {
      transport=session.getTransport("smtp");
    }
    transport.connect(fromMailAccount.getMailOutHostName(),fromMailAccount.getUsername(),fromMailAccount.getPassword());
    transport.sendMessage(message,message.getAllRecipients());
  }
 catch (  MessagingException me) {
    _log.error(me,me);
  }
}
