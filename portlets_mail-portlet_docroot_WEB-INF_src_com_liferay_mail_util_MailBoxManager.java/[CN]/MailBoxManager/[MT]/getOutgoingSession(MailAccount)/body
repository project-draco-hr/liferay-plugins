{
  Properties props=new Properties();
  if (mailAccount.isMailSecure()) {
    props.put("mail.smtps.auth","true");
    props.put("mail.smtp.host",mailAccount.getMailOutHostName());
    props.put("mail.smtps.port",mailAccount.getMailOutPort());
    props.put("mail.smtps.socketFactory.port",mailAccount.getMailOutPort());
    props.put("mail.smtps.socketFactory.class",_SSL_FACTORY);
    props.put("mail.smtps.socketFactory.fallback","false");
  }
 else {
    props.put("mail.smtp.host",mailAccount.getMailOutHostName());
    props.put("mail.smtp.port",mailAccount.getMailOutPort());
  }
  props.put("mail.debug","false");
  Session session=Session.getInstance(props,null);
  System.out.println(session.getProperties().toString());
  session.setDebug(false);
  return session;
}
