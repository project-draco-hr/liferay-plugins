{
  addAttribute("cn",_user.getScreenName());
  addAttribute("createTimestamp",_format.format(_user.getCreateDate()));
  addAttribute("displayName",_user.getFullName());
  addAttribute("givenName",_user.getFirstName());
  addAttribute("mail",_user.getEmailAddress());
  addAttribute("modifyTimestamp",_format.format(_user.getModifiedDate()));
  addAttribute("sn",_user.getLastName());
  addAttribute("objectclass","groupOfNames");
  addAttribute("objectclass","inetOrgPerson");
  addAttribute("objectclass","liferayPerson");
  addAttribute("objectclass","top");
  addAttribute("uid",String.valueOf(_user.getUserId()));
  addAttribute("uuid",_user.getUuid());
  DN grandParentDN=getParentDirectory().getParentDirectory().getName();
  try {
    long groupClassNameId=PortalUtil.getClassNameId(Group.class.getName());
    LinkedHashMap<String,Object> groupParams=new LinkedHashMap<String,Object>();
    groupParams.put("usersGroups",new Long(_user.getUserId()));
    List<Group> groups=GroupLocalServiceUtil.search(_user.getCompanyId(),new long[]{groupClassNameId},null,null,groupParams,-1,-1);
    for (    Group group : groups) {
      addAttribute("member","cn=" + group.getName() + ",ou="+ group.getName()+ ",ou=Communities,"+ grandParentDN.getName());
    }
    for (    Organization organization : _user.getOrganizations()) {
      addAttribute("member","cn=" + organization.getName() + ",ou="+ organization.getName()+ ",ou=Organizations,"+ grandParentDN.getName());
    }
    for (    Role role : _user.getRoles()) {
      addAttribute("member","cn=" + role.getName() + ",ou="+ role.getName()+ ",ou=Roles,"+ grandParentDN.getName());
    }
    for (    UserGroup userGroup : _user.getUserGroups()) {
      addAttribute("member","cn=" + userGroup.getName() + ",ou="+ userGroup.getName()+ ",ou=User Groups,"+ grandParentDN.getName());
    }
  }
 catch (  Exception e) {
  }
}
