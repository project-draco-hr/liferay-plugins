{
  Directory parentDirectory=getParentDirectory();
  CompanyDirectory companyDirectory=(CompanyDirectory)parentDirectory.getParentDirectory();
  DN companyDirectoryDN=companyDirectory.getName();
  long groupClassNameId=PortalUtil.getClassNameId(Group.class.getName());
  LinkedHashMap<String,Object> groupParams=new LinkedHashMap<String,Object>();
  groupParams.put("usersGroups",new Long(_user.getUserId()));
  List<Group> groups=GroupLocalServiceUtil.search(_user.getCompanyId(),new long[]{groupClassNameId},null,null,groupParams,QueryUtil.ALL_POS,QueryUtil.ALL_POS);
  for (  Group group : groups) {
    addAttribute("member","cn=" + group.getName() + ",ou="+ group.getName()+ ",ou=Communities,"+ companyDirectoryDN.getName());
  }
  for (  Organization organization : _user.getOrganizations()) {
    addAttribute("member","cn=" + organization.getName() + ",ou="+ organization.getName()+ ",ou=Organizations,"+ companyDirectoryDN.getName());
  }
  for (  Role role : _user.getRoles()) {
    addAttribute("member","cn=" + role.getName() + ",ou="+ role.getName()+ ",ou=Roles,"+ companyDirectoryDN.getName());
  }
  for (  UserGroup userGroup : _user.getUserGroups()) {
    addAttribute("member","cn=" + userGroup.getName() + ",ou="+ userGroup.getName()+ ",ou=User Groups,"+ companyDirectoryDN.getName());
  }
}
