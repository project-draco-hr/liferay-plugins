{
  final PortletPreferences prefs=request.getPreferences();
  final String url=PortletRequestUtils.getStringParameter(request,JiraPortletConstants.URL_PREFERENCE);
  prefs.setValue(JiraPortletConstants.URL_PREFERENCE,url);
  final String userName=PortletRequestUtils.getStringParameter(request,JiraPortletConstants.USER_NAME_PREFERENCE);
  prefs.setValue(JiraPortletConstants.USER_NAME_PREFERENCE,userName);
  final String password=PortletRequestUtils.getStringParameter(request,JiraPortletConstants.PASSWORD_PREFERENCE);
  prefs.setValue(JiraPortletConstants.PASSWORD_PREFERENCE,password);
  prefs.store();
  final PortletSession session=request.getPortletSession();
  session.removeAttribute(JiraPortletConstants.PROXY_KEY);
  session.removeAttribute(JiraPortletConstants.SECURITY_TOKEN_KEY);
  session.removeAttribute(JiraPortletConstants.MODE_KEY);
}
