{
  boolean deleteFolder=true;
  List<DLFileEntry> dlFileEntries=DLFileEntryLocalServiceUtil.getFileEntries(groupId,rootFolderId,QueryUtil.ALL_POS,QueryUtil.ALL_POS,null);
  for (  DLFileEntry dlFileEntry : dlFileEntries) {
    ServiceContext serviceContext=new ServiceContext();
    try {
      DLAppLocalServiceUtil.moveFileEntry(dlFileEntry.getUserId(),dlFileEntry.getFileEntryId(),DLFolderConstants.DEFAULT_PARENT_FOLDER_ID,serviceContext);
    }
 catch (    Exception e) {
      deleteFolder=false;
    }
  }
  List<DLFolder> dlFolders=DLFolderLocalServiceUtil.getFolders(groupId,rootFolderId);
  for (  DLFolder dlFolder : dlFolders) {
    ServiceContext serviceContext=new ServiceContext();
    try {
      DLAppLocalServiceUtil.updateFolder(dlFolder.getFolderId(),DLFolderConstants.DEFAULT_PARENT_FOLDER_ID,dlFolder.getName(),dlFolder.getDescription(),serviceContext);
    }
 catch (    Exception e) {
      deleteFolder=false;
    }
  }
  if (deleteFolder) {
    DLAppLocalServiceUtil.deleteFolder(rootFolderId);
  }
}
