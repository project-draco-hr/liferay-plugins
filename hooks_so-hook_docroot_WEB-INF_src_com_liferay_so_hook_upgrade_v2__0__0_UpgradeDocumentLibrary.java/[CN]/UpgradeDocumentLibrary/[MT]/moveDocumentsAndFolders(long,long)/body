{
  boolean deleteFolder=true;
  List<FileEntry> fileEntries=DLAppLocalServiceUtil.getFileEntries(groupId,rootFolderId);
  for (  FileEntry fileEntry : fileEntries) {
    ServiceContext serviceContext=new ServiceContext();
    try {
      DLAppLocalServiceUtil.moveFileEntry(fileEntry.getUserId(),fileEntry.getFileEntryId(),DLFolderConstants.DEFAULT_PARENT_FOLDER_ID,serviceContext);
    }
 catch (    Exception e) {
      deleteFolder=false;
    }
  }
  List<Folder> folders=DLAppLocalServiceUtil.getFolders(groupId,rootFolderId);
  for (  Folder folder : folders) {
    ServiceContext serviceContext=new ServiceContext();
    try {
      DLAppLocalServiceUtil.updateFolder(folder.getFolderId(),DLFolderConstants.DEFAULT_PARENT_FOLDER_ID,folder.getName(),folder.getDescription(),serviceContext);
    }
 catch (    Exception e) {
      deleteFolder=false;
    }
  }
  if (deleteFolder) {
    DLAppLocalServiceUtil.deleteFolder(rootFolderId);
  }
}
