{
  List<Group> groups=GroupLocalServiceUtil.getGroups(QueryUtil.ALL_POS,QueryUtil.ALL_POS);
  for (  Group group : groups) {
    if (!group.isCommunity() || group.getName().equals(GroupConstants.CONTROL_PANEL) || group.getName().equals(GroupConstants.GUEST)) {
      continue;
    }
    Layout layout=LayoutLocalServiceUtil.getLayout(group.getGroupId(),group.hasPrivateLayouts(),3);
    PortletPreferences portletSetup=PortletPreferencesFactoryUtil.getLayoutPortletSetup(layout,PortletKeys.DOCUMENT_LIBRARY);
    long rootFolderId=GetterUtil.getLong(portletSetup.getValue("rootFolderId",null),DLFolderConstants.DEFAULT_PARENT_FOLDER_ID);
    if (rootFolderId == DLFolderConstants.DEFAULT_PARENT_FOLDER_ID) {
      continue;
    }
    portletSetup.setValue("rootFolderId",String.valueOf(DLFolderConstants.DEFAULT_PARENT_FOLDER_ID));
    portletSetup.store();
    moveDocumentsAndFolders(group.getGroupId(),rootFolderId);
  }
}
