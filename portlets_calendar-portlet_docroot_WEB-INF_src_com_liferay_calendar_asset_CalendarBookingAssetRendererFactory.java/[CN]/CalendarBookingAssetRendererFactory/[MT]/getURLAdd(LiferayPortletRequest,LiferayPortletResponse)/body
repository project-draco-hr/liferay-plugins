{
  ThemeDisplay themeDisplay=(ThemeDisplay)liferayPortletRequest.getAttribute(WebKeys.THEME_DISPLAY);
  CalendarResource calendarResource=CalendarResourceUtil.getGroupCalendarResource(liferayPortletRequest,themeDisplay.getScopeGroupId());
  if (calendarResource == null) {
    return null;
  }
  Calendar calendar=calendarResource.getDefaultCalendar();
  if (!CalendarPermission.contains(themeDisplay.getPermissionChecker(),calendar.getCalendarId(),ActionKeys.MANAGE_BOOKINGS)) {
    return null;
  }
  PortletURL portletURL=liferayPortletResponse.createRenderURL(PortletKeys.CALENDAR);
  portletURL.setParameter("mvcPath","/edit_calendar_booking.jsp");
  portletURL.setParameter("calendarId",String.valueOf(calendar.getCalendarId()));
  return portletURL;
}
