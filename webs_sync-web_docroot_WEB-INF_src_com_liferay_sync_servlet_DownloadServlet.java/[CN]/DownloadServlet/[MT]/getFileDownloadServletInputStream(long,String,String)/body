{
  FileEntry fileEntry=DLAppServiceUtil.getFileEntryByUuidAndGroupId(uuid,groupId);
  if (fileEntry.isInTrash()) {
    throw new NoSuchFileEntryException();
  }
  if (Validator.isNull(version)) {
    version=fileEntry.getVersion();
  }
  FileVersion fileVersion=fileEntry.getFileVersion(version);
  InputStream inputStream=fileVersion.getContentStream(false);
  return new DownloadServletInputStream(inputStream,fileVersion.getMimeType(),fileVersion.getSize());
}
