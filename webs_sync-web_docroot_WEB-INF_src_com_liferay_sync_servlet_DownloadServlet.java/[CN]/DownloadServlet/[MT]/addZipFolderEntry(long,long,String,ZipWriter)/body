{
  List<FileEntry> fileEntries=DLAppServiceUtil.getFileEntries(repositoryId,folderId);
  for (  FileEntry fileEntry : fileEntries) {
    FileVersion fileVersion=fileEntry.getLatestFileVersion();
    InputStream inputStream=fileVersion.getContentStream(false);
    String filePath=folderPath + fileEntry.getTitle();
    zipWriter.addEntry(filePath,inputStream);
  }
  List<Folder> childFolders=DLAppServiceUtil.getFolders(repositoryId,folderId);
  for (  Folder childFolder : childFolders) {
    String childFolderPath=folderPath + childFolder.getName() + StringPool.FORWARD_SLASH;
    addZipFolderEntry(repositoryId,childFolder.getFolderId(),childFolderPath,zipWriter);
  }
}
