{
  Locale defaultLocale=LocaleUtil.getSiteDefault();
  String defaultLanguageId=LocaleUtil.toLanguageId(defaultLocale);
  boolean sendAsEmail=GetterUtil.getBoolean(getParameter(actionRequest,"sendAsEmail"));
  String subject=getParameter(actionRequest,"subject");
  boolean saveToDatabase=GetterUtil.getBoolean(getParameter(actionRequest,"saveToDatabase"));
  boolean saveToFile=GetterUtil.getBoolean(getParameter(actionRequest,"saveToFile"));
  if (!sendAsEmail && !saveToDatabase && !saveToFile) {
    SessionErrors.add(actionRequest,"handlingRequired");
  }
  if (sendAsEmail) {
    if (Validator.isNull(subject)) {
      SessionErrors.add(actionRequest,"subjectRequired");
    }
    String[] emailAdresses=WebFormUtil.split(getParameter(actionRequest,"emailAddress"));
    String emailFromAddress=GetterUtil.getString(getParameter(actionRequest,"emailFromAddress"));
    if ((emailAdresses.length == 0) || Validator.isNull(emailFromAddress)) {
      SessionErrors.add(actionRequest,"emailAddressRequired");
    }
    if (Validator.isNotNull(emailFromAddress) && !Validator.isEmailAddress(emailFromAddress)) {
      SessionErrors.add(actionRequest,"emailAddressInvalid");
    }
 else {
      for (      String emailAdress : emailAdresses) {
        emailAdress=emailAdress.trim();
        if (!Validator.isEmailAddress(emailAdress)) {
          SessionErrors.add(actionRequest,"emailAddressInvalid");
          break;
        }
      }
    }
  }
  validateFieldNames(actionRequest);
}
