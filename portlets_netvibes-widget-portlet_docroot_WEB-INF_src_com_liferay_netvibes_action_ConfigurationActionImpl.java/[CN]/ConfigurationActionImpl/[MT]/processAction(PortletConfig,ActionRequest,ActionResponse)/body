{
  String cmd=ParamUtil.getString(actionRequest,Constants.CMD);
  if (cmd.equals(Constants.SEARCH)) {
    return;
  }
 else   if (cmd.equals(Constants.UPDATE)) {
    String widgetUrl=ParamUtil.getString(actionRequest,"widgetUrl");
    String widgetTitle=ParamUtil.getString(actionRequest,"widgetTitle");
    String widgetAuthor=ParamUtil.getString(actionRequest,"widgetAuthor");
    String widgetSummary=ParamUtil.getString(actionRequest,"widgetSummary");
    String widgetThumbnail=ParamUtil.getString(actionRequest,"widgetThumbnail");
    savePreferences(portletConfig,actionRequest,actionResponse,widgetUrl,widgetTitle,widgetAuthor,widgetSummary,widgetThumbnail);
  }
 else   if (cmd.equals(Constants.ADD)) {
    String widgetUrl=ParamUtil.getString(actionRequest,"addWidget");
    String widgetTitle="Netvibes widget";
    String widgetThumbnail="http://eco.netvibes.com/img/thumbnail/nopreview-160-120.png";
    savePreferences(portletConfig,actionRequest,actionResponse,widgetUrl,widgetTitle,StringPool.BLANK,StringPool.BLANK,widgetThumbnail);
  }
}
