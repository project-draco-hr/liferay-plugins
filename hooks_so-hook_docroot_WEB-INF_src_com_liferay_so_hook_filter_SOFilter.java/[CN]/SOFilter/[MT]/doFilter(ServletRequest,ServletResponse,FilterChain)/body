{
  try {
    HttpServletRequest request=(HttpServletRequest)servletRequest;
    User user=PortalUtil.getUser(request);
    if ((user == null) || !user.hasPrivateLayouts()) {
      filterChain.doFilter(servletRequest,servletResponse);
      return;
    }
    Boolean secure=PortalUtil.isSecure(request);
    String portalURL=PortalUtil.getPortalURL(request,secure);
    String redirect=user.getDisplayURL(portalURL,PortalUtil.getPathMain(),Boolean.TRUE);
    HttpServletResponse response=(HttpServletResponse)servletResponse;
    response.sendRedirect(redirect.toString());
  }
 catch (  Exception e) {
    filterChain.doFilter(servletRequest,servletResponse);
    if (_log.isDebugEnabled())     _log.debug(e,e);
  }
}
