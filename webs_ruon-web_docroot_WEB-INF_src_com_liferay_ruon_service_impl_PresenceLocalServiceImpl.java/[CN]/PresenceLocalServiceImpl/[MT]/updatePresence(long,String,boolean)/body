{
  long networkId=networkLocalService.getNetworkId(networkName);
  Presence presence=presencePersistence.fetchByU_N(userId,networkId);
  if (presence == null) {
    long presenceId=CounterLocalServiceUtil.increment();
    presence=presencePersistence.create(presenceId);
    presence.setUserId(userId);
    presence.setNetworkId(networkId);
  }
  presence.setModifiedDate(System.currentTimeMillis());
  presence.setOnline(online);
  presencePersistence.update(presence,false);
  return presence;
}
