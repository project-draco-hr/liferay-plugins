{
  User user=UserLocalServiceUtil.getUser(userId);
  if (!user.hasPrivateLayouts()) {
    return null;
  }
  PortletURL portletURL=PortletURLFactoryUtil.create(request,PortletKeys.SITE_REDIRECTOR,themeDisplay.getPlid(),PortletRequest.ACTION_PHASE);
  portletURL.setWindowState(WindowState.NORMAL);
  portletURL.setPortletMode(PortletMode.VIEW);
  portletURL.setParameter("groupId",String.valueOf(user.getGroup().getGroupId()));
  portletURL.setParameter("privateLayout",Boolean.TRUE.toString());
  portletURL.setParameter("struts_action","/my_sites/view");
  return portletURL.toString();
}
