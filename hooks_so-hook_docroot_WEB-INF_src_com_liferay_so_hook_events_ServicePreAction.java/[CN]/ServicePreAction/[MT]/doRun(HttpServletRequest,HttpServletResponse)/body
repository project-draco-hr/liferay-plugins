{
  ThemeDisplay themeDisplay=(ThemeDisplay)request.getAttribute(WebKeys.THEME_DISPLAY);
  String currentURL=PortalUtil.getCurrentURL(request);
  User user=UserLocalServiceUtil.getUser(themeDisplay.getUserId());
  if (currentURL.equals("/user") && user.hasPrivateLayouts()) {
    PortletURL portletURL=PortletURLFactoryUtil.create(request,PortletKeys.SITE_REDIRECTOR,themeDisplay.getPlid(),PortletRequest.ACTION_PHASE);
    portletURL.setParameter("struts_action","/my_sites/view");
    portletURL.setParameter("groupId",String.valueOf(user.getGroup().getGroupId()));
    portletURL.setParameter("privateLayout",String.valueOf(true));
    portletURL.setPortletMode(PortletMode.VIEW);
    portletURL.setWindowState(WindowState.NORMAL);
    response.sendRedirect(portletURL.toString());
  }
}
