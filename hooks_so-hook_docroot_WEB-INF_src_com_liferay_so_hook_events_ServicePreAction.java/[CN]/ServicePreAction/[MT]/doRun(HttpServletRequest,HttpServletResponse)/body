{
  ThemeDisplay themeDisplay=(ThemeDisplay)request.getAttribute(WebKeys.THEME_DISPLAY);
  String currentURL=PortalUtil.getCurrentURL(request);
  if (Validator.isNotNull(themeDisplay.getI18nLanguageId())) {
    int x=currentURL.indexOf(StringPool.SLASH,1);
    currentURL=currentURL.substring(x);
  }
  String redirect=null;
  if (isMyPlacesView(themeDisplay,currentURL)) {
    redirect=getRedirect(themeDisplay,request);
  }
 else   if (isDirectoryView(request,currentURL)) {
    redirect=getUserRedirect(themeDisplay,request,ParamUtil.getLong(request,"_11_p_u_i_d"));
  }
  if (Validator.isNotNull(redirect)) {
    response.sendRedirect(redirect);
  }
}
