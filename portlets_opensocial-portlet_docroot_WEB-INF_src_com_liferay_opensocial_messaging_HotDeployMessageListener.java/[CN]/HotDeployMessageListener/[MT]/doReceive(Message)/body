{
  String servletContextName=message.getString("servletContextName");
  if (!servletContextName.equals("opensocial")) {
    return;
  }
  String command=message.getString("command");
  if (command.equals("deploy")) {
    verifyGadgets();
    List<Company> companies=CompanyLocalServiceUtil.getCompanies();
    for (    Company company : companies) {
      PortletLocalServiceUtil.addPortletCategory(company.getCompanyId(),_GADGETS_CATEGORY);
    }
    GadgetLocalServiceUtil.initGadgets();
    checkExpando();
  }
 else   if (command.equals("undeploy")) {
    GadgetLocalServiceUtil.destroyGadgets();
  }
}
