{
  validate(categories);
  Gadget gadget=gadgetPersistence.findByPrimaryKey(gadgetId);
  gadget.setCategories(categories);
  gadgetPersistence.update(gadget,false);
  gadgetLocalService.initGadget(gadget.getUuid(),gadget.getCompanyId(),gadgetId,gadget.getName(),gadget.getCategories());
  return gadget;
}
