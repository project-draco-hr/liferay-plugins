{
  Date now=new Date();
  validate(name);
  Gadget gadget=gadgetPersistence.findByPrimaryKey(gadgetId);
  gadget.setModifiedDate(now);
  gadget.setName(name);
  gadgetPersistence.update(gadget,false);
  try {
    Portlet portlet=getPortlet(gadget);
    portlet.setPortletInfo(new PortletInfo(name,name,name,name));
    PortletInstanceFactoryUtil.updatePortletConfig(portlet);
    return gadget;
  }
 catch (  Exception e) {
    throw new PortalException(e);
  }
}
