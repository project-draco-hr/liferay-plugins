{
  Gadget importedGadget=null;
  try {
    importedGadget=GadgetLocalServiceUtil.getGadget(gadget.getUuid(),portletDataContext.getCompanyId());
    importedGadget.setName(gadget.getName());
    importedGadget.setUrl(gadget.getUrl());
    importedGadget.setPortletCategoryNames(gadget.getPortletCategoryNames());
    GadgetLocalServiceUtil.updateGadget(importedGadget);
  }
 catch (  NoSuchGadgetException nsge) {
    ServiceContext serviceContext=portletDataContext.createServiceContext(gadgetElement,gadget,_NAMESPACE);
    serviceContext.setUuid(gadget.getUuid());
    GadgetLocalServiceUtil.addGadget(portletDataContext.getCompanyId(),gadget.getUrl(),gadget.getPortletCategoryNames(),serviceContext);
  }
}
