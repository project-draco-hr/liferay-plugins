{
  Element kbArticleAttachmentsElement=rootElement.addElement("kb-article-attachments");
  kbArticleAttachmentsElement.addAttribute("resource-prim-key",String.valueOf(kbArticle.getResourcePrimKey()));
  String rootPath=getPortletPath(portletDataContext) + "/kbarticles/attachments/" + kbArticle.getResourcePrimKey();
  List<FileEntry> attachmentsFileEntries=kbArticle.getAttachmentsFileEntries();
  for (  FileEntry fileEntry : attachmentsFileEntries) {
    String path=rootPath + StringPool.SLASH + fileEntry.getTitle();
    Element fileElement=kbArticleAttachmentsElement.addElement("file");
    fileElement.addAttribute("path",path);
    fileElement.addAttribute("file-name",fileEntry.getTitle());
    portletDataContext.addZipEntry(path,fileEntry.getContentStream());
  }
}
