{
  long userId=context.getUserId(article.getUserUuid());
  long parentResourcePrimKey=MapUtil.getLong(resourcePrimKeys,article.getParentResourcePrimKey());
  int priority=article.getPriority();
  String dirName=MapUtil.getString(dirNames,String.valueOf(article.getResourcePrimKey()));
  int maxPriority=ArticleLocalServiceUtil.getGroupArticlesCount(context.getGroupId(),parentResourcePrimKey);
  if (priority > maxPriority) {
    priority=maxPriority;
  }
  ServiceContext serviceContext=new ServiceContext();
  serviceContext.setAddCommunityPermissions(true);
  serviceContext.setAddGuestPermissions(true);
  serviceContext.setCreateDate(article.getCreateDate());
  serviceContext.setModifiedDate(article.getModifiedDate());
  serviceContext.setScopeGroupId(context.getGroupId());
  Article importedArticle=null;
  if (context.getDataStrategy().equals(PortletDataHandlerKeys.DATA_STRATEGY_MIRROR)) {
    Article existingArticle=ArticleUtil.fetchByUUID_G(article.getUuid(),context.getGroupId());
    if (existingArticle == null) {
      importedArticle=importArticleVersions(context,article.getUuid(),parentResourcePrimKey,priority,dirName,articleEl);
    }
 else {
      importedArticle=ArticleLocalServiceUtil.updateArticle(userId,existingArticle.getResourcePrimKey(),parentResourcePrimKey,article.getTitle(),article.getContent(),article.getDescription(),priority,dirName,serviceContext);
    }
  }
 else {
    importedArticle=importArticleVersions(context,null,parentResourcePrimKey,priority,dirName,articleEl);
  }
  resourcePrimKeys.put(article.getResourcePrimKey(),importedArticle.getResourcePrimKey());
  context.importPermissions(Article.class,article.getResourcePrimKey(),importedArticle.getResourcePrimKey());
  if (context.getBooleanParameter(_NAMESPACE,"comments")) {
    context.importComments(Article.class,article.getResourcePrimKey(),importedArticle.getResourcePrimKey(),context.getGroupId());
  }
}
