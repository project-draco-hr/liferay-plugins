{
  List<Element> kbArticleAttachmentsElements=rootElement.elements("kb-article-attachments");
  for (  Element kbArticleAttachmentsElement : kbArticleAttachmentsElements) {
    String resourcePrimKey=kbArticleAttachmentsElement.attributeValue("resource-prim-key");
    String dirName="knowledgebase/temp/import/" + importId + StringPool.SLASH+ resourcePrimKey;
    DLStoreUtil.addDirectory(portletDataContext.getCompanyId(),CompanyConstants.SYSTEM,dirName);
    List<Element> fileElements=kbArticleAttachmentsElement.elements("file");
    ServiceContext serviceContext=new ServiceContext();
    serviceContext.setCompanyId(portletDataContext.getCompanyId());
    serviceContext.setScopeGroupId(portletDataContext.getScopeGroupId());
    for (    Element fileElement : fileElements) {
      String shortFileName=fileElement.attributeValue("short-file-name");
      String fileName=dirName + StringPool.SLASH + shortFileName;
      byte[] bytes=portletDataContext.getZipEntryAsByteArray(fileElement.attributeValue("path"));
      DLStoreUtil.addFile(portletDataContext.getCompanyId(),CompanyConstants.SYSTEM,fileName,bytes);
    }
    dirNames.put(resourcePrimKey,dirName);
  }
}
