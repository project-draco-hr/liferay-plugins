{
  List<Element> kbArticleAttachmentsElements=rootElement.elements("kb-article-attachments");
  for (int i=0; i < kbArticleAttachmentsElements.size(); i++) {
    Element kbArticleAttachmentsElement=kbArticleAttachmentsElements.get(i);
    String resourcePrimKey=kbArticleAttachmentsElement.attributeValue("resource-prim-key");
    String dirName="knowledgebase/temp/import/" + importId + StringPool.SLASH+ resourcePrimKey;
    DLLocalServiceUtil.addDirectory(portletDataContext.getCompanyId(),CompanyConstants.SYSTEM,dirName);
    List<Element> fileElements=kbArticleAttachmentsElement.elements("file");
    for (    Element fileElement : fileElements) {
      String shortFileName=fileElement.attributeValue("short-file-name");
      String fileName=dirName + StringPool.SLASH + shortFileName;
      byte[] bytes=portletDataContext.getZipEntryAsByteArray(fileElement.attributeValue("path"));
      ServiceContext serviceContext=new ServiceContext();
      DLLocalServiceUtil.addFile(portletDataContext.getCompanyId(),CompanyConstants.SYSTEM_STRING,GroupConstants.DEFAULT_PARENT_GROUP_ID,CompanyConstants.SYSTEM,fileName,0,StringPool.BLANK,serviceContext.getCreateDate(null),serviceContext,bytes);
    }
    dirNames.put(resourcePrimKey,dirName);
  }
}
