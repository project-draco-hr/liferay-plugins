{
  if (!Validator.isXml(content)) {
    return new ArrayList<KBStructureField>();
  }
  Document document=SAXReaderUtil.read(content);
  List<KBStructureField> kbStructureFields=new ArrayList<KBStructureField>();
  Element rootElement=document.getRootElement();
  Element kbStructureElement=(Element)rootElement.selectSingleNode("kb-structure[@language-id='" + localizedLanguageId + "']");
  if (kbStructureElement == null) {
    String value=rootElement.attributeValue("default-language-id");
    kbStructureElement=(Element)rootElement.selectSingleNode("kb-structure[@language-id='" + value + "']");
  }
  for (  Element kbStructureFieldElement : kbStructureElement.elements()) {
    String kbStructureFieldId=kbStructureFieldElement.attributeValue("kb-structure-field-id");
    String kbStructureFieldName=StringEscapeUtils.unescapeXml(kbStructureFieldElement.attributeValue("name"));
    String kbStructureFieldLabel=StringEscapeUtils.unescapeXml(kbStructureFieldElement.attributeValue("label"));
    String kbStructureFieldType=StringEscapeUtils.unescapeXml(kbStructureFieldElement.attributeValue("type"));
    KBStructureField kbStructureField=new KBStructureFieldImpl();
    kbStructureField.setKbStructureFieldId(kbStructureFieldId);
    kbStructureField.setName(kbStructureFieldName);
    kbStructureField.setLabel(kbStructureFieldLabel);
    kbStructureField.setType(kbStructureFieldType);
    List<KBStructureOption> kbStructureOptions=new ArrayList<KBStructureOption>();
    for (    Element kbStructureOptionElement : kbStructureFieldElement.elements()) {
      String kbStructureOptionId=kbStructureOptionElement.attributeValue("kb-structure-option-id");
      String kbStructureOptionLabel=StringEscapeUtils.unescapeXml(kbStructureOptionElement.attributeValue("label"));
      String kbStructureOptionValue=StringEscapeUtils.unescapeXml(kbStructureOptionElement.attributeValue("value"));
      KBStructureOption kbStructureOption=new KBStructureOptionImpl();
      kbStructureOption.setKbStructureOptionId(kbStructureOptionId);
      kbStructureOption.setLabel(kbStructureOptionLabel);
      kbStructureOption.setValue(kbStructureOptionValue);
      kbStructureOptions.add(kbStructureOption);
    }
    kbStructureField.setKbStructureOptions(kbStructureOptions);
    kbStructureFields.add(kbStructureField);
  }
  return kbStructureFields;
}
