{
  Document document=SAXReaderUtil.createDocument();
  Element rootElement=document.addElement("form-builder");
  rootElement.addAttribute("default-language-id",localizedLanguageId);
  Element kbStructureElement=rootElement.addElement("kb-structure");
  kbStructureElement.addAttribute("language-id",localizedLanguageId);
  for (  KBStructureField kbStructureField : kbStructureFields) {
    String kbStructureFieldId=String.valueOf(CounterLocalServiceUtil.increment());
    String kbStructureFieldName=StringEscapeUtils.escapeXml(kbStructureField.getName());
    String kbStructureFieldLabel=StringEscapeUtils.escapeXml(kbStructureField.getLabel());
    String kbStructureFieldType=StringEscapeUtils.escapeXml(kbStructureField.getType());
    Element kbStructureFieldElement=kbStructureElement.addElement("kb-structure-field");
    kbStructureFieldElement.addAttribute("kb-structure-field-id",kbStructureFieldId);
    kbStructureFieldElement.addAttribute("name",kbStructureFieldName);
    kbStructureFieldElement.addAttribute("label",kbStructureFieldLabel);
    kbStructureFieldElement.addAttribute("type",kbStructureFieldType);
    for (    KBStructureOption kbStructureOption : kbStructureField.getKbStructureOptions()) {
      String kbStructureOptionId=String.valueOf(CounterLocalServiceUtil.increment());
      String kbStructureOptionLabel=StringEscapeUtils.escapeXml(kbStructureOption.getLabel());
      String kbStructureOptionValue=StringEscapeUtils.escapeXml(kbStructureOption.getValue());
      Element kbStructureOptionElement=kbStructureFieldElement.addElement("kb-structure-option");
      kbStructureOptionElement.addAttribute("kb-structure-option-id",kbStructureOptionId);
      kbStructureOptionElement.addAttribute("label",kbStructureOptionLabel);
      kbStructureOptionElement.addAttribute("value",kbStructureOptionValue);
    }
  }
  try {
    return document.formattedString();
  }
 catch (  IOException ioe) {
    return document.asXML();
  }
}
