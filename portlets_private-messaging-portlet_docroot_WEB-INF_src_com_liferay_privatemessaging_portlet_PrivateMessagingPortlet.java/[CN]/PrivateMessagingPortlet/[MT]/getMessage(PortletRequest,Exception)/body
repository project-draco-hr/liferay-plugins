{
  ThemeDisplay themeDisplay=(ThemeDisplay)portletRequest.getAttribute(WebKeys.THEME_DISPLAY);
  String message=null;
  if (key instanceof FileExtensionException) {
    message=themeDisplay.translate("document-names-must-end-with-one-of-the-following-extensions");
    message+=CharPool.SPACE + StringUtil.merge(PrefsPropsUtil.getStringArray(PropsKeys.DL_FILE_EXTENSIONS,StringPool.COMMA),StringPool.COMMA_AND_SPACE);
  }
 else   if (key instanceof FileNameException) {
    message=themeDisplay.translate("please-enter-a-file-with-a-valid-file-name");
  }
 else   if (key instanceof FileSizeException) {
    long fileMaxSize=PrefsPropsUtil.getLong(PropsKeys.DL_FILE_MAX_SIZE);
    if (fileMaxSize == 0) {
      fileMaxSize=PrefsPropsUtil.getLong(PropsKeys.UPLOAD_SERVLET_REQUEST_IMPL_MAX_SIZE);
    }
    fileMaxSize/=1024;
    message=themeDisplay.translate("please-enter-a-file-with-a-valid-file-size-no-larger-than-x",fileMaxSize);
  }
 else   if (key instanceof UserScreenNameException) {
    message=themeDisplay.translate("the-following-users-were-not-found");
    message+=CharPool.SPACE + key.getMessage();
  }
 else {
    message=themeDisplay.translate("your-request-failed-to-complete");
  }
  return message;
}
