{
  List<NotificationRecipient> notificationRecipients=_getNotificationRecipients(calendarBooking);
  for (  NotificationRecipient notificationRecipient : notificationRecipients) {
    User user=notificationRecipient.getUser();
    java.util.Calendar now=CalendarFactoryUtil.getCalendar(user.getTimeZone(),user.getLocale());
    long nowTime=now.getTimeInMillis();
    java.util.Calendar startDate=CalendarFactoryUtil.getCalendar(user.getTimeZone(),user.getLocale());
    long startTime=startDate.getTimeInMillis();
    if (nowTime > startTime) {
      return;
    }
    NotificationTemplateContext notificationTemplateContext=NotificationTemplateContextFactory.getInstance(calendarBooking,user);
    NotificationType notificationType=null;
    long diff=(startTime - nowTime) / _CHECK_INTERVAL;
    if (diff == (calendarBooking.getFirstReminder() / _CHECK_INTERVAL)) {
      notificationType=calendarBooking.getFirstReminderNotificationType();
    }
 else     if (diff == (calendarBooking.getSecondReminder() / _CHECK_INTERVAL)) {
      notificationType=calendarBooking.getSecondReminderNotificationType();
    }
    NotificationSender notificationSender=NotificationSenderFactory.getNotificationSender(notificationType.toString());
    notificationSender.sendNotification(notificationRecipient,NotificationTemplateType.REMINDER,notificationTemplateContext);
  }
}
