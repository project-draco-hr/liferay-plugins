{
  String content=HtmlUtil.escape(microblogsEntry.getContent());
  Pattern pattern=Pattern.compile("\\#\\S*");
  Matcher matcher=pattern.matcher(microblogsEntry.getContent());
  while (matcher.find()) {
    String result=matcher.group();
    String assetTagName=result.substring(1);
    PortletURL viewURL=renderResponse.createRenderURL();
    try {
      viewURL.setWindowState(LiferayWindowState.NORMAL);
    }
 catch (    WindowStateException wse) {
    }
    viewURL.setParameter("mvcPath","/microblogs/view.jsp");
    viewURL.setParameter("tabs1",assetTagName);
    viewURL.setParameter("assetTagName",assetTagName);
    content=StringUtil.replace(content,result,"<a href=\"" + viewURL + "\">"+ assetTagName+ "</a>");
  }
  pattern=Pattern.compile("\\[\\@\\S*\\]");
  matcher=pattern.matcher(content);
  while (matcher.find()) {
    String result=matcher.group();
    String assetTagName=result.replace("[@",StringPool.BLANK);
    assetTagName=assetTagName.replace("]",StringPool.BLANK);
    try {
      User taggedUser=UserLocalServiceUtil.getUserByScreenName(microblogsEntry.getCompanyId(),assetTagName);
      assetTagName=PortalUtil.getUserName(taggedUser.getUserId(),assetTagName);
      content=StringUtil.replace(content,result,"<a href=\"" + taggedUser.getDisplayURL(themeDisplay) + "\">"+ assetTagName+ "</a>");
    }
 catch (    NoSuchUserException nsue) {
    }
  }
  return content;
}
