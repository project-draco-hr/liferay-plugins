{
  if (recursive) {
    Files.walkFileTree(filePath,new SimpleFileVisitor<Path>(){
      @Override public FileVisitResult preVisitDirectory(      Path filePath,      BasicFileAttributes basicFileAttributes) throws IOException {
        register(filePath,false);
        return FileVisitResult.CONTINUE;
      }
    }
);
  }
 else {
    WatchKey watchKey=filePath.register(_watchService,StandardWatchEventKinds.ENTRY_CREATE,StandardWatchEventKinds.ENTRY_DELETE,StandardWatchEventKinds.ENTRY_MODIFY);
    _filePaths.put(watchKey,filePath);
    fireWatchEventListener(SyncWatchEvent.EVENT_TYPE_CREATE,filePath);
    if (_logger.isTraceEnabled()) {
      _logger.trace("Registered file path {}",filePath);
    }
  }
}
