{
  Map<String,List<String>> folderNameFileEntryNamesMap=getFolderNameFileEntryNamesMap(zipReader);
  Set<String> folderNames=folderNameFileEntryNamesMap.keySet();
  for (  String folderName : folderNames) {
    List<String> fileEntryNames=folderNameFileEntryNamesMap.get(folderName);
    String sectionIntroFileEntryName=null;
    List<String> sectionFileEntryNames=new ArrayList<String>();
    for (    String fileEntryName : fileEntryNames) {
      if (fileEntryName.endsWith(PortletPropsValues.MARKDOWN_IMPORTER_ARTICLE_INTRO)) {
        sectionIntroFileEntryName=fileEntryName;
      }
 else {
        sectionFileEntryNames.add(fileEntryName);
      }
    }
    long parentResourcePrimaryKey=KBArticleConstants.DEFAULT_PARENT_RESOURCE_PRIM_KEY;
    long sectionResourcePrimaryKey=parentResourcePrimaryKey;
    if (Validator.isNotNull(sectionIntroFileEntryName)) {
      KBArticle sectionIntroKBArticle=addKBArticleMarkdown(userId,groupId,parentResourcePrimaryKey,zipReader.getEntryAsString(sectionIntroFileEntryName),sectionIntroFileEntryName,zipReader,metadata,serviceContext);
      sectionResourcePrimaryKey=sectionIntroKBArticle.getResourcePrimKey();
    }
    for (    String sectionFileEntryName : sectionFileEntryNames) {
      String sectionMarkdown=zipReader.getEntryAsString(sectionFileEntryName);
      if (Validator.isNull(sectionMarkdown)) {
        if (_log.isWarnEnabled()) {
          _log.warn("Missing Markdown in file entry " + sectionFileEntryName);
        }
      }
      addKBArticleMarkdown(userId,groupId,sectionResourcePrimaryKey,sectionMarkdown,sectionFileEntryName,zipReader,metadata,serviceContext);
    }
  }
}
