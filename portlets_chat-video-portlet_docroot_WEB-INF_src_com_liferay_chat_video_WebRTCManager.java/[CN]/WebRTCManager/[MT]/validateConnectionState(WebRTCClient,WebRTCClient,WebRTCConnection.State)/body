{
  if (peer1.connectionExists(peer2) && peer2.connectionExists(peer1)) {
    if (peer1.getConnection(peer2) != peer2.getConnection(peer1)) {
      return false;
    }
    if (peer1.getConnection(peer2).getState() != expectedState) {
      return false;
    }
  }
  return true;
}
