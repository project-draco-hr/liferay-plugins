{
  DynamicQuery dynamicQuery=DynamicQueryFactoryUtil.forClass(KaleoInstance.class,PortletClassLoaderUtil.getClassLoader());
  dynamicQuery.add(PropertyFactoryUtil.forName("companyId").eq(serviceContext.getCompanyId()));
  if (userId != null) {
    dynamicQuery.add(PropertyFactoryUtil.forName("userId").eq(userId));
  }
  if (Validator.isNotNull(assetClassName)) {
    dynamicQuery.add(PropertyFactoryUtil.forName("className").like(assetClassName));
  }
  if (Validator.isNotNull(assetClassPK)) {
    dynamicQuery.add(PropertyFactoryUtil.forName("classPK").eq(assetClassPK));
  }
  if (completed != null) {
    if (completed) {
      dynamicQuery.add(PropertyFactoryUtil.forName("completionDate").isNotNull());
    }
 else {
      dynamicQuery.add(PropertyFactoryUtil.forName("completionDate").isNull());
    }
  }
  return dynamicQuery;
}
