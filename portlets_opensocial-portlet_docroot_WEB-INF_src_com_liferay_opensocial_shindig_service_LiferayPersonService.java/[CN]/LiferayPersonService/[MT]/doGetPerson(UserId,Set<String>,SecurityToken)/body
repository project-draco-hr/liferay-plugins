{
  String userIdString=userId.getUserId(securityToken);
  Person person=null;
  if (userIdString.startsWith("G-")) {
    String groupId=userIdString.substring("G-".length());
    person=getGroupPerson(groupId);
  }
 else {
    User user=UserLocalServiceUtil.getUserById(GetterUtil.getLong(userIdString));
    person=getUserPerson(user,fields,securityToken);
  }
  return person;
}
