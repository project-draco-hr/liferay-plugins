{
  List<Person> people=new ArrayList<Person>();
  for (  UserId userId : userIds) {
    Person person=null;
    String userIdString=userId.getUserId(securityToken);
    GroupId.Type groupIdType=groupId.getType();
    if (groupIdType.equals(GroupId.Type.all)) {
    }
 else     if (groupIdType.equals(GroupId.Type.friends)) {
    }
 else     if (groupIdType.equals(GroupId.Type.groupId)) {
      long liferayUserId=GetterUtil.getLong(userIdString);
      User owner=UserLocalServiceUtil.getUserById(liferayUserId);
      List<User> friends=UserLocalServiceUtil.getSocialUsers(owner.getUserId(),SocialRelationConstants.TYPE_BI_FRIEND,QueryUtil.ALL_POS,QueryUtil.ALL_POS,null);
      for (      User friend : friends) {
        person=getUserPerson(friend,fields,securityToken);
        people.add(person);
      }
    }
 else     if (groupIdType.equals(GroupId.Type.self)) {
      person=getUserPerson(userIdString,fields,securityToken);
      people.add(person);
    }
  }
  return new RestfulCollection<Person>(people,collectionOptions.getFirst(),people.size(),collectionOptions.getMax());
}
