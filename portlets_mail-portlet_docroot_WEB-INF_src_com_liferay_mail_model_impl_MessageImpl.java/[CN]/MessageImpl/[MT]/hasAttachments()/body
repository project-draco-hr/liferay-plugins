{
  String contentType=getContentType();
  int pos=contentType.indexOf(CharPool.SEMICOLON);
  if (pos != -1) {
    contentType=contentType.substring(0,pos);
  }
  contentType=contentType.toLowerCase();
  if (contentType != null && contentType.startsWith(ContentTypes.MULTIPART_MIXED)) {
    return true;
  }
  List<Attachment> attachments=AttachmentLocalServiceUtil.getAttachments(getMessageId());
  return !attachments.isEmpty();
}
