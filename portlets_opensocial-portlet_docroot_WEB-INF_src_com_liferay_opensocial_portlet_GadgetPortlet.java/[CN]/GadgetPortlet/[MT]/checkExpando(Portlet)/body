{
  long companyId=portlet.getCompanyId();
  if (companyId == CompanyConstants.SYSTEM) {
    return;
  }
  ExpandoTable expandoTable=ExpandoTableLocalServiceUtil.getTable(companyId,User.class.getName(),ShindigUtil.getTableOpenSocial());
  String namespace=PortalUtil.getPortletNamespace(portlet.getPortletId());
  String columnName=ShindigUtil.getColumnUserPrefs(namespace);
  try {
    ExpandoColumnLocalServiceUtil.getColumn(expandoTable.getTableId(),columnName);
  }
 catch (  NoSuchColumnException nsce) {
    ExpandoColumnLocalServiceUtil.addColumn(expandoTable.getTableId(),columnName,ExpandoColumnConstants.STRING);
  }
}
