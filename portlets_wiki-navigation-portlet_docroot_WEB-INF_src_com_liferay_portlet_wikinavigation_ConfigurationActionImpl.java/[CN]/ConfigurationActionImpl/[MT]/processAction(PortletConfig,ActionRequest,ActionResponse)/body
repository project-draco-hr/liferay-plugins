{
  try {
    String cmd=ParamUtil.getString(actionRequest,Constants.CMD);
    if (!cmd.equals(Constants.UPDATE)) {
      return;
    }
    long nodeId=ParamUtil.getLong(actionRequest,"nodeId");
    String title=ParamUtil.getString(actionRequest,"title");
    String type=ParamUtil.getString(actionRequest,"type");
    int displayDepth=ParamUtil.getInteger(actionRequest,"displayDepth");
    WikiNode node=WikiNodeServiceUtil.getNode(nodeId);
    String portletResource=ParamUtil.getString(actionRequest,"portletResource");
    PortletPreferences prefs=PortletPreferencesFactoryUtil.getPortletSetup(actionRequest,portletResource);
    prefs.setValue("node-id",String.valueOf(node.getNodeId()));
    prefs.setValue("title",title);
    prefs.setValue("type",type);
    prefs.setValue("displayDepth",String.valueOf(displayDepth));
    prefs.store();
    SessionMessages.add(actionRequest,portletConfig.getPortletName() + ".doConfigure");
  }
 catch (  NoSuchNodeException nsne) {
    SessionErrors.add(actionRequest,nsne.getClass().getName());
  }
}
