{
  ThemeDisplay themeDisplay=(ThemeDisplay)request.getAttribute(WebKeys.THEME_DISPLAY);
  long plid=ParamUtil.getLong(request,"plid");
  long resourcePrimKey=ParamUtil.getLong(request,"resourcePrimKey");
  if (!isValidPlid(plid)) {
    plid=themeDisplay.getPlid();
  }
  String redirect=null;
  Article article=getArticle(resourcePrimKey,themeDisplay);
  if (article == null) {
    redirect=getDisplayPortletURL(resourcePrimKey,plid,request);
  }
  if (redirect == null) {
    redirect=getArticleURL(false,plid,article,themeDisplay);
  }
  if (redirect == null) {
    redirect=getArticleURL(true,plid,article,themeDisplay);
  }
  if (redirect == null) {
    redirect=getAdminPortletURL(article,themeDisplay);
  }
  if (redirect == null) {
    redirect=getDisplayPortletURL(resourcePrimKey,plid,request);
  }
  response.sendRedirect(redirect);
  return null;
}
