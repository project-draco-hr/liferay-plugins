{
  Calendar calendar=CalendarLocalServiceUtil.getCalendar(calendarBooking.getCalendarId());
  List<Role> roles=CalendarLocalServiceUtil.getCalendarPermissionRoles(calendar.getCompanyId(),calendar.getResourceBlockId(),ActionKeys.MANAGE_BOOKINGS);
  List<User> manageBookingUsers=new ArrayList<User>();
  for (  Role role : roles) {
    if (role.getType() == RoleConstants.TYPE_REGULAR) {
      manageBookingUsers.addAll(UserLocalServiceUtil.getRoleUsers(role.getRoleId()));
    }
 else {
      List<UserGroupRole> userGroupRoles=UserGroupRoleLocalServiceUtil.getUserGroupRolesByGroupAndRole(calendar.getGroupId(),role.getRoleId());
      for (      UserGroupRole userGroupRole : userGroupRoles) {
        manageBookingUsers.add(userGroupRole.getUser());
      }
    }
  }
  return manageBookingUsers;
}
