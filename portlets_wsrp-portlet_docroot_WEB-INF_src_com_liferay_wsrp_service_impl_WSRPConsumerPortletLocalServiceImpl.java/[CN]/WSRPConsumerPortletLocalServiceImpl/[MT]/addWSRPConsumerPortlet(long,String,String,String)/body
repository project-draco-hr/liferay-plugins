{
  WSRPConsumer wsrpConsumer=wsrpConsumerPersistence.findByPrimaryKey(wsrpConsumerId);
  Date now=new Date();
  validate(name,portletHandle);
  long wsrpConsumerPortletId=CounterLocalServiceUtil.increment();
  WSRPConsumerPortlet wsrpConsumerPortlet=wsrpConsumerPortletPersistence.create(wsrpConsumerPortletId);
  wsrpConsumerPortlet.setCompanyId(wsrpConsumer.getCompanyId());
  wsrpConsumerPortlet.setCreateDate(now);
  wsrpConsumerPortlet.setModifiedDate(now);
  wsrpConsumerPortlet.setWsrpConsumerId(wsrpConsumerId);
  wsrpConsumerPortlet.setName(name);
  wsrpConsumerPortlet.setPortletHandle(portletHandle);
  wsrpConsumerPortletPersistence.update(wsrpConsumerPortlet,false);
  wsrpConsumerPortletLocalService.initWSRPConsumerPortlet(wsrpConsumer.getCompanyId(),wsrpConsumerId,wsrpConsumerPortletId,name,portletHandle,userToken);
  return wsrpConsumerPortlet;
}
