{
  String cmd=ParamUtil.getString(actionRequest,Constants.CMD);
  long starredGroupId=ParamUtil.getLong(actionRequest,"starredGroupId");
  JSONObject jsonObject=JSONFactoryUtil.createJSONObject();
  HttpServletResponse response=PortalUtil.getHttpServletResponse(actionResponse);
  try {
    GroupServiceUtil.getGroup(starredGroupId);
  }
 catch (  Exception e) {
    jsonObject.put("result","failure");
    ServletResponseUtil.write(response,jsonObject.toString());
    return;
  }
  PortletPreferences preferences=PortletPreferencesFactoryUtil.getPortletSetup(actionRequest,"5_WAR_soportlet");
  String starredGroupIds=preferences.getValue("starredGroupIds",StringPool.BLANK);
  if (cmd.equals(Constants.ADD)) {
    starredGroupIds=StringUtil.add(starredGroupIds,String.valueOf(starredGroupId));
  }
 else   if (cmd.equals(Constants.DELETE)) {
    starredGroupIds=StringUtil.remove(starredGroupIds,String.valueOf(starredGroupId));
  }
  preferences.setValue("starredGroupIds",starredGroupIds);
  preferences.store();
  jsonObject.put("result","success");
  ServletResponseUtil.write(response,jsonObject.toString());
}
