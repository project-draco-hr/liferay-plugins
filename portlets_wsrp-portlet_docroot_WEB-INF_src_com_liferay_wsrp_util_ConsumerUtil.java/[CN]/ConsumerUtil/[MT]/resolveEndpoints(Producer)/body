{
  WSDLFactory factory=WSDLFactory.newInstance();
  WSDLReader reader=factory.newWSDLReader();
  reader.setFeature("javax.wsdl.importDocuments",false);
  Definition definition=reader.readWSDL(producer.getWsdlURL());
  Map<String,Service> servicesMap=definition.getServices();
  Service wsrpV2Service=null;
  Collection<Service> services=servicesMap.values();
  for (  Service service : services) {
    Collection<Port> ports=service.getPorts().values();
    if (ports.size() <= 0) {
      continue;
    }
    Port port=ports.iterator().next();
    Binding binding=port.getBinding();
    String namespace=binding.getQName().getNamespaceURI();
    if (namespace.equals(WSRP_V2_BIND_NAMESPACE)) {
      wsrpV2Service=service;
      break;
    }
  }
  Collection<Port> ports=wsrpV2Service.getPorts().values();
  for (  Port port : ports) {
    Binding binding=port.getBinding();
    String bindingName=binding.getQName().getLocalPart().toLowerCase();
    if (!bindingName.contains("v2")) {
      continue;
    }
    if (bindingName.contains("markup")) {
      producer.setMarkupEndpoint(_getEndpointURL(port));
    }
 else     if (bindingName.contains("portletmanagement")) {
      producer.setPortletManagementEndpoint(_getEndpointURL(port));
    }
 else     if (bindingName.contains("registration")) {
      producer.setRegistrationEndpoint(_getEndpointURL(port));
    }
 else     if (bindingName.contains("servicedescription")) {
      producer.setServiceDescriptionEndpoint(_getEndpointURL(port));
    }
  }
}
