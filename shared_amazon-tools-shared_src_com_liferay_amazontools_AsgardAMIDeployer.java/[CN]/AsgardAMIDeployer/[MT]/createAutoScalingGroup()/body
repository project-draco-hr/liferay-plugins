{
  System.out.println("Creating Auto Scaling Group");
  String availabilityZone=properties.getProperty("availability.zone");
  Map<String,String> parameters=new HashMap<String,String>();
  parameters.put("checkHealth","true");
  parameters.put("imageId",getImageId(_imageName));
  String asgardClusterName=properties.getProperty("asgard.cluster.name");
  parameters.put("name",asgardClusterName);
  parameters.put("trafficAllowed","true");
  _jsonWebServiceClient.doPost("/" + availabilityZone + "/cluster/createNextGroup",parameters);
  sleep(20);
  String autoScalingGroupName=null;
  boolean created=false;
  for (int i=0; i < 6; i++) {
    String json=_jsonWebServiceClient.doGet("/" + availabilityZone + "/cluster/show/"+ asgardClusterName+ ".json",Collections.<String,String>emptyMap());
    JSONArray autoScalingGroupsJSONArray=new JSONArray(json);
    JSONObject autoScalingGroupJSONObject=autoScalingGroupsJSONArray.getJSONObject(autoScalingGroupsJSONArray.length() - 1);
    autoScalingGroupName=autoScalingGroupJSONObject.getString("autoScalingGroupName");
    if (!isInService(autoScalingGroupJSONObject)) {
      sleep(15);
    }
 else {
      created=true;
      break;
    }
  }
  if (!created) {
    System.out.println("Unable to create Auto Scaling Group " + autoScalingGroupName);
    return null;
  }
  sleep(10);
  System.out.println("Created Auto Scaling Group " + autoScalingGroupName);
  return autoScalingGroupName;
}
