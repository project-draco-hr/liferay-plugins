{
  if (event.getButton() == loginBtn) {
    String password=this.password.getValue().toString();
    try {
      JSONObject obj=Controller.get().getMailManager().storePassword(account.getAccountId(),password);
      String result=obj.getString("status");
      String message=obj.getString("message");
      if (result.equals("success")) {
        getWindow().showNotification(Lang.get(message));
        status=Status.VALIDATED;
        account.setPasswordDecrypted(password);
        if (savePassword.booleanValue() && !account.isSavePassword()) {
          account.setSavePassword(true);
          Controller.get().getAccountManager().updateAccount(account,Controller.get());
        }
        close();
      }
 else {
        getWindow().showNotification(Lang.get(message));
      }
    }
 catch (    PortalException e) {
      _log.warn("Failed to save password",e);
    }
catch (    SystemException e) {
      _log.warn("Failed to save password",e);
    }
  }
 else   if (event.getButton() == cancelBtn) {
    status=Status.CANCELED;
    close();
  }
}
