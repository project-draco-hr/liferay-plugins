{
  ServletContext ctx=event.getServletContext();
  String deploymentFilesParam=ctx.getInitParameter("deployment-files");
  String deploymentPathParam=ctx.getInitParameter("deployment-path");
  if ((deploymentFilesParam == null) || deploymentFilesParam.equals("")) {
    ctx.log("No 'deployment-files' are defined in the web.xml");
    return;
  }
  if ((deploymentPathParam == null) || deploymentPathParam.equals("")) {
    ctx.log("No 'deployment-path' was defined in the web.xml");
    return;
  }
  File deploymentPath=new File(deploymentPathParam);
  if (!deploymentPath.exists()) {
    ctx.log("The 'deployment-path' " + deploymentPathParam + " does not exist.");
    return;
  }
  if (!deploymentPath.isDirectory()) {
    ctx.log("The 'deployment-path' " + deploymentPathParam + " is not a directory.");
    return;
  }
  if (!deploymentPath.canWrite()) {
    ctx.log("The 'deployment-path' " + deploymentPathParam + " does not allow writing files.");
    return;
  }
  String[] deploymentFiles=deploymentFilesParam.split(",");
  for (  String deploymentFile : deploymentFiles) {
    String fileName=deploymentFile.trim();
    if (deploymentFile.lastIndexOf("/") != -1) {
      fileName=deploymentFile.substring(deploymentFile.lastIndexOf("/") + 1);
    }
    try {
      InputStream is=ctx.getResourceAsStream(deploymentFile);
      if (is == null) {
        ctx.log("Could not read '" + deploymentFile + "' from the war");
        continue;
      }
      ctx.log("Attempting to copy '" + deploymentFile + "'.");
      File file=new File(deploymentPath,fileName);
      copy(ctx,is,new FileOutputStream(file));
      ctx.log("Successfully copied '" + deploymentFile + "' to '"+ file.getAbsolutePath()+ "'.");
    }
 catch (    Exception e) {
      ctx.log("An error occured while attempting to process the file '" + deploymentFile + "': \n"+ e.getMessage(),e);
    }
  }
}
