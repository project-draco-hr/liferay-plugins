{
  verifyGadgets();
  List<Company> companies=CompanyLocalServiceUtil.getCompanies();
  for (  Company company : companies) {
    PortletLocalServiceUtil.addPortletCategory(company.getCompanyId(),_GADGETS_CATEGORY);
  }
  GadgetLocalServiceUtil.initGadgets();
  checkExpando();
  Thread currentThread=Thread.currentThread();
  ClassLoader classLoader=currentThread.getContextClassLoader();
  try {
    currentThread.setContextClassLoader(PortletClassLoaderUtil.getClassLoader());
    _guiceServletContextListener.contextInitialized(GuiceServletContextListener.getInitializedServletContextEvent());
  }
  finally {
    currentThread.setContextClassLoader(classLoader);
  }
}
