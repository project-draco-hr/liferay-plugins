{
  if (content == null) {
    return null;
  }
  Matcher matcher=_proxyUrlPattern.matcher(content);
  StringBuffer sb=new StringBuffer();
  try {
    while (matcher.find()) {
      String uuid=matcher.group(1);
      PortletURL portletURL=renderResponse.createRenderURL();
      portletURL.setParameter("uuid",uuid);
      if (maximizeLinks) {
        portletURL.setWindowState(WindowState.MAXIMIZED);
      }
      matcher.appendReplacement(sb,"\"" + portletURL.toString() + "\"");
    }
  }
 catch (  Exception e) {
    _log.error(e);
  }
  matcher.appendTail(sb);
  content=sb.toString();
  matcher=_resourceUrlPattern.matcher(content);
  sb=new StringBuffer();
  try {
    while (matcher.find()) {
      String imagePath=matcher.group(1);
      matcher.appendReplacement(sb,"\"" + getEndpointAddress() + "/alfresco"+ imagePath+ "?guest=true"+ "\"");
    }
  }
 catch (  Exception e) {
    _log.error(e);
  }
  matcher.appendTail(sb);
  content=sb.toString();
  return content;
}
