{
  Date now=new Date();
  validate(name);
  long wsrpProducerId=CounterLocalServiceUtil.increment();
  WSRPProducer wsrpProducer=wsrpProducerPersistence.create(wsrpProducerId);
  wsrpProducer.setCompanyId(companyId);
  wsrpProducer.setCreateDate(now);
  wsrpProducer.setModifiedDate(now);
  wsrpProducer.setName(name);
  wsrpProducer.setPortletIds(portletIds);
  wsrpProducerPersistence.update(wsrpProducer,false);
  String webId="wsrp-" + wsrpProducerId + ".com";
  String virtualHost=webId;
  String mx=webId;
  String shardName=null;
  boolean system=true;
  CompanyLocalServiceUtil.addCompany(webId,virtualHost,mx,shardName,system);
  return wsrpProducer;
}
