{
  String[] ids=StringUtil.split(portletIds);
  for (int i=0; i < ids.length; i++) {
    String portletId=ids[i];
    if (portletId.indexOf(PortletConstants.INSTANCE_SEPARATOR) != -1) {
      continue;
    }
    Portlet portlet=PortletLocalServiceUtil.getPortletById(portletId);
    if (portlet.isInstanceable()) {
      String instanceId=PwdGenerator.getPassword(PwdGenerator.KEY1 + PwdGenerator.KEY2 + PwdGenerator.KEY3,4);
      ids[i]=portletId + PortletConstants.INSTANCE_SEPARATOR + instanceId;
    }
  }
  return StringUtil.merge(ids);
}
