{
  RRule rRule=new RRule();
  List<WeekdayNum> weekdayNums=new ArrayList<WeekdayNum>();
  for (  Weekday weekday : recurrence.getWeekdays()) {
    com.google.ical.values.Weekday wday=_weekdaysMap.get(weekday);
    WeekdayNum weekdayNum=new WeekdayNum(weekday.getPosition(),wday);
    weekdayNums.add(weekdayNum);
  }
  rRule.setByDay(weekdayNums);
  rRule.setCount(recurrence.getCount());
  com.google.ical.values.Frequency frequency=com.google.ical.values.Frequency.valueOf(String.valueOf(recurrence.getFrequency()));
  rRule.setFreq(frequency);
  rRule.setInterval(recurrence.getInterval());
  Calendar jCalendar=recurrence.getUntil();
  if (jCalendar != null) {
    DateValue dateValue=new DateValueImpl(jCalendar.get(Calendar.YEAR),jCalendar.get(Calendar.MONTH),jCalendar.get(Calendar.DATE));
    rRule.setUntil(dateValue);
  }
  return rRule.toIcal();
}
