{
  try {
    Recurrence recurrence=new Recurrence();
    RRule rrule=new RRule(data);
    recurrence.setCount(rrule.getCount());
    recurrence.setFrequency(Frequency.parse(String.valueOf(rrule.getFreq())));
    recurrence.setInterval(rrule.getInterval());
    DateValue dateValue=rrule.getUntil();
    if (dateValue != null) {
      Calendar until=CalendarFactoryUtil.getCalendar();
      until.set(Calendar.DATE,dateValue.day());
      until.set(Calendar.MONTH,dateValue.month());
      until.set(Calendar.YEAR,dateValue.year());
      recurrence.setUntil(until);
    }
    List<Weekday> weekdays=new ArrayList<Weekday>();
    for (    WeekdayNum weekdayNum : rrule.getByDay()) {
      Weekday weekday=Weekday.parse(weekdayNum.wday.toString());
      weekday.setPosition(weekdayNum.num);
      weekdays.add(weekday);
    }
    recurrence.setWeekdays(weekdays);
    return recurrence;
  }
 catch (  ParseException pe) {
    _log.error("Unable to parse data " + data,pe);
  }
  return null;
}
