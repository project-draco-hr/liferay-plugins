{
  try {
    Recurrence recurrence=new Recurrence();
    RRule rRule=new RRule(data);
    recurrence.setCount(rRule.getCount());
    recurrence.setFrequency(Frequency.parse(String.valueOf(rRule.getFreq())));
    recurrence.setInterval(rRule.getInterval());
    DateValue dateValue=rRule.getUntil();
    if (dateValue != null) {
      Calendar jCalendar=CalendarFactoryUtil.getCalendar();
      jCalendar.set(Calendar.DATE,dateValue.day());
      jCalendar.set(Calendar.MONTH,dateValue.month() - 1);
      jCalendar.set(Calendar.YEAR,dateValue.year());
      recurrence.setUntil(jCalendar);
    }
    List<Weekday> weekdays=new ArrayList<Weekday>();
    for (    WeekdayNum weekdayNum : rRule.getByDay()) {
      Weekday weekday=Weekday.parse(weekdayNum.wday.toString());
      weekday.setPosition(weekdayNum.num);
      weekdays.add(weekday);
    }
    recurrence.setWeekdays(weekdays);
    return recurrence;
  }
 catch (  ParseException pe) {
    _log.error("Unable to parse data " + data,pe);
  }
  return null;
}
