{
  Map<String,Serializable> workflowContext=executionContext.getWorkflowContext();
  ServiceContext serviceContext=executionContext.getServiceContext();
  KaleoInstanceToken kaleoInstanceToken=executionContext.getKaleoInstanceToken();
  kaleoInstanceToken=kaleoInstanceTokenLocalService.completeKaleoInstanceToken(kaleoInstanceToken.getKaleoInstanceTokenId());
  KaleoInstanceToken parentKaleoInstanceToken=kaleoInstanceToken.getParentKaleoInstanceToken();
  if (parentKaleoInstanceToken.hasIncompleteChildrenKaleoInstanceToken()) {
    return;
  }
  parentKaleoInstanceToken=kaleoInstanceTokenLocalService.updateKaleoInstanceToken(parentKaleoInstanceToken.getKaleoInstanceTokenId(),currentKaleoNode.getKaleoNodeId());
  KaleoTransition kaleoTransition=_transitionSelector.selectTransition(currentKaleoNode,executionContext);
  ExecutionContext newExecutionContext=new ExecutionContext(parentKaleoInstanceToken,workflowContext,serviceContext);
  PathElement pathElement=new PathElement(currentKaleoNode,kaleoTransition.getTargetKaleoNode(),newExecutionContext);
  remainingPathElement.add(pathElement);
}
