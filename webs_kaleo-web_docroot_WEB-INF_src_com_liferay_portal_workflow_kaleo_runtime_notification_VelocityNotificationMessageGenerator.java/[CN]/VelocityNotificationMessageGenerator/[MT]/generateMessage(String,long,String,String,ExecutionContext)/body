{
  StringBundler sb=new StringBundler();
  sb.append(notificationName);
  sb.append(kaleoClassName);
  sb.append(kaleoClassPK);
  Template template=TemplateManagerUtil.getTemplate(TemplateManager.VELOCITY,sb.toString(),TemplateContextType.RESTRICTED);
  try {
    populateContextVariables(template,executionContext);
    StringWriter stringWriter=new StringWriter();
    template.processTemplate(stringWriter);
    return stringWriter.toString();
  }
 catch (  Exception e) {
    if (e instanceof NotificationMessageGenerationException) {
      throw new NotificationMessageGenerationException("Unable to generate notification message",e);
    }
 else {
      throw e;
    }
  }
}
