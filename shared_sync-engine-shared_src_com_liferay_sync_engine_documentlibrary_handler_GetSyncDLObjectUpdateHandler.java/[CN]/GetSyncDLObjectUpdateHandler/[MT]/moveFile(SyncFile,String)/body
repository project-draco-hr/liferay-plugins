{
  SyncFile sourceSyncFile=SyncFileService.fetchSyncFile(targetSyncFile.getRepositoryId(),getSyncAccountId(),targetSyncFile.getTypePK());
  if (sourceSyncFile == null) {
    return;
  }
  Path sourceFilePath=Paths.get(sourceSyncFile.getFilePathName());
  if (Files.exists(sourceFilePath)) {
    Path targetFilePath=Paths.get(targetFilePathName);
    Files.move(sourceFilePath,targetFilePath);
    sourceSyncFile.setFilePathName(targetFilePathName);
  }
 else {
    sourceSyncFile.setFilePathName(targetFilePathName);
    if (targetSyncFile.isFolder()) {
      Path targetFilePath=Paths.get(targetFilePathName);
      Files.createDirectories(targetFilePath);
      sourceSyncFile.setFileKey(FileUtil.getFileKey(targetFilePath));
      SyncFileService.update(sourceSyncFile);
    }
 else {
      downloadFile(sourceSyncFile,null,false);
    }
  }
  sourceSyncFile.setModifiedTime(targetSyncFile.getModifiedTime());
  sourceSyncFile.setParentFolderId(targetSyncFile.getParentFolderId());
  sourceSyncFile.setUiEvent(SyncFile.UI_EVENT_MOVED_REMOTE);
  SyncFileService.update(sourceSyncFile);
}
