{
  TreeMap<Integer,Long> bbbServersMap=new TreeMap<Integer,Long>();
  BBBServerLocalServiceUtil.checkBBBServers();
  List<BBBServer> bbbServers=BBBServerLocalServiceUtil.getBBBServers(true);
  if (bbbServers.isEmpty()) {
    return BBBMeetingConstants.BBB_SERVER_ID_DEFAULT;
  }
  for (  BBBServer bbbServer : bbbServers) {
    int count=BBBMeetingLocalServiceUtil.getBBBMeetingsCount(bbbServer.getBbbServerId(),BBBMeetingConstants.STATUS_IN_PROGRESS);
    bbbServersMap.put(count,bbbServer.getBbbServerId());
  }
  Map.Entry<Integer,Long> entry=bbbServersMap.firstEntry();
  return entry.getValue();
}
