{
  DynamicQuery dynamicQuery=DynamicQueryFactoryUtil.forClass(Message.class,PortletClassLoaderUtil.getClassLoader());
  dynamicQuery.add(RestrictionsFactoryUtil.eq("folderId",folderId));
  dynamicQuery.add(RestrictionsFactoryUtil.not(RestrictionsFactoryUtil.like("flags","%6,%")));
  return dynamicQueryCount(dynamicQuery);
}
