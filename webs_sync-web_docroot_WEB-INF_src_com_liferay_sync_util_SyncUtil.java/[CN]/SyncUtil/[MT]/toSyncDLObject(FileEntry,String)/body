{
  DLFileVersion dlFileVersion=null;
  Date lockExpirationDate=null;
  long lockUserId=0;
  String lockUserName=null;
  String type=null;
  Lock lock=fileEntry.getLock();
  if (lock != null) {
    dlFileVersion=DLFileVersionLocalServiceUtil.getFileVersion(fileEntry.getFileEntryId(),DLFileEntryConstants.PRIVATE_WORKING_COPY_VERSION);
    lockExpirationDate=lock.getExpirationDate();
    lockUserId=lock.getUserId();
    lockUserName=lock.getUserName();
    type=SyncConstants.TYPE_PRIVATE_WORKNG_COPY;
  }
 else {
    dlFileVersion=DLFileVersionLocalServiceUtil.getFileVersion(fileEntry.getFileEntryId(),fileEntry.getVersion());
    lockExpirationDate=null;
    lockUserId=0;
    lockUserName=StringPool.BLANK;
    type=SyncConstants.TYPE_FILE;
  }
  SyncDLObject syncDLObject=new SyncDLObjectImpl();
  syncDLObject.setCompanyId(dlFileVersion.getCompanyId());
  syncDLObject.setCreateDate(dlFileVersion.getCreateDate());
  syncDLObject.setModifiedDate(dlFileVersion.getModifiedDate());
  syncDLObject.setRepositoryId(dlFileVersion.getRepositoryId());
  syncDLObject.setParentFolderId(dlFileVersion.getFolderId());
  syncDLObject.setName(dlFileVersion.getTitle());
  syncDLObject.setExtension(dlFileVersion.getExtension());
  syncDLObject.setMimeType(dlFileVersion.getMimeType());
  syncDLObject.setDescription(dlFileVersion.getDescription());
  syncDLObject.setChangeLog(dlFileVersion.getChangeLog());
  syncDLObject.setExtraSettings(dlFileVersion.getExtraSettings());
  syncDLObject.setVersion(dlFileVersion.getVersion());
  syncDLObject.setSize(dlFileVersion.getSize());
  syncDLObject.setChecksum(getChecksum(dlFileVersion));
  syncDLObject.setEvent(event);
  syncDLObject.setLockExpirationDate(lockExpirationDate);
  syncDLObject.setLockUserId(lockUserId);
  syncDLObject.setLockUserName(lockUserName);
  syncDLObject.setType(type);
  syncDLObject.setTypePK(fileEntry.getFileEntryId());
  syncDLObject.setTypeUuid(fileEntry.getUuid());
  return syncDLObject;
}
