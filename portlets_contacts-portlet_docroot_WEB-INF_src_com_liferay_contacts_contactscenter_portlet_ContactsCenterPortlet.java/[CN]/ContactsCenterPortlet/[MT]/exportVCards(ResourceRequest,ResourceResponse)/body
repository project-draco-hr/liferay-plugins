{
  long userId=ParamUtil.getLong(resourceRequest,"userId");
  int socialRelationType=ParamUtil.getInteger(resourceRequest,"socialRelationType");
  List<User> users=UserLocalServiceUtil.getSocialUsers(userId,socialRelationType,QueryUtil.ALL_POS,QueryUtil.ALL_POS,null);
  String vCards=ContactsUtil.getVCards(users);
  HttpServletRequest request=PortalUtil.getHttpServletRequest(resourceRequest);
  HttpServletResponse response=PortalUtil.getHttpServletResponse(resourceResponse);
  ServletResponseUtil.sendFile(request,response,"vcards.vcf",vCards.getBytes(StringPool.UTF8),"text/x-vcard; charset=UTF-8");
}
