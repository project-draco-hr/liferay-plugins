{
  long[] userIds=StringUtil.split(ParamUtil.getString(resourceRequest,"userIds"),0L);
  List<User> users=new ArrayList<User>();
  for (  long userId : userIds) {
    users.add(UserServiceUtil.getUserById(userId));
  }
  String vCards=ContactsUtil.getVCards(users);
  HttpServletRequest request=PortalUtil.getHttpServletRequest(resourceRequest);
  HttpServletResponse response=PortalUtil.getHttpServletResponse(resourceResponse);
  ServletResponseUtil.sendFile(request,response,"vcards.vcf",vCards.getBytes(StringPool.UTF8),"text/x-vcard; charset=UTF-8");
}
