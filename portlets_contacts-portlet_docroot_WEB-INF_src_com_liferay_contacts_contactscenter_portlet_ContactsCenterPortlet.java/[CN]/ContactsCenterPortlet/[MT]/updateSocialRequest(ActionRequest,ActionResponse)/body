{
  ThemeDisplay themeDisplay=(ThemeDisplay)actionRequest.getAttribute(WebKeys.THEME_DISPLAY);
  long requestId=ParamUtil.getLong(actionRequest,"requestId");
  int status=ParamUtil.getInteger(actionRequest,"status");
  String notificationUuid=ParamUtil.getString(actionRequest,"notificationUuid");
  SocialRequest socialRequest=SocialRequestLocalServiceUtil.getSocialRequest(requestId);
  if (SocialRelationLocalServiceUtil.hasRelation(socialRequest.getReceiverUserId(),socialRequest.getUserId(),SocialRelationConstants.TYPE_UNI_ENEMY)) {
    status=SocialRequestConstants.STATUS_IGNORE;
  }
  SocialRequestLocalServiceUtil.updateRequest(requestId,status,themeDisplay);
  ChannelHubManagerUtil.confirmDelivery(themeDisplay.getCompanyId(),themeDisplay.getUserId(),notificationUuid,false);
}
