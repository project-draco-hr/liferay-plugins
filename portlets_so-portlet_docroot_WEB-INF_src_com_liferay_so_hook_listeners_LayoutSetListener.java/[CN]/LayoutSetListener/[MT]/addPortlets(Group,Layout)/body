{
  String propsKeyPrefix=PortletPropsKeys.SITE_LAYOUT_PORTLETS;
  if (group.isUser()) {
    propsKeyPrefix=PortletPropsKeys.USER_LAYOUT_PORTLETS;
  }
  LayoutTypePortlet layoutTypePortlet=(LayoutTypePortlet)layout.getLayoutType();
  LayoutTemplate layoutTemplate=layoutTypePortlet.getLayoutTemplate();
  List<String> columns=layoutTemplate.getColumns();
  for (  String column : columns) {
    layoutTypePortlet.setPortletIds(column,PortletProps.get(propsKeyPrefix + column));
  }
  LayoutLocalServiceUtil.updateLayout(layout.getGroupId(),layout.isPrivateLayout(),layout.getLayoutId(),layout.getTypeSettings());
}
