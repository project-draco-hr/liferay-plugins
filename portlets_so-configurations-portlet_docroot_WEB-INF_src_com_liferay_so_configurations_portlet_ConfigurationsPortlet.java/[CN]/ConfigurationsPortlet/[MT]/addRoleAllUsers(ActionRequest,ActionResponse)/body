{
  ThemeDisplay themeDisplay=(ThemeDisplay)actionRequest.getAttribute(WebKeys.THEME_DISPLAY);
  final Role role=RoleLocalServiceUtil.getRole(themeDisplay.getCompanyId(),RoleConstants.SOCIAL_OFFICE_USER);
  ActionableDynamicQuery actionableDynamicQuery=new UserActionableDynamicQuery(){
    @Override protected void performAction(    Object object) throws PortalException, SystemException {
      User user=(User)object;
      if (!user.isDefaultUser()) {
        UserLocalServiceUtil.addRoleUsers(role.getRoleId(),new long[]{user.getUserId()});
      }
    }
  }
;
  actionableDynamicQuery.setCompanyId(themeDisplay.getCompanyId());
  actionableDynamicQuery.performActions();
}
