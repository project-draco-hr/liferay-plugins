{
  try {
    SolrQuery solrQuery=new SolrQuery();
    solrQuery.setQuery(query.toString());
    solrQuery.setIncludeScore(true);
    boolean allResults=false;
    if ((start == QueryUtil.ALL_POS) && (end == QueryUtil.ALL_POS)) {
      solrQuery.setRows(0);
      allResults=true;
    }
 else {
      solrQuery.setStart(start);
      solrQuery.setRows(end - start);
    }
    if ((sorts != null) && (sorts.length > 0)) {
      for (int i=0; i < sorts.length; i++) {
        Sort sortField=sorts[i];
        ORDER order=ORDER.asc;
        if (sortField.isReverse()) {
          order=ORDER.desc;
        }
        solrQuery.addSortField(sortField.getFieldName(),order);
      }
    }
    QueryResponse response=_solrServer.query(solrQuery);
    return subset(solrQuery,response.getResults(),allResults);
  }
 catch (  Exception e) {
    _log.error("Error while sending request to Solr",e);
    throw new SearchException(e);
  }
}
