{
  try {
    SolrQuery solrQuery=new SolrQuery();
    solrQuery.setQuery(query.toString());
    solrQuery.setIncludeScore(true);
    boolean allResults=false;
    if ((start == QueryUtil.ALL_POS) && (end == QueryUtil.ALL_POS)) {
      solrQuery.setRows(0);
      allResults=true;
    }
 else {
      solrQuery.setStart(start);
      solrQuery.setRows(end - start);
    }
    if ((sorts != null) && (sorts.length > 0)) {
      for (int i=0; i < sorts.length; i++) {
        Sort sortField=sorts[i];
        if (sortField == null) {
          continue;
        }
        String sortFieldName=sortField.getFieldName();
        if (sortFieldName == null) {
          sortFieldName="score";
        }
        ORDER order=ORDER.asc;
        if (sortField.isReverse()) {
          order=ORDER.desc;
        }
        solrQuery.addSortField(sortFieldName,order);
      }
    }
    QueryResponse response=_solrServer.query(solrQuery);
    return subset(solrQuery,response.getResults(),allResults);
  }
 catch (  Exception e) {
    _log.error(e,e);
    throw new SearchException(e.getMessage());
  }
}
