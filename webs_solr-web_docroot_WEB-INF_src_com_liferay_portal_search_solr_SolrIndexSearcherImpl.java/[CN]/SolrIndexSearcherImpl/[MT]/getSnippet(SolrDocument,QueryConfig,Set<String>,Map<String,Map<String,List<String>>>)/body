{
  if (Validator.isNull(highlights)) {
    return StringPool.BLANK;
  }
  String key=(String)solrDocument.getFieldValue(Field.UID);
  Map<String,List<String>> uidHighlights=highlights.get(key);
  boolean localizedSearch=true;
  String defaultLanguageId=LocaleUtil.toLanguageId(LocaleUtil.getDefault());
  String queryLanguageId=LocaleUtil.toLanguageId(queryConfig.getLocale());
  if (defaultLanguageId.equals(queryLanguageId)) {
    localizedSearch=false;
  }
  String snippetField=StringPool.BLANK;
  if (localizedSearch) {
    String localizedName=DocumentImpl.getLocalizedName(queryConfig.getLocale(),Field.CONTENT);
    if (solrDocument.containsKey(localizedName)) {
      snippetField=localizedName;
    }
  }
 else {
    snippetField=Field.CONTENT;
  }
  List<String> snippets=uidHighlights.get(snippetField);
  String snippet=StringUtil.merge(snippets,"...");
  if (Validator.isNotNull(snippet)) {
    snippet=snippet + "...";
  }
 else {
    snippet=StringPool.BLANK;
  }
  Pattern pattern=Pattern.compile("<em>(.*?)</em>");
  Matcher matcher=pattern.matcher(snippet);
  while (matcher.find()) {
    queryTerms.add(matcher.group(1));
  }
  snippet=StringUtil.replace(snippet,"<em>","");
  snippet=StringUtil.replace(snippet,"</em>","");
  return snippet;
}
