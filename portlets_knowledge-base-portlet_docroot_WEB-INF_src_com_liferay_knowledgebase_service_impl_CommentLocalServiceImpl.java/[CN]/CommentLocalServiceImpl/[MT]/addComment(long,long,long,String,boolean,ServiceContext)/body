{
  User user=userPersistence.findByPrimaryKey(userId);
  long groupId=serviceContext.getScopeGroupId();
  Date now=new Date();
  validate(content);
  long commentId=counterLocalService.increment();
  Comment comment=commentPersistence.create(commentId);
  comment.setUuid(serviceContext.getUuid());
  comment.setGroupId(groupId);
  comment.setCompanyId(user.getCompanyId());
  comment.setUserId(user.getUserId());
  comment.setUserName(user.getFullName());
  comment.setCreateDate(serviceContext.getCreateDate(now));
  comment.setModifiedDate(serviceContext.getModifiedDate(now));
  comment.setClassNameId(classNameId);
  comment.setClassPK(classPK);
  comment.setContent(content);
  comment.setHelpful(helpful);
  commentPersistence.update(comment,false);
  return comment;
}
