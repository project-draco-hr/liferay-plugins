{
  if (state.isInitial() && !Validator.equals(definition.getInitialState(),state)) {
    throw new WorkflowException("Multiple initial states defined " + state.getName());
  }
 else   if (state.isTerminal() && !Validator.equals(definition.getTerminalState(),state)) {
    throw new WorkflowException("Multiple terminal states defined " + state.getName());
  }
}
