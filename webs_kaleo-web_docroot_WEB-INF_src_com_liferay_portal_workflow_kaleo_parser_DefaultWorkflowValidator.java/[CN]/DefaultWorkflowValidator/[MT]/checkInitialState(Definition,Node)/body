{
  if (node instanceof State) {
    State state=(State)node;
    if (state.isInitial()) {
      if (definition.getInitialState() != null) {
        throw new WorkflowException("Duplicate initial state " + state.getName());
      }
      definition.setInitialState(state);
    }
  }
}
