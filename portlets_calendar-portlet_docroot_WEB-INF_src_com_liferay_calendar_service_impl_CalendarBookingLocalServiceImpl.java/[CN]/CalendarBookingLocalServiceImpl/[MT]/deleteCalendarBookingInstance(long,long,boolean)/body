{
  CalendarBooking calendarBooking=calendarBookingPersistence.findByPrimaryKey(calendarBookingId);
  java.util.Calendar jCalendar=JCalendarUtil.getJCalendar(startDate);
  Recurrence recurrenceObj=calendarBooking.getRecurrenceObj();
  if (allFollowing) {
    jCalendar.add(java.util.Calendar.DATE,-1);
    recurrenceObj.setUntilJCalendar(jCalendar);
  }
 else {
    recurrenceObj.addExceptionDate(jCalendar);
  }
  calendarBooking.setRecurrence(RecurrenceSerializer.serialize(recurrenceObj));
  calendarBookingPersistence.update(calendarBooking,false);
}
