{
  long assetGroupId=calendarBooking.getGroupId();
  CalendarResource calendarResource=calendarBooking.getCalendarResource();
  if (calendarResource.getClassNameId() == PortalUtil.getClassNameId(Group.class)) {
    Group group=GroupLocalServiceUtil.getGroup(calendarResource.getClassPK());
    assetGroupId=group.getGroupId();
  }
  boolean visible=false;
  if (calendarBooking.isApproved()) {
    visible=true;
  }
  String summary=HtmlUtil.extractText(StringUtil.shorten(calendarBooking.getDescription(),500));
  assetEntryLocalService.updateEntry(userId,assetGroupId,calendarBooking.getCreateDate(),calendarBooking.getModifiedDate(),CalendarBooking.class.getName(),calendarBooking.getCalendarBookingId(),calendarBooking.getUuid(),0,assetCategoryIds,assetTagNames,visible,null,null,null,ContentTypes.TEXT_HTML,calendarBooking.getTitle(),calendarBooking.getDescription(),summary,null,null,0,0,null,false);
}
