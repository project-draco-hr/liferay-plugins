{
  if (isTaggedUser(microblogsEntry.getMicroblogsEntryId(),false,userId) && UserNotificationManagerUtil.isDeliver(userId,PortletKeys.MICROBLOGS,0,MicroblogsEntryConstants.TYPE_TAG,deliveryType)) {
    return MicroblogsEntryConstants.TYPE_TAG;
  }
 else   if (microblogsEntry.getType() == MicroblogsEntryConstants.TYPE_REPLY) {
    long parentMicroblogsEntryId=getParentMicroblogsEntryId(microblogsEntry);
    if ((getParentMicroblogsUserId(microblogsEntry) == userId) && UserNotificationManagerUtil.isDeliver(userId,PortletKeys.MICROBLOGS,0,MicroblogsEntryConstants.TYPE_REPLY,deliveryType)) {
      return MicroblogsEntryConstants.TYPE_REPLY;
    }
 else     if (hasReplied(parentMicroblogsEntryId,userId) && UserNotificationManagerUtil.isDeliver(userId,PortletKeys.MICROBLOGS,0,MicroblogsEntryConstants.TYPE_REPLY_TO_REPLY,deliveryType)) {
      return MicroblogsEntryConstants.TYPE_REPLY_TO_REPLY;
    }
 else     if (MicroblogsUtil.isTaggedUser(parentMicroblogsEntryId,true,userId) && UserNotificationManagerUtil.isDeliver(userId,PortletKeys.MICROBLOGS,0,MicroblogsEntryConstants.TYPE_REPLY_TO_TAG,deliveryType)) {
      return MicroblogsEntryConstants.TYPE_REPLY_TO_TAG;
    }
  }
  return 0;
}
