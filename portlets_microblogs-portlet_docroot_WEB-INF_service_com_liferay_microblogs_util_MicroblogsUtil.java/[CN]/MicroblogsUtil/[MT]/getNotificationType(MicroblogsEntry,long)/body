{
  if (isTaggedUser(microblogsEntry.getMicroblogsEntryId(),false,userId)) {
    return MicroblogsEntryConstants.TYPE_TAG;
  }
 else   if (microblogsEntry.getType() == MicroblogsEntryConstants.TYPE_REPLY) {
    long parentMicroblogsEntryId=getParentMicroblogsEntryId(microblogsEntry);
    if ((getParentMicroblogsUserId(microblogsEntry) == userId)) {
      return MicroblogsEntryConstants.TYPE_REPLY;
    }
 else     if (hasReplied(parentMicroblogsEntryId,userId)) {
      return MicroblogsEntryConstants.TYPE_REPLY_TO_REPLY;
    }
 else     if (MicroblogsUtil.isTaggedUser(parentMicroblogsEntryId,true,userId)) {
      return MicroblogsEntryConstants.TYPE_REPLY_TO_TAG;
    }
  }
  return 0;
}
