{
  BaseAlloyControllerImpl baseAlloyControllerImpl=(BaseAlloyControllerImpl)alloyController;
  String controller=baseAlloyControllerImpl.controllerPath;
  BaseAlloyControllerImpl otherBaseAlloyControllerImpl=_alloyControllers.get(controller);
  if ((otherBaseAlloyControllerImpl == null) || (baseAlloyControllerImpl.getClass() != otherBaseAlloyControllerImpl.getClass())) {
synchronized (controller.intern()) {
      otherBaseAlloyControllerImpl=_alloyControllers.get(controller);
      if ((otherBaseAlloyControllerImpl == null) || (baseAlloyControllerImpl.getClass() != otherBaseAlloyControllerImpl.getClass())) {
        _alloyControllers.put(controller,baseAlloyControllerImpl);
        _alloyControllerInvokerManager.registerController(baseAlloyControllerImpl.getThemeDisplay(),this,baseAlloyControllerImpl.portlet,controller,baseAlloyControllerImpl.getClass());
      }
    }
  }
}
