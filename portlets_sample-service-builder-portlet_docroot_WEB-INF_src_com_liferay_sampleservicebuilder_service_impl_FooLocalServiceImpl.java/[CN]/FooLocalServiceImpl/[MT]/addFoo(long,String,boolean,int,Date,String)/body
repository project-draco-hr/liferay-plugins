{
  User user=userLocalService.getUserById(userId);
  Date now=new Date();
  long fooId=counterLocalService.increment();
  Foo foo=FooUtil.create(fooId);
  foo.setCompanyId(user.getCompanyId());
  foo.setUserId(user.getUserId());
  foo.setUserName(user.getFullName());
  foo.setCreateDate(now);
  foo.setModifiedDate(now);
  foo.setField1(field1);
  foo.setField2(field2);
  foo.setField3(field3);
  foo.setField4(field4);
  foo.setField5(field5);
  FooUtil.update(foo,false);
}
