{
  User user=UserLocalServiceUtil.getUser(userId);
  if (!AkismetUtil.isEnabled(user.getCompanyId())) {
    return false;
  }
  String ipAddress=serviceContext.getRemoteAddr();
  Map<String,String> headers=serviceContext.getHeaders();
  String userAgent=headers.get(HttpHeaders.USER_AGENT.toLowerCase());
  String referrer=headers.get("referer");
  if (AkismetUtil.isSpam(user.getCompanyId(),ipAddress,userAgent,referrer,StringPool.BLANK,AkismetConstants.TYPE_COMMENT,user.getFullName(),user.getEmailAddress(),body)) {
    return true;
  }
 else {
    return false;
  }
}
