{
  StringBuilder sb=new StringBuilder(18);
  sb.append("inner join ExpandoValue on ");
  sb.append("((ExpandoValue.classPK = Layout.groupId) and ");
  sb.append("(ExpandoValue.data_ = 'true')) ");
  sb.append("inner join ExpandoColumn on ");
  sb.append("((ExpandoColumn.columnId = ExpandoValue.columnId) and ");
  sb.append("(ExpandoColumn.name = 'socialOfficeEnabled')) ");
  sb.append("inner join ExpandoTable on ");
  sb.append("((ExpandoTable.tableId = ExpandoValue.tableId) and ");
  sb.append("(ExpandoTable.name = '");
  sb.append(ExpandoTableConstants.DEFAULT_TABLE_NAME);
  sb.append("')) ");
  sb.append("inner join Group_ on ");
  sb.append("((Group_.groupId = Layout.groupId) and ");
  sb.append("((Layout.privateLayout = true) or ");
  sb.append("((Layout.privateLayout = false) and ");
  sb.append("(Group_.classNameId != ");
  sb.append(PortalUtil.getClassNameId(User.class));
  sb.append(")))) ");
  return sb.toString();
}
