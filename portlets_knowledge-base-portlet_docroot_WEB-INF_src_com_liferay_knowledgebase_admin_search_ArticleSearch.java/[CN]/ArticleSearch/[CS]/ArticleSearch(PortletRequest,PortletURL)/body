{
  super(portletRequest,new ArticleDisplayTerms(portletRequest),new ArticleSearchTerms(portletRequest),DEFAULT_CUR_PARAM,DEFAULT_DELTA,iteratorURL,null,EMPTY_RESULTS_MESSAGE);
  ArticleDisplayTerms displayTerms=(ArticleDisplayTerms)getDisplayTerms();
  iteratorURL.setParameter(ArticleDisplayTerms.ANYTIME,String.valueOf(displayTerms.isAnytime()));
  iteratorURL.setParameter(ArticleDisplayTerms.CONTENT,displayTerms.getContent());
  iteratorURL.setParameter(ArticleDisplayTerms.END_DATE_DAY,String.valueOf(displayTerms.getEndDateDay()));
  iteratorURL.setParameter(ArticleDisplayTerms.END_DATE_MONTH,String.valueOf(displayTerms.getEndDateMonth()));
  iteratorURL.setParameter(ArticleDisplayTerms.END_DATE_YEAR,String.valueOf(displayTerms.getEndDateYear()));
  iteratorURL.setParameter(ArticleDisplayTerms.START_DATE_DAY,String.valueOf(displayTerms.getStartDateDay()));
  iteratorURL.setParameter(ArticleDisplayTerms.START_DATE_MONTH,String.valueOf(displayTerms.getStartDateMonth()));
  iteratorURL.setParameter(ArticleDisplayTerms.START_DATE_YEAR,String.valueOf(displayTerms.getStartDateYear()));
  iteratorURL.setParameter(ArticleDisplayTerms.STATUS,String.valueOf(displayTerms.getStatus()));
  iteratorURL.setParameter(ArticleDisplayTerms.TITLE,displayTerms.getTitle());
  try {
    PortalPreferences preferences=PortletPreferencesFactoryUtil.getPortalPreferences(portletRequest);
    PortletPreferences portletPreferences=PortletPreferencesFactoryUtil.getPortletSetup(portletRequest);
    String portletOrderByCol=portletPreferences.getValue("articlesOrderByCol",StringPool.BLANK);
    String portletOrderByType=portletPreferences.getValue("articlesOrderByType",StringPool.BLANK);
    String oldOrderByCol=preferences.getValue(PortletKeys.KNOWLEDGE_BASE_ADMIN,"articles-order-by-col",portletOrderByCol);
    String oldOrderByType=preferences.getValue(PortletKeys.KNOWLEDGE_BASE_ADMIN,"articles-order-by-type",portletOrderByType);
    String orderByCol=ParamUtil.getString(portletRequest,"orderByCol",oldOrderByCol);
    String orderByType=ParamUtil.getString(portletRequest,"orderByType",oldOrderByType);
    if (!Validator.equals(orderByCol,oldOrderByCol) || !Validator.equals(orderByType,oldOrderByType)) {
      preferences.setValue(PortletKeys.KNOWLEDGE_BASE_ADMIN,"articles-order-by-col",orderByCol);
      preferences.setValue(PortletKeys.KNOWLEDGE_BASE_ADMIN,"articles-order-by-type",orderByType);
      ArticleSearchTerms searchTerms=(ArticleSearchTerms)getSearchTerms();
      searchTerms.setCurStartValues(new int[0]);
    }
    OrderByComparator orderByComparator=KnowledgeBaseUtil.getArticleOrderByComparator(orderByCol,orderByType);
    setOrderByCol(orderByCol);
    setOrderByType(orderByType);
    setOrderByComparator(orderByComparator);
  }
 catch (  Exception e) {
    _log.error(e);
  }
}
