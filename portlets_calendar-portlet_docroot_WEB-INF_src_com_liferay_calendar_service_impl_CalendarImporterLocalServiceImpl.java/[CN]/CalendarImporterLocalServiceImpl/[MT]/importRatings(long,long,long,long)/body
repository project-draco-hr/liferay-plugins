{
  List<RatingsEntry> ratingsEntries=ratingsEntryPersistence.findByC_C(oldClassNameId,oldClassPK);
  for (  RatingsEntry ratingsEntry : ratingsEntries) {
    long entryId=counterLocalService.increment();
    addRatingsEntry(entryId,ratingsEntry.getCompanyId(),ratingsEntry.getUserId(),ratingsEntry.getUserName(),ratingsEntry.getCreateDate(),ratingsEntry.getModifiedDate(),classNameId,classPK,ratingsEntry.getScore());
  }
  RatingsStats ratingsStats=ratingsStatsPersistence.fetchByC_C(oldClassNameId,oldClassPK);
  if (ratingsStats == null) {
    return;
  }
  long statsId=counterLocalService.increment();
  addRatingsStats(statsId,classNameId,classPK,ratingsStats.getTotalEntries(),ratingsStats.getTotalScore(),ratingsStats.getAverageScore());
}
