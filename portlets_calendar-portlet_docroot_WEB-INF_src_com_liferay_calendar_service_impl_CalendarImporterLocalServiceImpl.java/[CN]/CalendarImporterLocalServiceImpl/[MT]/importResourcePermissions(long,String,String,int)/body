{
  List<ResourcePermission> resourcePermissions=resourcePermissionPersistence.findByC_N_S(companyId,oldClassName,scope);
  for (  ResourcePermission resourcePermission : resourcePermissions) {
    long actionIds=getActionIds(resourcePermission,oldClassName,newClassName);
    if (scope == ResourceConstants.SCOPE_GROUP) {
      resourceBlockLocalService.addGroupScopePermissions(companyId,Long.parseLong(resourcePermission.getPrimKey()),newClassName,resourcePermission.getRoleId(),actionIds);
    }
 else {
      resourceBlockLocalService.addCompanyScopePermissions(companyId,newClassName,resourcePermission.getRoleId(),actionIds);
    }
    resourcePermissionPersistence.remove(resourcePermission.getResourcePermissionId());
  }
}
