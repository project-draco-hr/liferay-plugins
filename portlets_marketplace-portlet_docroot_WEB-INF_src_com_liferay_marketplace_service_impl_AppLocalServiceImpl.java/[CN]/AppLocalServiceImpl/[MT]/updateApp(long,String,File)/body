{
  validate(0,version);
  App app=appPersistence.findByPrimaryKey(appId);
  app.setModifiedDate(new Date());
  app.setVersion(version);
  appPersistence.update(app);
  if (file != null) {
    try {
      DLStoreUtil.deleteFile(app.getCompanyId(),CompanyConstants.SYSTEM,app.getFilePath());
    }
 catch (    Exception e) {
    }
    DLStoreUtil.addFile(app.getCompanyId(),CompanyConstants.SYSTEM,app.getFilePath(),false,file);
  }
  return app;
}
