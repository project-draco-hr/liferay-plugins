{
  App app=appPersistence.findByRemoteAppId(remoteAppId);
  List<Module> modules=modulePersistence.findByAppId(app.getAppId());
  for (  Module module : modules) {
    String contextName=module.getContextName();
    if (hasDependentApp(module)) {
      continue;
    }
    try {
      DeployManagerUtil.undeploy(contextName);
    }
 catch (    Exception e) {
      _log.error(e,e);
    }
 finally {
      moduleLocalService.deleteModule(module.getModuleId());
    }
  }
}
