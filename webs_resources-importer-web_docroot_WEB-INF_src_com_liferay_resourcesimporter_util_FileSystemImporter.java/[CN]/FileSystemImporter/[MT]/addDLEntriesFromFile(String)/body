{
  File resourceFile=new File(url);
  String documentLibraryTargetPath=url.substring(_localDocumentLibrarySourcePath.length());
  long[] destinationIds=getDLResourcePathIds(documentLibraryTargetPath);
  String name=resourceFile.getName();
  String description="";
  long parentFolderId=(destinationIds.length == 0) ? 0 : destinationIds[destinationIds.length - 1];
  if (resourceFile.isDirectory()) {
    if (Validator.isNotNull(documentLibraryTargetPath)) {
      DLAppLocalServiceUtil.addFolder(userId,groupId,parentFolderId,name,description,serviceContext);
    }
    File[] children=resourceFile.listFiles();
    for (    File child : children) {
      addDLEntriesFromFile(child.getAbsolutePath());
    }
  }
 else {
    String fileName=resourceFile.getName();
    String mimeType=MimeTypesUtil.getContentType(fileName);
    String title=FileUtil.stripExtension(fileName);
    try {
      DLAppLocalServiceUtil.addFileEntry(userId,groupId,parentFolderId,fileName,mimeType,title,"",null,resourceFile,serviceContext);
    }
 catch (    Exception e) {
      handleException(e);
    }
  }
}
