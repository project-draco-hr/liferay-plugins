{
  serviceContext=new ServiceContext();
  serviceContext.setAddGroupPermissions(true);
  serviceContext.setAddGuestPermissions(true);
  serviceContext.setScopeGroupId(groupId);
  boolean indexReadOnly=SearchEngineUtil.isIndexReadOnly();
  try {
    SearchEngineUtil.setIndexReadOnly(true);
    setUpAssets("assets.json");
    setUpSettings("settings.json");
    setUpSitemap("sitemap.json");
    SearchEngineUtil.setIndexReadOnly(false);
    StopWatch stopWatch=new StopWatch();
    if (_log.isDebugEnabled()) {
      _log.debug("Commence indexing");
      stopWatch.start();
    }
    index();
    if (_log.isDebugEnabled()) {
      stopWatch.stop();
      _log.debug("Indexing completed in: " + stopWatch.getTime() + "ms");
    }
  }
  finally {
    SearchEngineUtil.setIndexReadOnly(indexReadOnly);
  }
}
