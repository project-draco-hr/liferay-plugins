{
  long rootResourcePrimKey=KBFolderConstants.DEFAULT_PARENT_FOLDER_ID;
  if (_kbArticle != null) {
    rootResourcePrimKey=KnowledgeBaseUtil.getKBFolderId(_kbArticle.getParentResourceClassNameId(),_kbArticle.getParentResourcePrimKey());
  }
  if (rootResourcePrimKey == KBFolderConstants.DEFAULT_PARENT_FOLDER_ID) {
    rootResourcePrimKey=KnowledgeBaseUtil.getRootResourcePrimKey(_portletRequest,PortalUtil.getScopeGroupId(_portletRequest),getResourceClassNameId(),getResourcePrimKey());
  }
  return rootResourcePrimKey;
}
