{
  Object[] plidAndWindowState=getPlidAndWindowState(portletId,resourcePrimKey,portalURL);
  long plid=(Long)plidAndWindowState[0];
  WindowState windowState=(WindowState)plidAndWindowState[1];
  if (plid == LayoutConstants.DEFAULT_PLID) {
    return StringPool.BLANK;
  }
  boolean isMaximized=windowState.equals(WindowState.MAXIMIZED);
  Layout layout=LayoutLocalServiceUtil.getLayout(plid);
  String layoutActualURL=PortalUtil.getLayoutActualURL(layout);
  String layoutFullURL=portalURL + layoutActualURL;
  return getArticleURL(portletId,resourcePrimKey,layoutFullURL,isMaximized);
}
