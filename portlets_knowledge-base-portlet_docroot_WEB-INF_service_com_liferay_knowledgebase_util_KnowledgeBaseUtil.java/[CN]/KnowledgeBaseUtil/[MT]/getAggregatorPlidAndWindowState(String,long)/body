{
  Article article=ArticleLocalServiceUtil.getLatestArticle(resourcePrimKey);
  long parentGroupId=PortalUtil.getParentGroupId(article.getGroupId());
  long plid=PortalUtil.getPlidFromPortletId(parentGroupId,portletId);
  WindowState windowState=WindowState.NORMAL;
  if (plid == LayoutConstants.DEFAULT_PLID) {
    return new Object[]{plid,windowState};
  }
  Layout layout=LayoutLocalServiceUtil.getLayout(plid);
  PortletPreferences jxPreferences=PortletPreferencesFactoryUtil.getPortletSetup(layout,portletId,StringPool.BLANK);
  String articleWindowState=jxPreferences.getValue("article-window-state",WindowState.MAXIMIZED.toString());
  if (articleWindowState.equals(WindowState.MAXIMIZED.toString())) {
    windowState=WindowState.MAXIMIZED;
  }
  if (hasArticle(article,jxPreferences)) {
    return new Object[]{plid,windowState};
  }
  return new Object[]{LayoutConstants.DEFAULT_PLID,WindowState.NORMAL};
}
