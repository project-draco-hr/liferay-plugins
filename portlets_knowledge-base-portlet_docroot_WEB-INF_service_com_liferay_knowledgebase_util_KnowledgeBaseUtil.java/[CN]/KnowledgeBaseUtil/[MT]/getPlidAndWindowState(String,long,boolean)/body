{
  Article article=ArticleLocalServiceUtil.getLatestArticle(resourcePrimKey,WorkflowConstants.STATUS_APPROVED);
  long plid=PortalUtil.getPlidFromPortletId(article.getGroupId(),portletId);
  if (plid == LayoutConstants.DEFAULT_PLID) {
    return new Object[]{plid,WindowState.NORMAL};
  }
  Layout layout=LayoutLocalServiceUtil.getLayout(plid);
  PortletPreferences jxPreferences=PortletPreferencesFactoryUtil.getPortletSetup(layout,portletId,StringPool.BLANK);
  WindowState windowState=WindowState.NORMAL;
  if (checkWindowState) {
    String articleWindowState=jxPreferences.getValue("article-window-state",WindowState.MAXIMIZED.toString());
    if (articleWindowState.equals(WindowState.MAXIMIZED.toString())) {
      windowState=WindowState.MAXIMIZED;
    }
  }
  if (hasArticle(article,jxPreferences)) {
    return new Object[]{plid,windowState};
  }
  return new Object[]{LayoutConstants.DEFAULT_PLID,WindowState.NORMAL};
}
