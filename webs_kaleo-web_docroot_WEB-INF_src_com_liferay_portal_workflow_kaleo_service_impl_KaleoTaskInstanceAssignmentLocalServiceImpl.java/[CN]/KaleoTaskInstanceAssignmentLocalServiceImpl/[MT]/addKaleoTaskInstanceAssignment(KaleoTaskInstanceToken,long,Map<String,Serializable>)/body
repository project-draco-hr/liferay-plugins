{
  KaleoTaskAssignment kaleoTaskAssignment=kaleoTaskAssignmentPersistence.findByPrimaryKey(kaleoTaskAssignmentId);
  User user=userPersistence.findByPrimaryKey(kaleoTaskInstanceToken.getUserId());
  Date now=new Date();
  long kaleoTaskInstanceAssignmentId=counterLocalService.increment();
  KaleoTaskInstanceAssignment kaleoTaskInstanceAssignment=kaleoTaskInstanceAssignmentPersistence.create(kaleoTaskInstanceAssignmentId);
  kaleoTaskInstanceAssignment.setCompanyId(user.getCompanyId());
  kaleoTaskInstanceAssignment.setUserId(user.getUserId());
  kaleoTaskInstanceAssignment.setUserName(user.getFullName());
  kaleoTaskInstanceAssignment.setCreateDate(now);
  kaleoTaskInstanceAssignment.setModifiedDate(now);
  kaleoTaskInstanceAssignment.setKaleoTaskInstanceTokenId(kaleoTaskInstanceToken.getKaleoTaskInstanceTokenId());
  kaleoTaskInstanceAssignment.setKaleoTaskId(kaleoTaskAssignment.getKaleoTaskId());
  kaleoTaskInstanceAssignment.setAssigneeClassName(kaleoTaskAssignment.getAssigneeClassName());
  kaleoTaskInstanceAssignment.setAssigneeClassPK(kaleoTaskAssignment.getAssigneeClassPK());
  kaleoTaskInstanceAssignment.setContext(ContextUtil.convert(context));
  kaleoTaskInstanceAssignmentPersistence.update(kaleoTaskInstanceAssignment,false);
  return kaleoTaskInstanceAssignment;
}
