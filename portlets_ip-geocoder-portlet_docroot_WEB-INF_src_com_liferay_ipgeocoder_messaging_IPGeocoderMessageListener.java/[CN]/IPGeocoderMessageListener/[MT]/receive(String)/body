{
  try {
    JSONObject jsonObj=new JSONObject(message);
    String ipAddress=jsonObj.getString("ipAddress");
    IPInfo ipInfo=IPInfoLocalServiceUtil.getIPInfo(ipAddress);
    String responseId=jsonObj.optString("responseId");
    if (Validator.isNotNull(responseId)) {
      JSONObject jsonObject=new JSONObject();
      JSONUtil.put(jsonObject,"responseId",responseId);
      JSONUtil.put(jsonObject,"ipInfo",JSONUtil.serialize(ipInfo));
      MessageBusUtil.sendMessage(DestinationNames.RESPONSE,jsonObject.toString());
    }
  }
 catch (  Exception e) {
    _log.error(e,e);
  }
}
