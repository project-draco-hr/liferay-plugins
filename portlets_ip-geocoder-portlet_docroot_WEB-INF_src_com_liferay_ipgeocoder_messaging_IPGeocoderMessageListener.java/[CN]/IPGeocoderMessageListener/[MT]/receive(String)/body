{
  try {
    JSONObject jsonObj=new JSONObject(message);
    String responseDestination=jsonObj.optString("lfrResponseDestination");
    String responseId=jsonObj.optString("lfrResponseId");
    if (Validator.isNotNull(responseDestination) && Validator.isNotNull(responseId)) {
      String ipAddress=jsonObj.getString("ipAddress");
      IPInfo ipInfo=IPGeocoderUtil.getIPInfo(ipAddress);
      JSONObject jsonObject=new JSONObject();
      JSONUtil.put(jsonObject,"lfrResponseId",responseId);
      JSONUtil.put(jsonObject,"ipInfo",new JSONObject(JSONUtil.serialize(ipInfo)));
      MessageBusUtil.sendMessage(responseDestination,jsonObject.toString());
    }
  }
 catch (  Exception e) {
    _log.error(e,e);
  }
}
