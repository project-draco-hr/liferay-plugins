{
  try {
    JSONObject jsonObj=new JSONObject(message);
    String responseId=jsonObj.optString("responseId");
    if (Validator.isNotNull(responseId)) {
      String ipAddress=jsonObj.getString("ipAddress");
      IPInfo ipInfo=IPGeocoderUtil.getIPInfo(ipAddress);
      JSONObject jsonObject=new JSONObject();
      JSONUtil.put(jsonObject,"responseId",responseId);
      JSONUtil.put(jsonObject,"ipInfo",new JSONObject(JSONUtil.serialize(ipInfo)));
      MessageBusUtil.sendMessage(DestinationNames.RESPONSE,jsonObject.toString());
    }
  }
 catch (  Exception e) {
    _log.error(e,e);
  }
}
