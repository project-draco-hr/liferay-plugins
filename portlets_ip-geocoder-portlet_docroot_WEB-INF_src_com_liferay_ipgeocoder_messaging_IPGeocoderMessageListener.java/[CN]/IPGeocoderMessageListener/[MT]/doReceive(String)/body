{
  JSONObject jsonObj=JSONFactoryUtil.createJSONObject(message);
  String responseDestination=jsonObj.getString("lfrResponseDestination");
  String responseId=jsonObj.getString("lfrResponseId");
  if (Validator.isNull(responseDestination) || Validator.isNull(responseId)) {
    return;
  }
  String ipAddress=jsonObj.getString("ipAddress");
  IPInfo ipInfo=IPGeocoderUtil.getIPInfo(ipAddress);
  jsonObj=JSONFactoryUtil.createJSONObject();
  jsonObj.put("lfrResponseId",responseId);
  jsonObj.put("ipInfo",JSONFactoryUtil.createJSONObject(JSONFactoryUtil.serialize(ipInfo)));
  MessageBusUtil.sendMessage(responseDestination,jsonObj.toString());
}
