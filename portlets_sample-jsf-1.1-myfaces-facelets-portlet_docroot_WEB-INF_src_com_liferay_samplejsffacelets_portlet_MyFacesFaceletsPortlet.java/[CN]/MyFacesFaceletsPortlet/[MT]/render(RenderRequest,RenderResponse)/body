{
  PortletSession portletSession=renderRequest.getPortletSession();
  PortletMode mode=(PortletMode)portletSession.getAttribute("CurrentPortletMode");
  if (mode == null) {
    mode=renderRequest.getPortletMode();
  }
  if (mode != renderRequest.getPortletMode()) {
    renderRequest.setAttribute("isPortletModeChanged",Boolean.TRUE);
  }
 else {
    renderRequest.setAttribute("isPortletModeChanged",Boolean.FALSE);
  }
  portletSession.setAttribute("CurrentPortletMode",mode);
  super.render(renderRequest,renderResponse);
}
