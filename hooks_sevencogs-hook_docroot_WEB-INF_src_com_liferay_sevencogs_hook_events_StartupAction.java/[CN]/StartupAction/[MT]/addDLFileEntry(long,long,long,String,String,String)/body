{
  byte[] bytes=getBytes("/document_library/" + name);
  ServiceContext serviceContext=new ServiceContext();
  serviceContext.setAddCommunityPermissions(true);
  serviceContext.setAddGuestPermissions(false);
  try {
    return DLFileEntryLocalServiceUtil.addFileEntry(userId,groupId,folderId,name,title,description,StringPool.BLANK,bytes,serviceContext);
  }
 catch (  DuplicateFileException dfe) {
    return DLFileEntryLocalServiceUtil.updateFileEntry(userId,groupId,folderId,folderId,name,null,title,description,StringPool.BLANK,bytes,serviceContext);
  }
}
