{
  byte[] bytes=getBytes(fileName);
  serviceContext.setAddCommunityPermissions(true);
  serviceContext.setAddGuestPermissions(false);
  try {
    return DLFileEntryLocalServiceUtil.addFileEntry(null,userId,groupId,folderId,name,title,description,StringPool.BLANK,StringPool.BLANK,bytes,serviceContext);
  }
 catch (  DuplicateFileException dfe) {
    return DLFileEntryLocalServiceUtil.updateFileEntry(userId,groupId,folderId,folderId,name,null,title,description,StringPool.BLANK,true,StringPool.BLANK,bytes,serviceContext);
  }
}
